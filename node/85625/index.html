<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>dumps every glyph in a font to a text file | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="dumps every glyph in a font to a text file" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/85625/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2011-09-20T02:11:47+00:00" />
<meta property="article:modified_time" content="2011-09-20T02:11:47+00:00" />

<meta itemprop="name" content="dumps every glyph in a font to a text file">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2011-09-20T02:11:47+00:00" />
<meta itemprop="dateModified" content="2011-09-20T02:11:47+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="dumps every glyph in a font to a text file"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">dumps every glyph in a font to a text file</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2011-09-20T02:11:47Z">September 20, 2011</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">flybrid</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>some friends of mine recommend me to ask this kind of question here</p>
<p>I want to write a program which takes font name as the parameter and dumps every glyph in this font to a txt file</p>
<p>like</p>
<p>bool dumpEveryGlyph(string fontName);</p>
<p>I am wondering if there is any API which can help me to do this? (.net API?  win32 API?)</p>
<p>thanks very much</p>
</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Here is a related thread: <a href="http://typophile.com/node/64147">http://typophile.com/node/64147</a></div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-09-20 03:02:56"
			itemprop="datePublished"
		>
			2011-09-20 03:02:56
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Michel Boyer</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">The tricky thing is that not every glyph in a font must have a code point assigned, that means these unencoded glyphs cannot be represented in a plain text file.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-09-20 13:07:09"
			itemprop="datePublished"
		>
			2011-09-20 13:07:09
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Jens Kutilek</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Jens is correct. You cannot dump <em>glyphs</em> into a text file because a glyph means exactly nothing. It&rsquo;s the code points that count, because these form the link between the ASCII (or Unicode) character code you want to display and the actual piece of graphic (the glyph) that&rsquo;s going to be drawn. It&rsquo;s extremely important to understand these concepts correctly before you are going to pull off some low-level trick as you are attempting.</p>
<p>(This bypasses any Opentype niceties, but then again it should. Opentype features have nothing to do with codepoints &ndash; well, at least nothing you could &lsquo;dump into a txt file&rsquo;.)</p>
<p>There are Windows APIs &ndash; you don&rsquo;t tell, which is a mortal sin, but I presume you <em>are</em> talking about a Windows program here &ndash; that can return font information, but I cannot remember if I really ever bothered to get down with those. My own experimental program is firmly based on my grasp of the file format of Truetype and Opentype font files, so I can locate and extract the all-important <code>cmap</code> entry and work it out from there.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-09-20 21:12:16"
			itemprop="datePublished"
		>
			2011-09-20 21:12:16
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Theunis de Jong</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I see the request is from mainland China, where the preferred encoding is neither UTF-8 nor UTF-16 but <a href="http://en.wikipedia.org/wiki/Guobiao_code">GB 18030</a> and where the &ldquo;niceties&rdquo; of unicode may not be the main concern.</p>
<p>If you install ttx and apply <code>ttx -i -t cmap filename.extension</code> to your font file, giving the file <code>filename.ttx</code>, then the following Python code should give the desired text (on a single line) in <code>filename.txt</code>. Modifying the code to cut into lines, if needed, should be straightforward.</p>
<PRE>
from xml.dom.minidom import *
import sys, re

f=open(sys.argv[1])
r1=re.compile(r'(.+)\.ttx$', re.IGNORECASE)
foutname=r1.match(sys.argv[1]).group(1)+".txt"
fout=open(foutname,'w')

doc=parse(f)

encdng='gb18030'

str=''
cmaps=doc.getElementsByTagName('cmap_format_12')
if not cmaps:
  cmaps=doc.getElementsByTagName('cmap_format_4')
maps=cmaps[0].getElementsByTagName('map')
for map in maps:
  code=int(map.getAttribute('code'),16)
  if code > 0x20:
    str=str+unichr(code)
fout.write("%s\n" % (str.encode(encdng)))
fout.close
</PRE>
<p>Of course, &lsquo;gb18030&rsquo; could be replaced by &lsquo;utf-8&rsquo; or &lsquo;utf-16&rsquo; or some other encoding. If you copy the lines above, save to some file, say <code>dmpcmap.py</code> and then execute</p>
<PRE>
python dmpcmap.py filename.ttx
</PRE>
<p>you get the text in <code>filename.txt</code></p>
<p>This was tested on a Mac with <code>python26 @2.6.7_1+ucs4</code> on the font ST Heiti</p>
<p>Michel</p>
<p>PS The code does not check the platform because on my Mac, there are fonts without a cmap for Windows and I wanted to get an output file. Also, the code is slow on large files.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-09-22 01:13:23"
			itemprop="datePublished"
		>
			2011-09-22 01:13:23
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Michel Boyer</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
