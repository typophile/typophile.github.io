<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>AFDKO and font variants in features files | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="AFDKO and font variants in features files" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/124029/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2015-03-24T09:36:55+00:00" />
<meta property="article:modified_time" content="2015-03-24T09:36:55+00:00" />

<meta itemprop="name" content="AFDKO and font variants in features files">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2015-03-24T09:36:55+00:00" />
<meta itemprop="dateModified" content="2015-03-24T09:36:55+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="AFDKO and font variants in features files"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <div class="float-right">
 
    <a class="text-decoration-none share facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2ftypophile.github.io%2fnode%2f124029%2f"><i class="bi bi-facebook"></i></a> 
    
    <a class="text-decoration-none share twitter" href="https://twitter.com/intent/tweet?text=title&amp;url=http%3a%2f%2ftypophile.github.io%2fnode%2f124029%2f&amp;"><i class="bi bi-twitter"></i></a> 
    
    <a class="text-decoration-none share linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2ftypophile.github.io%2fnode%2f124029%2f&amp;source=http%3a%2f%2ftypophile.github.io%2fnode%2f124029%2f/"><i class="bi bi-linkedin"></i></a>
 </a>
</div>

    <h1 class="post-title p-name" itemprop="name headline">AFDKO and font variants in features files</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2015-03-24T09:36:55Z">March 24, 2015</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Costals">
            Costals
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>Hello,</p>
<p>My questions would probably appear quite obvious to you, but I have failed to find any answer around Google or in the AFDKO specs (perhaps because I&rsquo;m not using the good keywords?)</p>
<p>I&rsquo;m using a spanish OTF font with (Lua)Latex which shows some minor problems for my language (french, namely) and, for example, comes with very tight-kerned apostrophe. I use a .fea file in Latex to add some space around it, and fix some exotic glyph combinations.</p>
<p>First, I have very few specific problems with the italic variant, and would like to create a my-kerning-it.fea which, first, loads my standard file (namely my-kerning-rm.fea) to apply it to the italics, and, 2nd, adds one or two more positionning lines specificaly made for italics, instead of having to copy and paste from one file to another each time I&rsquo;m tuning the standard roman .fea file. Is it possible to do so?</p>
<p>Second problem, when I&rsquo;m writing my file, I&rsquo;m trying to cover any possible variants of a character, and uses long lists of glyphs, like:</p>
<blockquote>pos L quoteright' 10 [A Aacute Abreve Acircumflex Adieresis Agrave Amacron Aogonek Aring Aringacute Atilde];</blockquote>
<p>Is there any glyph class by default, eg. <em>@A_&amp;_variants</em> like the <em>@smallcaps</em> one cited in the 2.g.ii. part of the [[http://web.archive.org/web/20081207035530/http://www.adobe.com/devnet/opentype/afdko/topic_feature_file_syntax.html#2.g|AFDKO file syntax help]] from Adobe? (Note I&rsquo;m using an old one, for compatibily reason in Latex.)</p>
<p>Thanks for attention,</p>
<p>PC</p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>All names used for classes in the <code>.fea</code> file are lost when the <code>.otf</code> font is generated. I can see no way  to  access those classes from a <code>.fea</code> file to be used with LuaLaTeX.</p>
<p>If I understand well the other question, you would like a way to include a generic <code>.fea</code> file in other <code>.fea</code> files instead of copying its content for each. According to your reference, there is indeed an  <a href="http://web.archive.org/web/20081207035530/http://www.adobe.com/devnet/opentype/afdko/topic_feature_file_syntax.html#3">include command</a>  that should do exactly that but I don&rsquo;t know if LuaTeX implements it or not.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2015-03-25 01:49:48"
			itemprop="datePublished"
		>
			2015-03-25 01:49:48
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Michel&#43;Boyer">
            Michel Boyer
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Hi Michel and thanks for your answer.</p>
<p>For the first question, I have found something that help me a little, an <a href="https://github.com/georgd/EB-Garamond/blob/master/featurefiles/Regular/classes.fea">.fea class file</a> from another Latex package, Eb Garamond, with a lot of class definitions.</p>
<p>The <em>include</em> command works fine, so the files are linked as I wished. The problem is now how to switch from one variant to another in Luatex without using each time an huge custom command like:
<em>\setmainfont{Fontname}[FeatureFile={my-kerning-it.fea}]</em>
instead ot the standard <em>/textit{}</em> one.</p>
<p>It seems like a problem that could be solved from the .fea file with an <em>Ifdef</em> command, as I see in <a href="http://get-software.net/fonts/amiri/sources/amiri.fea">that one</a>: 
<em>ifdef ITALIC
include &ldquo;italic.fea&rdquo;
endif</em></p>
<p>But it&rsquo;s not working for me, and I can&rsquo;t find any documentation about that <em>Ifdef italic</em> command in the AFDKO reference file. I think I&rsquo;m gonna let the italics standard kerning for now, until I find a way to use it the standard way in Luatex.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2015-03-25 09:46:40"
			itemprop="datePublished"
		>
			2015-03-25 09:46:40
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Costals">
            Costals
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I am still not sure I understand what you want. If you simply want to use <code>\textit</code> to switch font and get the proper features, the <code>fontspec</code> package already allows you to do that. You can specify in <code>\setmainfont</code> not only the features for the italic but even the font you want to use as the italic when calling <code>\textit{}</code>. Here is an example where I asked for an c_t ligature in the regular and an s_t ligature in the italic:</p>
<PRE>
\documentclass[12pt]{article}
\usepackage{fontspec}

\setmainfont[
 UprightFeatures = {FeatureFile = garreg.fea},
 ItalicFont = Garamond Premier Pro Italic,
 ItalicFeatures = {FeatureFile = garit.fea}]{Garamond Premier Pro}

\begin{document}
Action station \textit{action station} 
\end{document} 
</PRE>
<p>And the output is:
<img src="/images/old-images/ligs_5294.png" alt="">
As you can see the c_t ligature is active only for the regular and the s_t ligature is active only for the italic, all that with standard LaTeX commands to switch fonts, provided you properly specified your choices in  <code>\setmainfont</code> (there are also commands to modify your choices).</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2015-03-26 03:29:17"
			itemprop="datePublished"
		>
			2015-03-26 03:29:17
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Michel&#43;Boyer">
            Michel Boyer
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Hi and thanks again, Mr Boyer.</p>
<p>You completely understood my problem—and even solved it.</p>
<p>With gratitude,</p>
<p>Costals</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2015-03-26 12:36:27"
			itemprop="datePublished"
		>
			2015-03-26 12:36:27
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Costals">
            Costals
	    </a>
			</span></span>
	</div>
	
</div>
 
  <p class="text-end"><a class="text-secondary" href="https://github.com/typophile/typophile.github.io/edit/main/content/node/124029.md">Suggest an edit</a></p>

</article>

    </main>
    
  </body>
</html>
