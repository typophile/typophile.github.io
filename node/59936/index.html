<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Help! Devanagari &#34;locl&#34; Feature doesn&#39;t work properly | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Help! Devanagari &#34;locl&#34; Feature doesn&#39;t work properly" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/59936/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2009-07-14T10:28:56+00:00" />
<meta property="article:modified_time" content="2009-07-14T10:28:56+00:00" />

<meta itemprop="name" content="Help! Devanagari &#34;locl&#34; Feature doesn&#39;t work properly">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2009-07-14T10:28:56+00:00" />
<meta itemprop="dateModified" content="2009-07-14T10:28:56+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Help! Devanagari &#34;locl&#34; Feature doesn&#39;t work properly"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Help! Devanagari "locl" Feature doesn't work properly</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2009-07-14T10:28:56Z">July 14, 2009</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">satya</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>Hello Everyone!</p>
<p>I am having some issues with the localized (locl) feature for Devanagari. It doesn&rsquo;t seems to work properly in my case. I remember Dan Reynolds asking for a similar help long back but that was to do with the spacing I guess.</p>
<p>Okay, I have two sets of punctuation marks for both Latin and Devanagari, and only the Latin punctuation marks has unicode assigned to them. I have created a &ldquo;locl&rdquo; feature using VOLT for Devanagari so that it takes the appropriate punctuation marks when Hindi is typed.</p>
<p>Now the issues I am facing is:
When I type &ldquo;comma&rdquo; or &ldquo;period&rdquo;  while in Devanagari mode, it doesn&rsquo;t get replaced with the &ldquo;dev_comma&rdquo; or &ldquo;dev_period&rdquo;. And because of that, the application thinks that I have switched to Latin and it converts all Devanagari marks to the Latin marks which is typed after comma or period.</p>
<p>Has anyone encountered this issue before? If so, is there a way I can get rid of this? Hello John? Dan?</p>
<p>Here is an image, just to show you what I meant:</p>
<p>[img:sites/default/files/old-images/TypophileFH_5516.jpg]</p>
<p>Thanks!</p>
</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">What application and which version of Windows are you using?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-14 15:54:23"
			itemprop="datePublished"
		>
			2009-07-14 15:54:23
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>sergeym</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I am using Adobe InDesign CS4 on a Mac with Adobe World-Ready Composer on.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-14 16:16:28"
			itemprop="datePublished"
		>
			2009-07-14 16:16:28
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>satya</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Do you have your script and language declarations in the code?</p>
<p>ChrisL</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-14 18:17:15"
			itemprop="datePublished"
		>
			2009-07-14 18:17:15
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>dezcom</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Yes, Chris!</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-14 22:18:08"
			itemprop="datePublished"
		>
			2009-07-14 22:18:08
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>satya</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Is the substitution contextual? (meaning, does it try to find out if what&rsquo;s surrounding the punctuation mark are Latin characters or Devanagari characters)</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-15 00:29:40"
			itemprop="datePublished"
		>
			2009-07-15 00:29:40
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Miguel Sousa</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><blockquote>
<p><em>I remember Dan Reynolds asking for a similar help long back</em></p>
</blockquote>
<p>This thread? <a href="http://typophile.com/node/40602">http://typophile.com/node/40602</a></p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-15 00:36:33"
			itemprop="datePublished"
		>
			2009-07-15 00:36:33
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Miguel Sousa</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>In my case, I was working with Word. If I remember correctly, there wasn&rsquo;t any way to convince Uniscribe that the space character could be anything other than the default, Latin space glyph. Oddly enough, I could write some gerry-riged OT code to get my Deva space to come up as a substitution some of the time in CS3 (I know, I know…). It is theoretically possible that you can&rsquo;t have alternate language-specific versions of punctuation yet.</p>
<p>My solution in the end (with the space) was to make it slightly bigger than I had hoped for the Latin text, optically, and slightly tighter than I had wanted it to be with Devanagari text. Worst of both worlds, but no one will probably ever complain about it.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-15 07:52:44"
			itemprop="datePublished"
		>
			2009-07-15 07:52:44
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>dan_reynolds</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Alternatively, have you tried making your Deva punctuation the default, and have the locl feature go the other way around? I mean, build the Latin punctuation for Latin text as an alternate in the Latin script&rsquo;s locl feature.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-15 07:54:12"
			itemprop="datePublished"
		>
			2009-07-15 07:54:12
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>dan_reynolds</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I have tried every possible way to do this - but no, it&rsquo;s not happening. :(</p>
<p>Problem is that the substitution is taking place with a few marks but not for all, specially with the &ldquo;commas&rdquo; and &ldquo;periods&rdquo;. And that is why, even if am not using any Latin text while in Hindi mode, Uniscribe thinks that the &ldquo;commas&rdquo; and &ldquo;periods&rdquo; I have used in Hindi are Latin characters and it changes every proceeding punctuation mark to a Latin mark.</p>
<p>In CS4, at least a few marks are getting replaced, but in the MS Word and other Windows applications it&rsquo;s not happening at all. 
Oh yes, it works fine in the VOLT proofing tool though.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-15 16:58:40"
			itemprop="datePublished"
		>
			2009-07-15 16:58:40
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>satya</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Okay, is there a way I can make an alternate for the &ldquo;comma&rdquo; only? It doesn&rsquo;t seems to work even if I create a Stylistic Set too.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-15 19:33:23"
			itemprop="datePublished"
		>
			2009-07-15 19:33:23
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>satya</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Satya, the problems you are facing are most likely due to layout engine decisions about how and where to divide glyph runs. It would take a while to figure out exactly what the issues are in different applications. I&rsquo;m about the leave for TypeCon in Atlanta, so can&rsquo;t offer more detailed advice now.</p>
<p>I suspect Sergey Malkin at MS can explain what is happening in the case of Word. Note also that this might depend on what version of Windows you are using: the latest Uniscribe rolls punctuation into glyph runs with adjacent text, but relies upon a system level wrapper that means this won&rsquo;t work in pre-Vista versions of Windows even if you copy the usp10.dll from Vista to an older OS.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-15 20:34:30"
			itemprop="datePublished"
		>
			2009-07-15 20:34:30
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>John Hudson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>There are two decisions application has to make when shaping multilingual text. One is break text into runs based on script for contextual shaping. Another one is to choose appropriate font to use. They look very similar, but in fact different enough. For example, font matching would preferably use same font for all punctuation characters across paragraph or even document and script itemization would add comma to preceding word for better kerning. These algorithms may also have cross-dependencies and require making compromises, when results of one may influence the other.</p>
<p>Decisions made by both algorithms may be influenced by many factors, from base font set on piece of text, document language, language for particular piece of text, user settings, etc. I am sure there is no single ‘right’ algorithm for doing that.  It would depend on many factors, including target audience for the application. What typographers using InDesign expect and are willing to control manually is radically different from general audience using Word.</p>
<p>Word is using language of the text and would probably do better job with this, but it has weird algorithms of determining what this language is and how to break text into script runs. It may be based on keyboard you used when typing or languages enabled in your copy of Office. It may break text into runs in arbitrary places, as we recently learned with broken contextual shaping of Latin text in Office 2010. It may even reject shaping Arabic if typed inside Word, but shape it when you copy-paste it from Notepad.</p>
<p>Word have made lots of compromises, consciously  or unconsciously, over last 20 years based on user scenarios and heavily dependent on their layout algorithms. When situation changes or new features added , e.g. OpenType shaping is added for simple scripts, such logic should be changed accordingly, but this very hard to do because of compatibility reasons. In short, we will probably have to live with this code in Word for a while.</p>
<p>Thanks,
Sergey</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-25 16:34:55"
			itemprop="datePublished"
		>
			2009-07-25 16:34:55
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>sergeym</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Uniscribe itself is lower level library and does not have enough control over itemization and font matching decisions. On the level it is used by Word or Publisher or Internet Explorer it does not provide font matching functionality, so application is on its own to implement whatever algorithms it chooses. Since Vista/Office2007 it can help application to some extent by merging neutral items to adjacent strong characters. I’ve tried to make this logic to work in most general cases, but it still has its own problems. It may do better, however parameters available to Uniscribe at this stage lacks context in which text is being set. Uniscribe also have higher-level APIs used by Windows UI, such as menus or common controls. As you may see experimenting with notepad, text may show inconsistency in shaping same punctuation or space glyphs because they may be itemized to different scripts.</p>
<p>Thanks,
Sergey</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-25 16:45:56"
			itemprop="datePublished"
		>
			2009-07-25 16:45:56
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>sergeym</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
