<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Language-specific contextual substitution | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="Language-specific contextual substitution" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/52414/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2008-12-06T02:47:54+00:00" />
<meta property="article:modified_time" content="2008-12-06T02:47:54+00:00" />

<meta itemprop="name" content="Language-specific contextual substitution">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2008-12-06T02:47:54+00:00" />
<meta itemprop="dateModified" content="2008-12-06T02:47:54+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Language-specific contextual substitution"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Language-specific contextual substitution</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2008-12-06T02:47:54Z">December 6, 2008</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:guifa">
            guifa
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>The only way I can think to do this seems a bit complex so maybe there&rsquo;s ane asier way.</p>
<p>In Spanish (including modern day) often times the word &ldquo;de&rdquo; when set in all capitals is ligatured.  However, a standard ligature isn&rsquo;t enough because de appears in many words.  So I was going to do a contextual substitution to make sure I only nab DE as a single word.</p>
<p>BUT, this is of course unacceptable in most other languages.  So here&rsquo;s my solution, and just wondering if I&rsquo;m approaching it properly or if there is a more efficient way.  (I&rsquo;m using FontForge so I&rsquo;ll use psuedo code)</p>
<p>1: If language is &ldquo;es&rdquo;, switch &ldquo;D&rdquo; with &ldquo;D.es&rdquo;
2: If language is &ldquo;es&rdquo;, switch &ldquo;E&rdquo; with &ldquo;E.es&rdquo;
3: If sequence &ldquo;[any letter] D.es E.es&rdquo; found, match and do nothing
4: If sequence &ldquo;D.es E.es [any letter]&rdquo; found, match do nothing
5: If sequence &ldquo;D.es E.es&rdquo; found, replace with D_E</p>
<p>This requires making an extra glyph that is identical to a normal D and that in a Spanish document would be constantly being replaced.  I&rsquo;m not sure if that in and of itself might cause concern as well.</p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>House Industries did a whole language specific contextual sub thing with their new script Sable. It has local versions of some of the diacritic marks.</p>
<p><a href="http://www.houseind.com/index.php?page=showfont&amp;id=665&amp;subpage=studio_how_lang">http://www.houseind.com/index.php?page=showfont&amp;id=665&amp;subpage=studio_how_lang</a></p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2008-12-06 03:34:18"
			itemprop="datePublished"
		>
			2008-12-06 03:34:18
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Stephen&#43;Rapp">
            Stephen Rapp
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Seems like this is something for locl or salt or ss1 (stylistic sets) or a combo:
(taking a stab as I&rsquo;m trying to improve my OT mind)</p>
<p>@UC = uppercase;</p>
<p>feature locl { # Localized Forms
language ESP exclude_dflt; # Spanish;
sub @UC D' E @UC by D.es; #D.es is a duplicate D marker glyph
sub D E by D_E;
} locl;</p>
<p>feature salt { # Spanish DE ligature
sub @UC D' E @UC by D.es; #D.es is a duplicate D marker glyph
sub D E by D_E;
} ss1;</p>
<p>feature ss1 { # Spanish DE ligature
sub @UC D' E @UC by D.es; #D.es is a duplicate D marker glyph
sub D E by D_E;
} ss1;</p>
<p>This could well be garbage :-) but it&rsquo;s what I&rsquo;d try.
Whoops that&rsquo;s fontlab, not fontforge.</p>
<p>It&rsquo;d be nice to get rid of both marker glyphs, not just one. The only other way I figured required an illegal one to many substitution. You could try to define when you do want the sub, not when you don&rsquo;t, but it&rsquo;s trickier.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2008-12-06 07:34:15"
			itemprop="datePublished"
		>
			2008-12-06 07:34:15
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Randy">
            Randy
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I don&rsquo;t think the glyphs D.es and E.es are necessary. I believe it can be done in one shot. The FDK syntax should be something like this:
<code>
languagesystem latn dflt;
languagesystem latn ESP;</p>
<p>@ALL_LETTERS = [A-Z a-z];</p>
<p>feature liga {
script latn;
language ESP;
ignore sub @ALL_LETTERS D' E';
ignore sub D' E' @ALL_LETTERS;
sub D' E' by D_E;
} liga;
</code></p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2008-12-06 07:54:17"
			itemprop="datePublished"
		>
			2008-12-06 07:54:17
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Miguel&#43;Sousa">
            Miguel Sousa
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Hi Miguel,</p>
<p>Thank you! I didn&rsquo;t know about &ldquo;ignore sub&rdquo; .. that will be handy!</p>
<p>Side questions:</p>
<ol>
<li>Is languagesystem toggled by the Language dropdown in the character palette of InD CS2?</li>
<li>Is that the prefered way to do things like polish diacritics in apps without locl support, or stylistic sets?</li>
<li>Can it be done in Fontlab&rsquo;s opentype editor or just FDK?</li>
<li>In your liga feature how do you signal the end of ESP specific subs, say if you wanted to add french specific subs or the aforementioned polish diacritics?</li>
</ol>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2008-12-06 22:08:15"
			itemprop="datePublished"
		>
			2008-12-06 22:08:15
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Randy">
            Randy
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Hey Randy,</p>
<ol>
<li>
<p>Yes, it is toggled by the Language dropdown in the character palette, but it will only work in InDesign CS3 and up. Photoshop CS4 and Illustrator CS4 support it as well.</p>
</li>
<li>
<p>If the app does not have support for language-specific lookups, things won&rsquo;t work. For example, Adobe has been putting language-specific code in its fonts (e.g. Turkish) for quite some time, but only with InDesign CS3 we&rsquo;ve started seeing the results of that code.</p>
</li>
<li>
<p>You&rsquo;ll be able to compile the features and see the results in Fontlab, but you should also include the line <code>languagesystem DFLT dflt;</code> in the features. However, the current Fontlab 5 will throw an error message because of that. You&rsquo;ll have no problems if you use the FDK.</p>
</li>
<li>
<p>The end of ESP would be signaled by the end of the feature, the start of another language, or the start of another script. Matthew&rsquo;s case had to do with a language-specific ligature, so the best way to do it is through &lsquo;liga&rsquo;. In the case of Polish diacritics I&rsquo;d say &lsquo;locl&rsquo; is more appropriate. In the case of French, it depends on what you&rsquo;re trying to do. Below is some code for language-specific ligatures and diacritics.</p>
</li>
</ol>
<code>
languagesystem DFLT dflt;
languagesystem latn dflt;
languagesystem latn ESP;
languagesystem latn FRA;
languagesystem latn PLK;
<p>feature locl {
script latn;
language FRA;
sub eacute by eacute.FRA;</p>
<p>language PLK;
sub cacute by cacute.PLK;
} locl;</p>
<p>@ALL_LETTERS = [A-Z a-z];</p>
<p>feature liga {
script DFLT;
language dflt;
lookup LIGA {
sub f i by f_i;
} LIGA;</p>
<p>script latn;
language dflt;
lookup LIGA;</p>
<p>language PLK include_dflt;</p>
<p>language ESP include_dflt;
ignore sub @ALL_LETTERS D' E';
ignore sub D' E' @ALL_LETTERS;
sub D' E' by D_E;</p>
<p>language FRA include_dflt;
sub e t by e_t;
} liga;
</code></p>
<p>The code in &lsquo;locl&rsquo; is straightforward; glyphs are replaced by other glyphs depending on the language. The code in &lsquo;liga&rsquo; is a little more tricky because there are ligatures that you&rsquo;ll want to have for all the languages and/or scripts in addition to the language-specific ones. In this case, all Latin languages (including ESP, FRA and PLK) will have the &lsquo;f_i&rsquo; ligature. In addition, the &lsquo;D_E&rsquo; ligature will be available to Spanish, and the &lsquo;e_t&rsquo; ligature will be available to French.</p>
<p>I could have been more concise with the &lsquo;liga&rsquo; code but when it comes to coding language-specific behavior I like to be as explicit as I can to avoid unexpected behaviors. For example, the keyword &lsquo;include_dflt&rsquo; could be omitted (because the lookups under &lsquo;language dflt;&rsquo; are inherited by default by other languages within the same script). However, &lsquo;language PLK;&rsquo; needs to be included in &lsquo;liga&rsquo; otherwise &lsquo;f_i&rsquo; will NOT be available for Polish.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2008-12-06 23:32:38"
			itemprop="datePublished"
		>
			2008-12-06 23:32:38
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Miguel&#43;Sousa">
            Miguel Sousa
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Thanks for your comprehensive reply. Next up: FDK bootcamp for me.</p>
<p>Randy</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2008-12-08 07:52:06"
			itemprop="datePublished"
		>
			2008-12-08 07:52:06
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Randy">
            Randy
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
