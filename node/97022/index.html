<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>What does a subtable in GSUB exactly represent? | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="What does a subtable in GSUB exactly represent?" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/97022/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2012-10-08T18:06:44+00:00" />
<meta property="article:modified_time" content="2012-10-08T18:06:44+00:00" />

<meta itemprop="name" content="What does a subtable in GSUB exactly represent?">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2012-10-08T18:06:44+00:00" />
<meta itemprop="dateModified" content="2012-10-08T18:06:44+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="What does a subtable in GSUB exactly represent?"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">What does a subtable in GSUB exactly represent?</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2012-10-08T18:06:44Z">October 8, 2012</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">LexLuengas</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">For which reason and when are 'subtables' created? Adobe's <em>OpenType Feature File Specification</em> does not help me any further understanding the structure of GPOS/GSUB.</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">The first match in a subtable is processed, then the rest of this subtable is skipped.
.. can't find a good example right now ..</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-10-08 18:17:27"
			itemprop="datePublished"
		>
			2012-10-08 18:17:27
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Theunis de Jong</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Really? Nothing? Is it a more complicated question, or does in fact no one have the faintest idea? :'-(</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-10-10 11:54:47"
			itemprop="datePublished"
		>
			2012-10-10 11:54:47
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>LexLuengas</span
			></span
		>
	</div>
	 <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><blockquote>Really? Nothing?</blockquote>
Uh, you got an answer, dintya?

Anyway, here is the promised example: 'frac' -- based on Tal Leming's <a href="http://talleming.com/2008/04/16/fraction-fever/">Fraction Fever</a> discussion.

feature frac {
    sub @figures slash' @figures by fraction;
    sub @figures' fraction by @numerators;
}

The class '@figures' contains 'zero one two .. nine', and the first line will replace a simple default slash, preceded by a figure, with a proper 'fraction' slash. After that, individual figures should be replaced with superior/inferior forms, to create proper fractions.
It will work as expected if you manually inserted a fraction slash (and the first line will not be used). However, because all sub-tables are terminated a.s.a.p., this code will stop if the first line was executed! So in this case you have to force a sub-table below the first line to make sure the second line is evaluated as well.

Tal Leming's code doesn't specifically mention a sub-table, but I think standard behavior for feature compilers is to automatically create them when deemed necessary. In my example, the first line contains a 'fraction' on the <em>right</em> side of a substitution (target) and the second line on the <em>left</em> side (source), so to be able to process both rules, the compiler creates a sub-table at the second line.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-10-10 13:37:24"
			itemprop="datePublished"
		>
			2012-10-10 13:37:24
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Theunis de Jong</span
			></span
		>
	</div>
	
</div>
 
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Unfortunately I do not have first hand knowledge of GSUB tables, but you may find these links useful:

The [[http://www.microsoft.com/typography/tt/win95tt.aspx|Microsoft Typography overview of TrueType in Windows 95]] includes the following:

<dl><cite>The GSUB and GPOS tables define glyph substitution and positioning features. GSUB supplies five types of substitutions to support different kinds of character-to-glyph mappings, such as many-to-one ligature glyph substitution and one-to-many ligature decomposition.</cite></dl>

You may also find the information on the FontForge site useful:

http://fontforge.org/gposgsub.html

This also refers to the following page on Adobe's website:

http://partners.adobe.com/public/developer/opentype/index_table_formats1.html</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-10-10 12:25:51"
			itemprop="datePublished"
		>
			2012-10-10 12:25:51
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Karl Stange</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Another application is the 'ignore' rule, which is not really a feature file keyword. It works like this: every "ignore" rule and its "when not ignored" counterpart appear in a sub-table of their own.

ignore [a e m n r u]' [ @alpha ];
subst [a e m n r u]' by [a.end e.end m.end n.end r.end u.en];

This is meant to replace 'a', 'e', etc. with a swashed 'end' form, but of course <em>not</em> if another alphabetic character follows. So the first line is internally compiled to

subst  [a e m n r u]' [ @alpha ] by [a e m n r u];

(i.e., it does "nothing"), and if this line <em>gets executed</em>, the next line is skipped. This particular sub-table must end after the next line, because there might be other lines that should be evaluated for the rest of the characters.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-10-10 13:47:50"
			itemprop="datePublished"
		>
			2012-10-10 13:47:50
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Theunis de Jong</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thank's Karl and Theunis, that were the elaborate answers I was hoping for!

<blockquote>subst [a e m n r u]' [ @alpha ] by [a e m n r u];
(i.e., it does "nothing")</blockquote>
This is really enlightening. I've been using the ‘ignore’ keyword a few times and wasn't able to deduce such an evident fact.

<blockquote>(...) standard behavior for (feature) compilers is to automatically create them when deemed necessary.</blockquote>
I realize my problems to understand OpenType's syntax mostly arise from the fact that the compiler generates subtables behind the scenes.

Another issue is that the ‘subtable’ command is only supported for class kerning, so one must set up an entirely new lookup to avoid line ‘skipping’. I wonder why it hasn't been implemented yet...

One thing that has clarified many of my doubts, re-reading Adobe's <em>OpenType Feature File Specification</em>, is the following part about chaining contextual substitution:
<blockquote>The entire sequence of glyphs – prefix plus input plus suffix – must match in the current context for the rule to be applied. The match sequence is aligned to the current context by aligning the first glyph of the input sequence with the current glyph of the text being processed. If the rule is matched, then the current context moves the current glyph pointer ahead in the original text <em>by the length of the input sequence</em>. Note that in the FDK syntax, the entire context string (backtrack sequence + input sequence + look-ahead sequence) are all written in the text string order. This is worth emphasis, as inside the lookup rule, <em>the glyphs of the backtrack sequence are written in reverse order from the text to be matched.</em> </blockquote>

I've emphasized the mind-blowing parts.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-10-10 17:53:43"
			itemprop="datePublished"
		>
			2012-10-10 17:53:43
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>LexLuengas</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Possible further mind blowing-yet-enlightening may occur if you inspect a few ligature sets. I'd have to go through my font library to find a good example, but I think the text you copied from the specs also apply to sequences of "ff", "ffi", and "ffl" ligatures -- i.e., put them in the wrong order and/or without subtables, and some combo's will not work.
Perhaps one of the OT-savvy techies can recall an appropriate thread from the past where one has to resort to manually inserting a 'subtable' clause in a GSUB feature.

A propos: I am <em>assuming</em> OTF compilers automatically generate subtables for GSUB features, because I can't find a concrete reference to them as well (or these references are very oblique), and the fonts I have are positively brimming with them.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-10-10 18:08:49"
			itemprop="datePublished"
		>
			2012-10-10 18:08:49
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Theunis de Jong</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
