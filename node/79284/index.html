<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Combining diacritical offsets | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Combining diacritical offsets" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/79284/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2011-02-21T06:31:59+00:00" />
<meta property="article:modified_time" content="2011-02-21T06:31:59+00:00" />

<meta itemprop="name" content="Combining diacritical offsets">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2011-02-21T06:31:59+00:00" />
<meta itemprop="dateModified" content="2011-02-21T06:31:59+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Combining diacritical offsets"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Combining diacritical offsets</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2011-02-21T06:31:59Z">February 21, 2011</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Ray Larabie</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">When designing zero width combining diacriticals, how should I determine how far to the left they should be placed?</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I use John Hudson's method and it seems to get the desired effect:

1. Design the spacing diacritic mark on the width of the lowercase o.

2. For the combining diacritic mark use the spacing mark, then drag the left sidebearing onto the right.

The result is a combining mark that will give good position over a preceding a, e or u -- and perfect position over the o.
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-02-21 07:29:05"
			itemprop="datePublished"
		>
			2011-02-21 07:29:05
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Seymour Caprice</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I hope I wasn't far off: I was setting the left "neighbor" in FontLab as an o and aligning to that. (checks)  Yup, same result.

I don't have much experience using combining diacriticals. When a font is used, how does that resulting accent end up in the correct spot over both a dotless i, capital W etc?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-02-21 08:46:14"
			itemprop="datePublished"
		>
			2011-02-21 08:46:14
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Ray Larabie</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">What happens to below diacriticals in italics? Should I offset them as if they were under an italic o, in which case the below accents end up a bit further to the left or should they align with their upper counterparts. For example: uni030A (ring comb) vs. uni0325 (ring below comb)</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-02-21 09:19:48"
			itemprop="datePublished"
		>
			2011-02-21 09:19:48
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Ray Larabie</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">There is no <em>perfect</em> way, and (hopefully) people working with your zero-width diacritics are aware of that. Unless you make your font monospaced, of course! ;-)

Theoretically, lower diacritics in italics should be offset a bit to the left, just as the upper ones should be offset to the right. I use something like an old-style 'phi' character -- an 'o' with a slighly slanted vertical line through it -- to visually align diacritics. But that's only going to look perfectly on the o's, slightly less so on a, e, g, n, and u, and like crap on an i, f, m or w; it's the same here as with the roman accents, only angled slightly.

Theoretically (again), you should use the Opentype "mark" and "mkmk" features, which are designed <em>exactly</em> to deal with this; but I find programming them incredibly difficult, and the output software I use (Adobe InDesign) still doesn't support these features to the level I need it to.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-02-21 13:27:27"
			itemprop="datePublished"
		>
			2011-02-21 13:27:27
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Theunis de Jong</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">As for this:

<cite>When a font is used, how does that resulting accent end up in the correct spot over both a dotless i, capital W etc?</cite>

these are the worst case scenarios, so I made them as precomposed characters with "the usual accents" and used "rlig" to look them up (I think nowadays I'd probably use "ccmp"; only on principal grounds, 'cause I don't think it really makes that much a difference).</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-02-21 13:33:05"
			itemprop="datePublished"
		>
			2011-02-21 13:33:05
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Theunis de Jong</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Ray,

I do what Theunis does, except I always make up a precomposed character (and use ccmp). Remember to name the precomposed character with base names -- the *i* rather than the *dotlessi*. So, for example, an i with a macron and acute could be named uni012B0301, or uni006903040301. There would be no Unicode index assigned.

The two possible names brings up one weakness in the system. AFAIK, there is no Unicode requirement to use one or the other. Since you never know what the user will do, safest is to have, in the ccmp

sub i uni0304 by uni012B
sub uni012B uni0301 by uni012B0301

(and remember that in FontLab, for example, uni0301 might be named "acutecomb", in which case the second item would be *sub uni012B acutecomb by uni012B0301*)

which covers the two ways a user could enter the character. If you have a lot of these though, writing the ccmp feature can get pretty complex. See, for example, the ccmp for SIL's Charis.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-02-21 15:14:14"
			itemprop="datePublished"
		>
			2011-02-21 15:14:14
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>charles ellertson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I usually make precomposed glyphs for ones in Unicode and use 'mark' feature for the rest, no one complained about 'mark' so far, but fortunately FontForge makes it dead simple to build precomposed glyphs based on already in place 'mark' anchors so it shouldn't be hard to support 'ccmp' scenario if requested.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-02-21 15:45:58"
			itemprop="datePublished"
		>
			2011-02-21 15:45:58
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Khaled Hosny</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Firstly I was using precomposed glyphs, but this causes very large fonts if you plan a wide language support and includes small caps (or, even worse, also petite caps and swashes). So I changed my procedure to this:

<strong>1</strong>. I added all precomposed base+diacritic coded in Unicode according to the language support.

<strong>2</strong>. Troublesome combinations, although unencoded, are also added as precomposed glyphs to produce proper design. 

For example: open E with ogonek has no codepoint in Unicode. But the ogonek connection is hardly good when associating base open E with the 'generic' ogonek, so I made a precomposed glyph ([[http://www.typophile.com/node/67787|sample]]). The same with overlines and underlines, which length may coincide with base letter width. This is not possible combining 'generic' over/underlines with base glyphs and thus I added these as precomposed.

Other tricky diacritics include slash, cedilla, horn and hook.

<strong>3</strong>. Remaining combinations will be done with mark/mkmk features and some contextual kerning (which can be set in the mark/mkmk code). As this feature is not supported by FontLab 5, it need to be made with other tool (as Khaled does) or you wait for FL6.

Typical candidates for contextual kerning are base letters narrower than diacritics, as |f|i|j|l|r|t|.

<strong>4</strong>. Further improvement can be done with variations in combining diacritical marks: different glyphs for uppercase and lowercase use, for over and below positions and also for stacked diacritics (for example: dieresis and circumflex would be combined in a precomposed glyph where their design is changed to get better result).</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-02-21 17:15:27"
			itemprop="datePublished"
		>
			2011-02-21 17:15:27
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Igor Freiberger</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Charles, on your example (i + macron, zw acute):

<cite>.. . Since you never know what the user will do, safest is to have, in the ccmp

sub i uni0304 by uni012B
sub uni012B uni0301 by uni012B0301</cite>

I'd have to have my OT code in front to check, but wasn't it possible with <code>ccmp</code> to first <em>decode</em> an i_macron glyph first into a 'loose' i and macron, then <em>recode</em> them again as <code>i macron acute</code> to get your singular glyph "i with macron and acute"?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-02-21 20:16:38"
			itemprop="datePublished"
		>
			2011-02-21 20:16:38
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Theunis de Jong</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Theunis,

As I remember, you can't sub many from one in OT features. But even if you could, you would loose your imacron -- Unless you meant to break it apart, do all you combining with other accents, then rebuild it -- which would be just as much work.

At our shop, we solve the issue by running a script on an incoming manuscript, so every Unicode character with a codepoint is so encoded, even if the author used combining accents in the manuscript. That means I know imacron is already a single character. But a customer using a script isn't something a font designer can count on . . . </div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-02-21 22:03:15"
			itemprop="datePublished"
		>
			2011-02-21 22:03:15
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>charles ellertson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thanks, everyone. It's all very helpful.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-02-22 01:40:09"
			itemprop="datePublished"
		>
			2011-02-22 01:40:09
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Ray Larabie</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
