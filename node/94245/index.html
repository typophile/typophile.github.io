<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>The &#34;name&#34; OpenType table for the &#34;Cambria Math&#34; font doesn&#39;t have the encodingID = 10 for the Windows platform. Is this a bug ? | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="The &#34;name&#34; OpenType table for the &#34;Cambria Math&#34; font doesn&#39;t have the encodingID = 10 for the Windows platform. Is this a bug ?" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/94245/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2012-06-26T16:14:44+00:00" />
<meta property="article:modified_time" content="2012-06-26T16:14:44+00:00" />

<meta itemprop="name" content="The &#34;name&#34; OpenType table for the &#34;Cambria Math&#34; font doesn&#39;t have the encodingID = 10 for the Windows platform. Is this a bug ?">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2012-06-26T16:14:44+00:00" />
<meta itemprop="dateModified" content="2012-06-26T16:14:44+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="The &#34;name&#34; OpenType table for the &#34;Cambria Math&#34; font doesn&#39;t have the encodingID = 10 for the Windows platform. Is this a bug ?"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">The "name" OpenType table for the "Cambria Math" font doesn't have the encodingID = 10 for the Windows platform. Is this a bug ?</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2012-06-26T16:14:44Z">June 26, 2012</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Belloc">
            Belloc
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>In the figure below, you&rsquo;ll see a screen shot of two windows showing the Open Type &ldquo;name&rdquo; tables for the &ldquo;MS Mincho&rdquo; and the &ldquo;Cambria Math&rdquo; MS fonts.</p>
<p>If you consider the platformID = 3 (Windows fonts) on both results, you&rsquo;ll see that the &ldquo;MS Mincho&rdquo; font shows correctly, names for the encodingID = 1 (Unicode BMP UCS-2) and 10 (Unicode UCS-4). But the &ldquo;Cambria Math&rdquo; font only shows encodingID = 1. It doesn&rsquo;t show the encodingID = 10 names. I know for sure the &ldquo;Cambria Math&rdquo; font has both encodings. Is this a bug ?</p>
<p>![](/images/old-images/nameCambria Math_5137.png)</p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>How do you know &ldquo;for sure&rdquo; Cambria Math has Encoding 10 names? I can&rsquo;t see those in the version I have.</p>
<p>Perhaps it&rsquo;s not necessary for a font to contain enc.10 names even if it <em>does</em> contain an encoding 10 in the cmap. Of that, the specs say</p>
<blockquote>... If the font is meant to support supplementary Unicode characters, it will additionally need a Format 12 subtable with a platform encoding ID 10. ...</blockquote>
<p>&hellip; and these supplementary characters are typical for a CJK font but not for a math font. Hold on, I&rsquo;m going to check what cmap encodings are in Cambria Math.</p>
<p>(Edit) Okay, Cambria Math also contains a 3/10 encoding, so that&rsquo;s not the reason.</p>
<p>Well, I cannot recall from the specs that says every cmap encoding needs to have a corresponding name entry.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-06-27 21:22:28"
			itemprop="datePublished"
		>
			2012-06-27 21:22:28
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Theunis&#43;de&#43;Jong">
            Theunis de Jong
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>No, this isn&rsquo;t a bug. My understanding is that the font would only require an encodingID 10 name table if one or more name entries required use of supplementary plane Unicode characters and hence a format 12 subtable. The different encoding options for the name table cover the encoding needs of the name table entries, which are independent of the cmap subtables that cover the encoding needs of text set in the font. So in the case of a font like Cambria Math, the character set of the font includes supplementary plane characters (hence, cmap format 12 subtable (it also has a format 14 subtable, the first I&rsquo;ve had to make)) but the name table entries do not make use of any of these characters.</p>
<p>Or am I misunderstanding your question?</p>
<p>PS. What tool are you using to examine the table entries? Are you able to look within a TTC, or are you breaking the Cambria TTC apart somehow?</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-06-27 22:07:40"
			itemprop="datePublished"
		>
			2012-06-27 22:07:40
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><blockquote>The different encoding options for the name table cover the encoding needs of the name table entries, which are independent of the cmap subtables that cover the encoding needs of text set in the font.</blockquote>
<p>John, does that mean that the Encoding 10 name entry in MS Mincho actually contains these supplementary characters?</p>
<blockquote>PS. What tool are you using to examine the table entries? Are you able to look within a TTC, or are you breaking the Cambria TTC apart somehow?</blockquote>
<p>I don&rsquo;t recognize the output format of Belloc&rsquo;s tool. Me, I used my own homegrown tool &ndash; I needed it for Something Completely Different ;-)</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-06-27 22:23:35"
			itemprop="datePublished"
		>
			2012-06-27 22:23:35
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Theunis&#43;de&#43;Jong">
            Theunis de Jong
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>John Hudson and Theunis de Jong,</p>
<p>First let me thank both of you for your replies.</p>
<p>@John Hudson</p>
<blockquote>
<blockquote>
<p>No, this isn&rsquo;t a bug. My understanding is that the font would only require an encodingID 10 name table if one or more name entries required use of supplementary plane Unicode characters and hence a format 12 subtable. The different encoding options for the name table cover the encoding needs of the name table entries, which are independent of the cmap subtables that cover the encoding needs of text set in the font. &laquo;</p>
</blockquote>
</blockquote>
<p>I have to disagree with you on this John. Take for example the fonts &ldquo;MT Extra&rdquo; and &ldquo;Symbol&rdquo;. These are symbol fonts as you probably know, and so, none of their &ldquo;characters&rdquo; will ever be present in the <cite>name</cite> table. Nevertheless, the encodingID = 0 is the only one present in this table for both fonts, for all platforms. Also, if you consider the fonts that have Unicode points above 0xFFFF, all of them, as far as I know, have encodingID = 10 present in their <cite>name</cite> tables for the Windows platform, with the exception of the &ldquo;Cambria Math&rdquo; font. My feeling is that this a bug, although a minor one, as you really don&rsquo;t need this information in the <cite>name</cite> table.</p>
<blockquote>
<blockquote>
<p>PS. What tool are you using to examine the table entries? Are you able to look within a TTC, or are you breaking the Cambria TTC apart somehow? &laquo;</p>
</blockquote>
</blockquote>
<p>I have developed a small C++ program to parse this <cite>name</cite> table for any font specified by the user.</p>
<p>@Theunis de Jong</p>
<blockquote>
<blockquote>
<p>John, does that mean that the Encoding 10 name entry in MS Mincho actually contains these supplementary characters? &laquo;</p>
</blockquote>
</blockquote>
<p>If you look at the names for the MS Mincho font on the screen shot above, you&rsquo;ll notice that there are characters that were printed as invalid. I presume those characters correspond to this encoding in the MS Mincho font. But there is one thing here I didn&rsquo;t understand : I used the font Arial to print the reports shown on those windows. As far as I can understand, the function TextOut() that I used to print those lines, should print the correct japanese characters, by just using the font fallback mechanism present in the Windows API. But apparently, that didn&rsquo;t happen ! Why ?</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-06-27 23:28:54"
			itemprop="datePublished"
		>
			2012-06-27 23:28:54
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Belloc">
            Belloc
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p><em>Also, if you consider the fonts that have Unicode points above 0xFFFF, all of them, as far as I know, have encodingID = 10 present in their name tables for the Windows platform, with the exception of the &ldquo;Cambria Math&rdquo; font. My feeling is that this a bug, although a minor one, as you really don&rsquo;t need this information in the name table.</em></p>
<p>I classify bugs as things that are contrary to the spec and/or produce unwanted behaviour. To my knowledge, neither is the case here. If it is so that other fonts containing supplementary plane coverage in their cmap tables also provide encodingID 10 name table encoding, I&rsquo;m much more inclined to see this as unnecessary bytes in those fonts than as bug in Cambria Math.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-06-28 01:48:16"
			itemprop="datePublished"
		>
			2012-06-28 01:48:16
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>You may be right. After thinking a little bit more about what you said (&ldquo;My understanding is that the font would only require an encodingID 10 name table if one or more name entries required use of supplementary plane Unicode characters and hence a format 12 subtable&rdquo;), I have to agree that this is more reasonable. But then, how do you justify the encodingID = 0 for the MT Extra and Symbol fonts ?</p>
<p>There is one other thing that surprised me in relation to the  &ldquo;msmincho.ttc&rdquo;, the TTC font file for the MS Mincho font. The TTC header present in this file is as follows :</p>
<p>TTC Tag               ttcf
version                 0001 0000
numFonts            0002
OffsetTables[0]    0000 0020 [1]     0000 018C
ulDsigTag            DSIG
ulDsigLength      0000 1B98
ulDsigOffset        0099 59FC</p>
<p>From this [[http://www.microsoft.com/typography/otspec/otff.htm|Open Type spec]] you&rsquo;ll find this assertion : &ldquo;There are two versions of the TTC Header: Version 1.0 has been used for TTC files without digital signatures. Version 2.0 can be used for TTC files with or without digital signatures &ndash; if there&rsquo;s no signature, then the last three fields of the version 2.0 header are left null.&rdquo;</p>
<p>Shouldn&rsquo;t then the version number for this font collection be 0002 0000, instead of 0001 0000 ?</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-06-28 19:27:58"
			itemprop="datePublished"
		>
			2012-06-28 19:27:58
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Belloc">
            Belloc
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p><em>But then, how do you justify the encodingID = 0 for the MT Extra and Symbol fonts ?</em></p>
<p>I don&rsquo;t justify anything that was ever done in a symbol font made by anyone. It looks, based on your description of these and other fonts, as if either Monotype or Microsoft may at one time have had a policy to include a name table encodingID to match cmap coverage, regardless of whether this was actually needed in the name table entries.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-06-28 20:11:35"
			itemprop="datePublished"
		>
			2012-06-28 20:11:35
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
