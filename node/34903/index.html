<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Embedded bitmaps in TTF in Windows | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Embedded bitmaps in TTF in Windows" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/34903/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2007-07-05T10:28:58+00:00" />
<meta property="article:modified_time" content="2007-07-05T10:28:58+00:00" />

<meta itemprop="name" content="Embedded bitmaps in TTF in Windows">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2007-07-05T10:28:58+00:00" />
<meta itemprop="dateModified" content="2007-07-05T10:28:58+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Embedded bitmaps in TTF in Windows"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Embedded bitmaps in TTF in Windows</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2007-07-05T10:28:58Z">July 5, 2007</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">peter bilak</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">Hello. I am planning to embed bitmaps in one of our fonts to improve on screen appearance in very small sizes. However I am wondering how TTF fonts with embedded bitmaps behave now in Windows XP and Windows Vista. Does it depend on the Settings of Windows whether or not the applications honour the embedded bitmap table of the TTF font? 

Does anyone have experience in which circumstances the bitmaps will show in the specific ppem sizes, and when the Windows rasterizer show the rasterized outlined instead?  How can one make sure the bitmaps are used, when the outlines are present in the font as well? 

Thanks, Peter</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Hi Peter, 

You might want to drop Vinnie Connare or Tom Rickner a note as they've some experience here. Also you could experiment with Calibri and Cambria (shipping versions) as they contain embedded bitmaps at key sizes - these were inserted to improve rendering when CT and regular antialaising were turned off, or under certain terminal server settings. 

Cheers, Si </div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-05 14:45:44"
			itemprop="datePublished"
		>
			2007-07-05 14:45:44
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Si_Daniels</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Peter, my old Arasan* still works as it did under Windows 98,
so you're safe on Windows-XP. I don't know about OSX though...

* http://www.themicrofoundry.com/f_arasan.html

The bitmaps will show if they're there for the given character at the given PPEM. I'm not sure about how the OS settings affect the selection of the bitmaps - I can test on XP if you like (or I can send you Arasan for you to test yourself). I'm also not sure about how Unicode and/or OT fonts play into this. Are you doing anything like that?

> Calibri and Cambria .... contain embedded bitmaps at key sizes

!!
Nice. So it still works on Vista too. Thank you, MS.

Hmmm, Simon, what would it take to embed <em>grayscale</em> bitmaps
into a CT font? Anybody done this with Bitfonter, or "manually"?

hhp
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-05 16:28:09"
			itemprop="datePublished"
		>
			2007-07-05 16:28:09
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>hrant</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">>Hmmm, Simon, what would it take to embed grayscale bitmaps
into a CT font?

I'll ask Greg. </div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-06 05:02:46"
			itemprop="datePublished"
		>
			2007-07-06 05:02:46
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Si_Daniels</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thanks!
But wait, what I really meant was: what would
it take to embed <em>deep color</em> bitmaps into a CT font...

hhp
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-06 05:17:03"
			itemprop="datePublished"
		>
			2007-07-06 05:17:03
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>hrant</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thanks Si.
It is quite surprising how NOT documented is the bitmap embedding in TTF, and its use in Windows. I suppose it calls for a comparative study to see which applications and systems honour the embedded bitmap tables and which not.

In the meantime , I wrote to Tom Rickner, and I am awaiting his response.
cheers, P</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-06 09:15:22"
			itemprop="datePublished"
		>
			2007-07-06 09:15:22
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>peter bilak</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">My experiences show that embedded bitmaps work in Windows only when ClearType is OFF. If it is on, the embedded bitmaps are not shown. This is, of course, something we could expect because ClearType does not use full pixels but instead does subpixel rendering. Especially with subpixel (fractional) glyph positioning (where the origins of the glyphs are also positioned on subpixels, showing embedded bitmaps would be very odd). 

A.
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-07 00:43:23"
			itemprop="datePublished"
		>
			2007-07-07 00:43:23
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>twardoch</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">But if embedded bitmaps can be in color (and I think they can) then...

hhp
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-07 00:59:40"
			itemprop="datePublished"
		>
			2007-07-07 00:59:40
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>hrant</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Hrant, 

it's not the point. The point is that when ClearType renders fonts on fractional widths, then the glyph origin may fall on the R, the G or the B subpixel. So then, assuming (in a simplified way) that the left stem of a glyph will be only two subpixels thick, it will be then rendered on the RG, GB or BR subpixels. In other words, the same character in one line of text may be rendered differently if it occurs several times. 

There is no way that this can be done with bitmape, even if they have fixed colors. In theory, for a bitmap-only font, ClearType could be smart and render such font on integer widths only -- but the problem arises if, say, only 1/4 of the glyphs have bitmaps. This is a case the rasterizer would have to consider -- but mixing embedded bitmaps on integer widths and outline glyphs on fractional glyphs would be difficult to implement and I doubt it would yield any good results. 

The recent incarnations of ClearType do show great potential. The rendering is quite good and more legible than the Windows 2000/XP grayscaling (but then, the Windows 2000/XP grayscaling is horrible -- Mac OS X shows that pure grayscaling can still yield good results). 

However, I feel that the implementation of ClearType has gone in the wrong way when it comes to how a font can opt in or out to certain treatment. Microsoft should have extended the gasp table in a clear, readable way so that a font could choose what and when to use: embedded bitmaps, delta hinting, grayscaling, subpixel glyph rendering, fractional/integer widths. The ClearType rasterizer could still apply its defaults to fonts that don't have any of it specified, but for newer fonts for which the developer specifically tuned some settings, there should be a clear way to tell ClearType: "Here, I want pure black-and-white delta-hinted outlines for this one" or "I want embedded bitmaps". 

A.


</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-07 15:54:09"
			itemprop="datePublished"
		>
			2007-07-07 15:54:09
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>twardoch</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">> when ClearType renders fonts on fractional widths, then the
> glyph origin may fall on the R, the G or the B subpixel.

Not if the font is designed well.
And the set-widths can be controlled with hinting.

> I feel that the implementation of ClearType has gone in the wrong way
> when it comes to how a font can opt in or out to certain treatment.

Agreed, and something I've been saying since the beginning.

hhp
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-07 16:23:02"
			itemprop="datePublished"
		>
			2007-07-07 16:23:02
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>hrant</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">After trying several things I can answer my original question. It seems is that embedded bitmaps in TTF font work ONLY when ClearType or Grayscale anti-aliasing is OFF. I couldn't make bitmaps show in situations when anti-aliasing was activated in Win 2000, XP or Vista. 

Peter</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-10 16:57:35"
			itemprop="datePublished"
		>
			2007-07-10 16:57:35
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>peter bilak</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">On my system CT does in fact negate embedded bitmaps, but anti-aliasing certainly does not. Maybe you should test Arasan, since it's been deployed all around the world for a decade and I have yet to hear a complaint that the bitmaps don't show up. Vista though might change that.  :-(

hhp
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-10 17:08:00"
			itemprop="datePublished"
		>
			2007-07-10 17:08:00
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>hrant</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">BTW, it's possible that embedding grayscale bitmaps (without necessarily
using any gray pixels) might help in some way, maybe even CT rendering.

hhp
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-10 18:02:22"
			itemprop="datePublished"
		>
			2007-07-10 18:02:22
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>hrant</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">One would expect that b/w bitmaps be used when antialiasing is switched off, and that grayscale bitmaps should be used when antialiasing is on. 

Have asked Greg if he can make a GS embedded bitmap font, but he seems to be a bit busy right now.

Would be interesting to make a hand-tuned bitmap font that would support some level of sub-pixel spacing. Obviously need to limit the number of iterations per character - maybe to 3 or 4.
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-12 14:31:15"
			itemprop="datePublished"
		>
			2007-07-12 14:31:15
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Si_Daniels</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">
"..but mixing embedded bitmaps on integer widths and outline glyphs on fractional glyphs would be difficult to implement and I doubt it would yield any good results."

...but Quartz has always...well nevermind, crystal clear must be a relative thing.

"Would be interesting to make a hand-tuned bitmap font that would support some level of sub-pixel spacing"

Contours Are Able to Do The Job! lol trust me. Geeeze, a candle for this fellow!?

Is it my imagination or is there an epidemic of users and designers seeking clarity in type on screens? this is three threads today, twelve or so this past two weeks of grids, and groans.

Cheers!</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-12 15:12:06"
			itemprop="datePublished"
		>
			2007-07-12 15:12:06
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>dberlow</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">> b/w bitmaps be used when antialiasing is switched off

No, the b&w bitmaps in Arasan show in either mode as long as CT is off.

> an epidemic of users and designers seeking clarity in type on screens?

I hope so - we need it!

hhp
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-12 15:16:05"
			itemprop="datePublished"
		>
			2007-07-12 15:16:05
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>hrant</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Peter, 

did you specify in the "gasp" settings that the font should not use antialiasing for the bitmap size? 

A.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-07-12 20:19:08"
			itemprop="datePublished"
		>
			2007-07-12 20:19:08
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>twardoch</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
