<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>proper implementation of numr and dnom OpenType features | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="proper implementation of numr and dnom OpenType features" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/32420/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2007-03-21T01:30:46+00:00" />
<meta property="article:modified_time" content="2007-03-21T01:30:46+00:00" />

<meta itemprop="name" content="proper implementation of numr and dnom OpenType features">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2007-03-21T01:30:46+00:00" />
<meta itemprop="dateModified" content="2007-03-21T01:30:46+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="proper implementation of numr and dnom OpenType features"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">proper implementation of numr and dnom OpenType features</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2007-03-21T01:30:46Z">March 21, 2007</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:ahleman">
            ahleman
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>Greetings. I can&rsquo;t seem to get the typophile search function to work, or I probably would have already found the answer to my question. It also doesn&rsquo;t appear to be in the Fontlab 4.6 manual.</p>
<p>Can anyone show me an example of proper implementation of the [[numr]] and [[dnom]] OpenType features? I can get the frac feature to do basic substitutions for the standard set of fractions, but it seems that the frac feature can call the numr and dnom features, but I haven&rsquo;t seen anywhere a specific example of how to make that work. I&rsquo;d be most grateful for some insight into that mysterious process.</p>
<p>Below is the code I&rsquo;m currently using to get the [[frac]] feature to work, in case it gives you some idea where I&rsquo;m at.</p>
<p>feature frac {
sub [one one.lnum] [slash fraction] [two two.lnum] by onehalf;
sub [one one.lnum] [slash fraction] [four four.lnum] by onequarter;
sub [one one.lnum] [slash fraction] [three three.lnum] by onethird;
sub [one one.lnum] [slash fraction] [eight eight.lnum] by oneeighth;
sub [two two.lnum] [slash fraction] [three three.lnum] by twothirds;
sub [three three.lnum] [slash fraction] [four four.lnum] by threequarters;
sub [three three.lnum] [slash fraction] [eight eight.lnum] by threeeighths;
sub [five five.lnum] [slash fraction] [eight eight.lnum] by fiveeighths;
sub [seven seven.lnum] [slash fraction] [eight eight.lnum] by seveneighths;
} frac;</p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Hi Andrew. I&rsquo;m a little confused by your message. I don&rsquo;t think you want to try to call &lsquo;numr&rsquo; and &lsquo;dnom&rsquo; with &lsquo;frac&rsquo; &ndash; at least for simple, prebuilt fractions like in your example. Your code seems fine for what you&rsquo;re trying to do.</p>
<p>It can be useful to &ldquo;call&rdquo; the &lsquo;numr&rsquo; feature in &lsquo;frac&rsquo; with arbitrary fractions. This is an example of what I mean:</p>
<p><code>feature frac {
lookup NUMR;<br>
sub [@SLASH @FIG_DENOMINATOR] @FIG_NUMERATOR' by @FIG_DENOMINATOR;
} frac;</code></p>
<p>The &lsquo;numr&rsquo; and &lsquo;dnom&rsquo; features are starting to look unnecessary, since there is usually little reason to create numerators or denominators without creating a whole fraction &ndash; which is what &lsquo;frac&rsquo; does all by itself. So I recommend putting &lsquo;numr&rsquo; and &lsquo;dnom&rsquo; in fonts, but not consider them components or &ldquo;sub-features&rdquo; of &lsquo;frac&rsquo;.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-03-22 06:01:56"
			itemprop="datePublished"
		>
			2007-03-22 06:01:56
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Christopher&#43;Slye">
            Christopher Slye
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p><em>but it seems that the frac feature can call the numr and dnom features</em></p>
<p>The official feature descriptions are a bit confusing in this regard. When Adobe first registered the frac, numr and dnom features, they had this idea that frac would &lsquo;call&rsquo; the other two features. And this combination of features would allow for arbitrary fractions. As I understand it, the idea was that the application or layout engine would perform the feature calls to the numr and dnom features, based on a character level analysis (numerals before the slash get the numr feature applied to them, numerals after the slash get the denominator feature applied to them). But no one had got around to implementing this in a layout engine by the time I came along with a scheme building arbitrary fractions contextually, directly within the frac feature. Which is what pretty much everyone has been doing ever since.</p>
<p>I believe Adobe make the arbitrary fraction code available with the FDK.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-03-23 06:55:19"
			itemprop="datePublished"
		>
			2007-03-23 06:55:19
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Doesn&rsquo;t Quark do it differently?
I haven&rsquo;t checked this recently, but I recall that in the demo of Quark 7, the fraction feature was ignored, and the fractions built on the fly from numr, fraction character, and dnom. At least that was my understanding, and I assumed it was done for backwards-compatability of older files.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-03-23 14:46:47"
			itemprop="datePublished"
		>
			2007-03-23 14:46:47
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Nick&#43;Shinn">
            Nick Shinn
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">The font I&rsquo;m working on has <code>frac</code> but not <code>numr</code> or  <code>dnom</code> and the fraction feature works fine in Quark 7.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-03-23 15:31:14"
			itemprop="datePublished"
		>
			2007-03-23 15:31:14
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Mark&#43;Simonson">
            Mark Simonson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>IMO, &ldquo;numr&rdquo; and &ldquo;dnom&rdquo; should implement simple subsitutions: digits by numerator figures in &ldquo;numr&rdquo; and digits by denominator figures in &ldquo;dnom&rdquo;. The &ldquo;frac&rdquo; feature can be implemented completely separately. It may or may not re-use some lookups that were also used in numr or dnom.</p>
<p>A.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-03-23 19:57:00"
			itemprop="datePublished"
		>
			2007-03-23 19:57:00
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:twardoch">
            twardoch
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>OK resurrecting yet another old thread&hellip;
I have the following:</p>
<code>
feature frac {
    sub zero' [slash fraction]' zero' zero' zero' by uni2031;
    sub zero' [slash fraction]' zero' zero' by perthousand;
    sub zero' [slash fraction]' zero' by percent;
    sub one' [slash fraction]' four' by onequarter;
    sub one' [slash fraction]' two' by onehalf;
    sub three' [slash fraction]' four' by threequarters;
<p>lookup numr0;
sub [slash @dnom] @numr' by @dnom;
} frac;
</code></p>
<p>But of course the lookup in the second section replaces all default numerals with numerators, so the substitutions above don&rsquo;t work to produce permille, perthousand, percent and the prebuilt fractions.</p>
<p>How can I ask the second part of code to ignore the prebuilt fractions? (I only know what I&rsquo;m learning here so there could be some vital command I don&rsquo;t know about.)</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-09-30 01:05:26"
			itemprop="datePublished"
		>
			2009-09-30 01:05:26
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:bendy">
            bendy
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Or maybe it&rsquo;s best to try and put the prebuilt fractions in a <code>liga</code> feature instead?</p>
<p>BTW the second half of the feature currently reads: <code>
lookup numr0;
sub [fraction @dnom] @numr' by @dnom;
sub @numr slash' by fraction;
} frac;
</code></p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-09-30 09:55:35"
			itemprop="datePublished"
		>
			2009-09-30 09:55:35
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:bendy">
            bendy
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Here&rsquo;s the code I use:</p>
<p><code>feature frac {
@numbers = [ zero one two three four five six seven eight nine ] ;
@numerators = [ zero.numr one.numr two.numr three.numr four.numr five.numr six.numr seven.numr eight.numr nine.numr ] ;
@denominators = [ zero.dnom one.dnom two.dnom three.dnom four.dnom five.dnom six.dnom seven.dnom eight.dnom nine.dnom ] ;
@predenominators = [ slash fraction onehalf onequarter threequarters 
zero.dnom one.dnom two.dnom three.dnom four.dnom five.dnom six.dnom seven.dnom eight.dnom nine.dnom ] ;</p>
<p>sub one' [slash fraction]' two' by onehalf ;
sub one' [slash fraction]' four' by onequarter ;
sub three' [slash fraction]' four' by threequarters ;</p>
<p>sub @numbers by @numerators ; 
sub @predenominators @numerators' by @denominators ; 
sub slash by fraction ;
} frac;
</code></p>
<p>If I recall, this was based somewhat on the code Adobe uses. I can&rsquo;t remember for sure.</p>
<p>Tal Lemming has a detailed discussion about frac feature strategy here:</p>
<p><a href="http://talleming.com/2008/04/16/fraction-fever/">http://talleming.com/2008/04/16/fraction-fever/</a></p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-09-30 15:01:59"
			itemprop="datePublished"
		>
			2009-09-30 15:01:59
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Mark&#43;Simonson">
            Mark Simonson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Elegant code. Thanks :)</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-09-30 15:20:44"
			itemprop="datePublished"
		>
			2009-09-30 15:20:44
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:bendy">
            bendy
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Mark your code works a dream. Thanks again.</p>
<p>Should the <code>percent</code> glyph be identical to a <code>zero.numr fraction zero.dnom</code> sequence? My percent is a bit lighter.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-09-30 17:57:11"
			itemprop="datePublished"
		>
			2009-09-30 17:57:11
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:bendy">
            bendy
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">It can be. In many fonts, the percent sign does not match the look of the fractions. Even if it does match, I don&rsquo;t think it needs to be included in the frac feature. If a user wants a percent sign, it&rsquo;s right there on the keyboard. I can&rsquo;t imagine someone going to the trouble to type zero slash zero, select it, and then apply the Fraction feature, just to get a percent sign. If they are using 0/0 as a fraction, that would be semantically different from the percent sign anyway, and the Fraction feature would still work on it just like any other arbitrary combination.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-09-30 18:31:32"
			itemprop="datePublished"
		>
			2009-09-30 18:31:32
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Mark&#43;Simonson">
            Mark Simonson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><blockquote>
<p>I can’t imagine someone going to the trouble to type zero slash zero, select it, and then apply the Fraction feature, just to get a percent sign.</p>
</blockquote>
<p>That is a good point. I was thinking it might be useful for the permille U+2031, but I guess that&rsquo;s so rare that it can be found on the glyph palette when needed. Will remove these ones.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-09-30 19:04:38"
			itemprop="datePublished"
		>
			2009-09-30 19:04:38
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:bendy">
            bendy
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Doesn&rsquo;t Tal&rsquo;s feature require a space in the search?</p>
<p>ChrisL</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-09-30 19:49:12"
			itemprop="datePublished"
		>
			2009-09-30 19:49:12
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:dezcom">
            dezcom
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Yes. Tal is trying to find a better method than the usual one (which mine generally follows). He admits his solution has some drawbacks and doesn&rsquo;t necessarily recommend it. Looks like it&rsquo;s still a work in progress.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-09-30 20:59:53"
			itemprop="datePublished"
		>
			2009-09-30 20:59:53
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Mark&#43;Simonson">
            Mark Simonson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Big thanks to Mr. Simonson for the code.  I&rsquo;ve been pondering how to most effectively code a fraction feature.  Your code&hellip; its a beautiful thing.  Again thanks.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-09-30 23:11:27"
			itemprop="datePublished"
		>
			2009-09-30 23:11:27
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:steve.mackley">
            steve.mackley
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>No problem. As I mentioned, I think I cribbed it partly from Adobe&rsquo;s code.</p>
<p>Note that if you have other pre-built fractions, you can add those in as well in the first section.</p>
<p>Also, Bendy, you mention the idea of using liga for the pre-built fractions. That would be a bad idea. Ligatures are usually on by default, so the fraction sequence would be converted indiscriminately. Thus, if the user typed &ldquo;9/11/2001&rdquo; they would get &ldquo;9/1½001&rdquo;. :-0</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-10-01 00:49:56"
			itemprop="datePublished"
		>
			2009-10-01 00:49:56
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Mark&#43;Simonson">
            Mark Simonson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Arh, yes, erm, well maybe not then. :S</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-10-01 01:22:48"
			itemprop="datePublished"
		>
			2009-10-01 01:22:48
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:bendy">
            bendy
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Mark Simonson &ndash; (about Tal&rsquo;s fraction feature) <cite>He admits his solution has some drawbacks and doesn&rsquo;t necessarily recommend it. Looks like it&rsquo;s still a work in progress.</cite> (about your fraction feature) <cite>Ligatures are usually on by default, so the fraction sequence would be converted indiscriminately. Thus, if the user typed &ldquo;9/11/2001&rdquo; they would get &ldquo;9/1½001&rdquo;.</cite></p>
<p>In both cases, the drawback is the same: indiscriminately applying the feature to strings that should not be touched. In case of Tal&rsquo;s suggestion, this drawback is easily addressed by adding a few &ldquo;ignore&rdquo; statements which make sure that dates and other strings following the pattern slash&ndash;digit(s)&ndash;slash are left intact. Btw, the free style of FF Dagny shows that FontShop has adopted Tal&rsquo;s approach including a safety belt like I mentioned, so obviously they consider this approach as safe enough, like I do too.</p>
<p>As to the second part, it is not necessary to deal with prebuilt fractions in frac. These exist for legacy reasons, so add them to the font but then leave them alone. A frac feature can compose a ½ from numerator-one plus fraction-slash plus denominator-two, the same way it would compose any other arbitrary fraction.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-10-01 03:48:44"
			itemprop="datePublished"
		>
			2009-10-01 03:48:44
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:k.l.">
            k.l.
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Hm. Good point about the pre-built fractions. I copied that concept from Adobe&rsquo;s code, and (obviously) didn&rsquo;t think to question it.</p>
<p>Regarding Tal&rsquo;s fraction feature idea: Reading it over again, he is more positive about it than I remembered when I first read it a few months ago. I might use that in my next fonts. Have you actually come up with code to handle date exceptions?</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-10-01 04:46:09"
			itemprop="datePublished"
		>
			2009-10-01 04:46:09
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Mark&#43;Simonson">
            Mark Simonson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>The following is completely untested hack, but might work and deal correctly with dates. Unfortunately, the current version of FontLab doesn&rsquo;t support <code> rsub </code> so it isn&rsquo;t viable for those who would prefer not to deal with ADFKO directly (which, unfortunately, includes me or I would have tested this).</p>
<code>
<p>@Figures = [zero one two three four five six seven eight nine];
@Numerators = [zero.numr one.numr two.numr three.numr four.numr five.numr six.numr seven.numr eight.numr nine.numr];
@Denominators = [zero.dnom one.dnom two.dnom three.dnom four.dnom five.dnom six.dnom seven.dnom eight.dnom nine.dnom];</p>
<h1 id="perform-initial-substitutions">perform initial substitutions</h1>
<p>sub @Figures' [slash fraction] by @Numerators;
rsub @Figures' @Numerators by @Numerators;
sub [slash fraction] @Figures' by @Denominators;
sub @Denominators @Figures' by @Denominators;</p>
<h1 id="fix-dates">fix dates</h1>
<p>sub [slash fraction] @Numerators' by @Figures;
sub @Figures @Numerators' by @Numerators;
sub @Numerators' [slash fraction] @Figures by @Figures;
rsub @Numerators' @Figures by @Figures;
sub @Figures [slash fraction] @Denominators by @Figures;
sub @Figures @Denominators' by @Figures;</p>
<p>sub @Numerators slash' @Denominators by fraction;</p>
</code></div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-10-01 10:51:01"
			itemprop="datePublished"
		>
			2009-10-01 10:51:01
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:agisaak">
            agisaak
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>That probably needed to be broken into several separate lookups to work properly &ndash; I leave that as an exercise for the reader :)</p>
<p>André</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-10-01 10:54:02"
			itemprop="datePublished"
		>
			2009-10-01 10:54:02
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:agisaak">
            agisaak
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">What&rsquo;s rsub?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-10-01 11:19:44"
			itemprop="datePublished"
		>
			2009-10-01 11:19:44
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:bendy">
            bendy
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>reversesub (rsub) parses the input string from right to left rather than left to right (or from left to right in Hebrew or Arabic).</p>
<p>André</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-10-01 12:21:43"
			itemprop="datePublished"
		>
			2009-10-01 12:21:43
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:agisaak">
            agisaak
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Tal has just posted an update to the Fractions Fever article which explains the addition: <a href="http://talleming.com/2009/10/01/fraction-fever-2/">http://talleming.com/2009/10/01/fraction-fever-2/</a></p>
<p>Trick is to catch cases with multiple slashes via <a href="http://www.adobe.com/devnet/opentype/afdko/topic_feature_file_syntax.html#5.f.ii" target="_blank">ignore</a> (to make sure these cases are not turned into fractions), then substitute slash by fraction-slash, then substitute numerals by numerators and denominators if in context of fraction-slash. 
<a href="http://www.adobe.com/devnet/opentype/afdko/topic_feature_file_syntax.html#5.h" target="_blank">reversesub</a> would indeed save some lines of code, but better test this lookup type in a couple of applications first, including in XPress &hellip;</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-10-01 18:29:26"
			itemprop="datePublished"
		>
			2009-10-01 18:29:26
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:k.l.">
            k.l.
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Very nice solution!</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-10-01 19:06:36"
			itemprop="datePublished"
		>
			2009-10-01 19:06:36
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Mark&#43;Simonson">
            Mark Simonson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Indeed. Leming’s solution seems to work fine here, too. :D</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-11-14 00:06:50"
			itemprop="datePublished"
		>
			2009-11-14 00:06:50
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Cristobal&#43;Henestrosa">
            Cristobal Henestrosa
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
