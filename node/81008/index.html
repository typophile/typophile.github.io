<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Slight inelegance or real problem with two calt blocks? | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="Slight inelegance or real problem with two calt blocks?" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/81008/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2011-04-09T18:43:42+00:00" />
<meta property="article:modified_time" content="2011-04-09T18:43:42+00:00" />

<meta itemprop="name" content="Slight inelegance or real problem with two calt blocks?">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2011-04-09T18:43:42+00:00" />
<meta itemprop="dateModified" content="2011-04-09T18:43:42+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Slight inelegance or real problem with two calt blocks?"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Slight inelegance or real problem with two calt blocks?</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2011-04-09T18:43:42Z">April 9, 2011</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Scriptor&#43;Abbati%C5%BF%C5%BF%C3%A6">
            Scriptor Abbatiſſæ
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">I found myself having to use two different calt blocks, one upstream of a salt block and one downstream from the salt block. This is admittedly inelegant, but can it cause any real problems?</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">There&rsquo;s nothing wrong with this, and I wouldn&rsquo;t assume it to be inelegant. The OpenType Layout model explicitly allows this, and in some cases it may be the most elegant solution to a layout challenge. I regularly make fonts with staggered lookups.</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-04-09 19:16:04"
			itemprop="datePublished"
		>
			2011-04-09 19:16:04
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thanks John. I feel less inelegant now. Can I get away with an extra liga feature bloc as well?</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-04-17 19:46:51"
			itemprop="datePublished"
		>
			2011-04-17 19:46:51
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Scriptor&#43;Abbati%C5%BF%C5%BF%C3%A6">
            Scriptor Abbatiſſæ
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">You can have whatever arrangement of lookups achieves your purpose. You should try to be efficient, bearing in mind that the more lookups you have the greater the processing required during layout, but that doesn&rsquo;t always imply lumping all the lookups for one feature together; sometimes, staggering the lookups gains you efficiencies elsewhere.</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-04-18 03:34:15"
			itemprop="datePublished"
		>
			2011-04-18 03:34:15
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Basically, this finding also means that the syntax:</p>
<p><code>feature ss01 {
lookup L1 { 
sub A by B;
} L1;
lookup L2 { 
sub B by C;
} L2;
} ss01;</code></p>
<p>can be equivalently expressed as</p>
<p><code>feature ss01 {
sub A by B;
} ss01;
feature ss01 { 
sub B by C;
} ss01;</code></p>
<p>Very interesting!</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-04-20 20:07:49"
			itemprop="datePublished"
		>
			2011-04-20 20:07:49
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:twardoch">
            twardoch
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Damn!</p>
<p>Scriptor, thanks for that. I&rsquo;ve spent many years writing feature definitions code, and hit this problem several times, and never realized this simple solution.</p>
<p>I have always assumed that in AFDKO syntax, it&rsquo;s not possible to write:</p>
<p><code>feature ss01 {
sub A by B;
} ss01;
feature liga {
sub B by C;
} liga;
feature ss01 {
sub C by D;
} ss01;</code></p>
<p>But actually, your post made me realize that it is possible, and correct. The AFDKO compiler (in FontLab Studio) will issue a warning (feature already defined: ss01) but it&rsquo;ll still compile.</p>
<p>What this code does is, when expressed in AFDKO 2.5 format, which is closer to what happens in the real font, it will produce three lookups:</p>
<p><code>lookup L1 {
sub A by B;
} L1;
lookup L2 {
sub B by C;
} L2;
lookup L3 {
sub C by D;
} L3;</code></p>
<p>and will map those lookups to two features:</p>
<p><code>feature liga {
lookup L2;
} liga;
feature ss01 {
lookup L1; 
lookup L3;
} ss01;</code></p>
<p>Since in the font, the it is the order of lookups that defines the order of processing of the glyph stream, this will have the effect that if only &ldquo;liga&rdquo; is active, only the lookup L2 will be executed, if only &ldquo;ss01&rdquo; is active, the lookup L1, and then L3, will be executed, and if both features are active, then the lookups will be executed in the order L1, then L2, then L3.</p>
<p>Brilliant. I never thought that this was actually possible to do in the AFDKO 1.6 syntax that FontLab Studio 5 is using. (In AFDKO 2.5, which is used by Fontographer 5 and DTL OTMaster, and will also be used by FontLab Studio 5.5, I assumed that this was only possible by placing the lookup definitions outside of the feature definitions. But I was wrong. The method shown above is also valid, and it works in AFDKO 1.6 already. Cool!)</p>
<p>Best,
Adam</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-04-20 20:11:04"
			itemprop="datePublished"
		>
			2011-04-20 20:11:04
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:twardoch">
            twardoch
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">My concern is about the two or three recompilations that might occur before it all comes up on an end user programme. How is one to know that a &lsquo;warning&rsquo; such as you mention does not mean that a subsequent piece of programming might be too clever by half and decide to bring all the &lsquo;calt&rsquo; coding together into one block so that all of it ends up upstream of the &lsquo;salt&rsquo; feature anyway?</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-04-21 12:37:20"
			itemprop="datePublished"
		>
			2011-04-21 12:37:20
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Scriptor&#43;Abbati%C5%BF%C5%BF%C3%A6">
            Scriptor Abbatiſſæ
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Scriptor,</p>
<p>there is just one compilation of the code, and what is in the font, gets executed by the OpenType Layout engine. The &ldquo;blocks&rdquo; are lookups. I&rsquo;ve written about what they are and how they work here: 
<a href="http://typophile.com/node/29898#comment-171706">http://typophile.com/node/29898#comment-171706</a></p>
<p>Best,
Adam</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-04-21 23:26:19"
			itemprop="datePublished"
		>
			2011-04-21 23:26:19
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:twardoch">
            twardoch
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
