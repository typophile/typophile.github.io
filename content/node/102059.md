---
author:
  name: ilyaz
  picture: 126501
body: "I suspect I crashed Windows 7 rasterizer.  I was investigating how my (silly)
  font was looking at 8pt/em (in Notepad); now Notepad fonts' selection is quirky
  when I try to choose this font (it won't show \u2014 autogenerated \u2014 Italic/Bold
  on the first time I select the font, only on the second time), and, while the dialogue
  allows me to choose font size, the Notepad continues to use the same 8pt size.\r\n<!--break-->\r\nThe
  other fonts are unaffected (even in the same Notepad session).\r\n\r\nIs there any
  way to clear the rasterizer cache and ask it to start from the scratch?  (Short
  of rebooting\u2026)"
comments:
- author:
    name: HVB
    picture: 111370
  body: "Afraid you have to reboot. The fontcache is held in memory.\r\nFirst, DELETE
    the fontcache - c:\\windows\\SYSTEM32\\fntcache.dat\r\nthen reboot. With luck,
    the problem will go away. If it doesn't there's something else wrong!\r\n - Herb\r\n"
  created: '2013-04-06 07:00:10'
- author:
    name: ilyaz
    picture: 126501
  body: "Another ramification (with a different family \u2014 from the same super-family
    of fonts)\u2026  Now, as far I can see, GDI shows the font fine, but DirectWrite
    treats every character as whitespace :-( ;-).  The font is monospaced, so there
    is little chance to distinguish one character from another if there is no glyph
    shown ;-).\r\n\r\n(At least what I can see is that Notepad and Chrome show glyphs,
    but Firefox and IE do not.)  Does it mean that only DirectWrite's rasterizer crashed,
    or what?  Deleting/reinstalling a font without a reboot does not help\u2026\r\n\r\nYet
    another tidbit: I did not check before whether the font would show in DirectWrite
    applications; so I do not know whether what I indicate above is time-dependent.
    \ But I <em>did</em> check that the font worked in Windows' console fine (looking
    at a document which included all the characters in the font).  \u2014 Initially.
    \ \u2014 Now it does not (without any change to the setup) \u2014 it won\u2019t
    even show in the menu of available console fonts.  Is it an indication of (another)
    crash?\r\n\r\nIf so, crash in which subsystem?  BTW, is console using GDI or DirectWrite?
    \ If latter, there might be a correlation between these two anomalies\u2026"
  created: '2013-04-15 08:46:44'
- author:
    name: ilyaz
    picture: 126501
  body: "Finally, I rebooted, and the condition was cleared (one of two fonts would
    show again).\r\n\r\nSurprisingly, both fonts were <strong>deleted</strong> before
    the reboot.  Still, one of them \u201Cresurrected\u201D, and would show fine (at
    sizes above the \u201Cdesign\u201D size of 16px); it was picked by FireFox automatically.
    \ (I suspect that the reason for the crash of rasterizer [and corruption of some
    internal structures] was using sizes closer to 8px.)  I did not try to experiment
    with the other one of two fonts\u2026\r\n\r\nIs there any way to detect a particular
    glyph which caused the crash?  (Bisecting a font with 55000 glyphs, with reboots
    in between, may take some guts. ;-)  (Not mentioning that the full build process
    takes 6hours!  But I would not need it for just deleting the glyphs\u200A\u2014\u200Afontforge
    would take about 20min to Generate() the TTF.)"
  created: '2013-05-22 00:54:25'
date: '2013-04-06 02:42:44'
node_type: forum
title: Uncrashing Win7 rasterizer

---
