<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>lookupflag IgnoreMarks in FontLab not working in output font | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="lookupflag IgnoreMarks in FontLab not working in output font" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/81356/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2011-04-18T21:43:42+00:00" />
<meta property="article:modified_time" content="2011-04-18T21:43:42+00:00" />

<meta itemprop="name" content="lookupflag IgnoreMarks in FontLab not working in output font">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2011-04-18T21:43:42+00:00" />
<meta itemprop="dateModified" content="2011-04-18T21:43:42+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="lookupflag IgnoreMarks in FontLab not working in output font"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">lookupflag IgnoreMarks in FontLab not working in output font</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2011-04-18T21:43:42Z">April 18, 2011</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Thomas&#43;Phinney">
            Thomas Phinney
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>I&rsquo;ve been working on a mildly complex font for a client (moonlighting outside my day job).</p>
<p>I&rsquo;ve never worked with using a lookupflag to ignore certain glyphs, but it seems like the perfect solution for a particular issue I encountered. So I tried to do it in FontLab. It compiled fine and I export the font, but the desired behavior is not occurring in InDesign CS5 (even when I set text with the WorldReady Composer active).</p>
<p>I&rsquo;m wondering if I am doing something wrong, or&hellip;? Here&rsquo;s my process.</p>
<p>A) First, for the glyphs we want to be ignored, do the following in the FontLab glyph window:</p>
<ul>
<li>select the glyph.</li>
<li>bring up the glyph properties dialog</li>
<li>change the value of the OT popdown from &ldquo;Unassigned&rdquo; to &ldquo;Mark&rdquo;</li>
</ul>
<p>B) For EACH AND EVERY lookup we need the glyph to not interfere with, we need to add one line that reads &ldquo;lookupflag IgnoreMarks ;&rdquo; and goes right after the lookup is declared and before the substitution code, like this:</p>
<p>lookup LOOKUPNAME {
lookupflag IgnoreMarks ;
sub glyph' [a e i o u] by glyph.alt ;
} LOOKUPNAME ;</p>
<p>C) In FontLab prefs, go to &ldquo;Generating OpenType and TrueType&rdquo; and make sure to check &ldquo;Generate GDEF table&rdquo;! This is critical because the glyphs being indicated as &ldquo;Marks&rdquo; are stored in the GDEF table and without that, it all won&rsquo;t work.</p>
<p>Am I missing something?</p>
<p>T</p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>If the glyphs you want to ignore are not combining marks, then you should be using <code>MarkAttachmentType</code> (or the new, mostly unsupported, <code>UseMarkFilteringSet</code>), otherwise no idea why <code>IgnoreMarks</code> is not working for you (but I don&rsquo;t use FontLab). You can also write the <code>GDEF</code> table directly in the feature file, if it makes any difference.</p>
<p>Edit: Another idea, but I&rsquo;m not really sure, but I think the <code>lookupflage</code> should go the feature block itself, so try:</p>
<code>
feature calt {
  lookupflag IgnoreMarks;
    lookup LOOKUPNAME;
} calt;
</code></div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-04-18 23:24:35"
			itemprop="datePublished"
		>
			2011-04-18 23:24:35
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Khaled&#43;Hosny">
            Khaled Hosny
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">My first guess was that FLS5 would not generate GDEF properly, but it does. Maybe WRC expects that not only mark glyphs are covered in GDEF as such, but base glyphs need to be explicitly covered too?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-04-19 00:10:10"
			itemprop="datePublished"
		>
			2011-04-19 00:10:10
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:k.l.">
            k.l.
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Khaled: Given that there are only two glyphs I want to ignore, and 1500 I want to NOT ignore, I am not sure MarkAttachmentType makes sense. At least, not given what the feature file syntax has to say about it:</p>
<p><code>To skip over all mark glyphs except for those of mark class @TOP_MARKS:</code></p>
<p><code>   lookupflag MarkAttachmentType  @TOP_MARKS; </code></p>
<p><code>The class name used with MarkAttachmentType can be either a regular glyph class name or a mark class name. The glyph sets of the referenced classes must not overlap, and the MarkAttachmentType statement can reference at most 15 different classes.</code></p>
<p>Karsten: Yes, at first I didn&rsquo;t think it would work, but then I saw it quite explicitly documented in the FontLab manual, and I got it to compile fairly easily&hellip;.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-04-19 01:34:41"
			itemprop="datePublished"
		>
			2011-04-19 01:34:41
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Thomas&#43;Phinney">
            Thomas Phinney
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I see, then may be using &lsquo;ignore&rsquo; keyword is a better choice, but it largely depends on how complex your actual substitution.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-04-19 04:15:37"
			itemprop="datePublished"
		>
			2011-04-19 04:15:37
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Khaled&#43;Hosny">
            Khaled Hosny
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
