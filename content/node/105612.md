---
author:
  name: Si_Daniels
  picture: 110446
body: "As announced on the OpenType List, but posted here as a reminder and as an
  FYI for those not on the list.\r\n\r\nAt the request of some in the community we've
  organized opportunities for those interested in color fonts, color font formats
  and rendering technology to meet at TypeCon and ATypI. \r\n\r\nAt TypeCon the organizers
  have kindly provided us a room on Saturday August 24th at 3pm (for two hours) -
  there will be a call in number for this meeting (contact me directly if you want
  to call in). \r\n\r\nAt ATypI the organizers have also provided a room on Thursday
  October 10th at 1.40pm (for two hours twenty minutes) - there will likely be a call
  in number for this meeting too.\r\n\r\nI'd like to thank Grant (SoTA) and Barbara
  & John (ATypI) for facilitating these meetings.\r\n\r\nThanks, Si"
comments:
- author:
    name: eliason
    picture: 109936
  body: 'The type community needs to have these discussions and these conferences
    are of course apt venues, but for the ATypI meeting I''m sad to see that the conversation
    coincides with the two-track part of the conference. Thus attending the meeting
    means missing nine (!) other presentations (full disclosure: mine is one of the
    nine). Is that the best or only time-slot option?'
  created: '2013-08-19 17:06:05'
- author:
    name: Si_Daniels
    picture: 110446
  body: "TypeCon offered a couple of options and this one seemed best. ATypI only
    offered the one slot. \r\n"
  created: '2013-08-19 19:16:45'
- author:
    name: oldnick
    picture: 109434
  body: This may be a dumb question (my specialty), but are any other platforms besides
    Windows 8.1 discussing supporting color fonts?
  created: '2013-08-19 20:36:41'
- author:
    name: Si_Daniels
    picture: 110446
  body: "Mac OS X (starting with Lion) and iOS support OpenType fonts with embedded
    color bitmaps. These are embedded in a private table named \"sbix\". \r\n\r\nAbout
    a month before we demo'd our color support, Google announced an alternate embedded
    bitmap format on the OpenType list. I don't recall if the proposal mentioned Android
    or Chrome OS. \r\n\r\nCheers, Si \r\n\r\n "
  children:
  - author:
      name: jfkthame
    body: "Another platform with nascent support for color fonts (in the form of SVG-in-OpenType)
      is Gecko, although the feature is not yet enabled by default in Firefox desktop
      and mobile browsers \u2014 it's considered experimental and has some known bugs.
      There's a small example (complete with bugs!) [[http://people.mozilla.org/~jkew/opentype-svg/GeckoEmoji.html|here]].\r\n\r\nAs
      part of the Gecko platform, this support should become available in due course
      throughout Gecko-based applications and on Firefox OS devices."
    created: '2013-08-21 16:59:10'
  created: '2013-08-20 00:38:45'
- author:
    name: vinceconnare
    picture: 110591
  body: 'Si who''s doing the talk? I ain''t going I don''t have a sponsor. Alice Rawsthorn
    is a legend.. her Yves St. Laurent book is ace but mostly about the financing
    of fashion. '
  created: '2013-08-21 12:44:36'
- author:
    name: Si_Daniels
    picture: 110446
  body: 'Vinny, it''s not a talk, it''s a meeting. Sorry to hear you won''t be there.
    I''ll check to see if we have a spare sponsor pass. '
  created: '2013-08-21 16:21:15'
- author:
    name: vinceconnare
    picture: 110591
  body: 'send me an email then Si. '
  created: '2013-08-21 16:51:25'
- author:
    name: vinceconnare
    picture: 110591
  body: 'send me an email then Si. '
  created: '2013-08-21 16:52:58'
- author:
    name: Si_Daniels
    picture: 110446
  body: "Sure we can set something up. Contact me off-list.\r\n\r\nCheers, Si"
  created: '2013-08-22 17:42:31'
- author:
    name: russellm
    picture: 111614
  body: "<cite> there will likely be a call in number for this meeting too.</cite>\r\n\r\nVideo
    feed? Skype?"
  created: '2013-08-22 18:12:28'
- author:
    name: russellm
    picture: 111614
  body: Thanks
  created: '2013-08-24 03:27:08'
- author:
    name: Si_Daniels
    picture: 110446
  body: For those here in Portland, the meeting will take place in the Council meeting
    room on the 3rd floor of the Hilton hotel.
  created: '2013-08-24 22:27:44'
- author:
    name: Thomas Phinney
    picture: 128358
  body: The meeting was interesting, if thoroughly inconclusive. There are no fewer
    than four color font formats right now (Apple, Microsoft, Google, Adobe), although
    one of them (Apple's) has not yet been submitted for consideration as a standard.
  created: '2013-08-28 04:27:21'
- author:
    name: John Hudson
    picture: 110397
  body: As I understand, none of them have been formally submitted for consideration
    as a standard. The ISO MPEG-OFF body is drafting a request for proposals, and
    formal submissions will be in response to that.
  created: '2013-08-28 06:19:00'
- author:
    name: Thomas Phinney
    picture: 128358
  body: I believe you are correct; I should have said, three of them are published
    specs with the announced intention of submitting them for standardization, while
    Apple has not decided one way or the other to publish/submit, or not.
  created: '2013-08-28 15:44:29'
- author:
    name: hrant
    picture: 110403
  body: "So who's going to make a pros/cons table for each approach?\r\n\r\nhhp\r\n"
  created: '2013-08-29 02:44:15'
- author:
    name: John Hudson
    picture: 110397
  body: "At the moment, and unless things change drastically, I'd say there's a pretty
    good chance that we could end up with multiple solutions, each with its particular
    benefits and coverage areas.* On the whole, most attention seems to be on the
    two vector formats: Microsoft's glyf/COLR/CPAL model and the SVG-in-OT model from
    the W3C community group championed by Adobe and Mozilla. As Adam pointed out,
    though, Google's bitmap model is worth considering because, like the MS vector
    model, it is a small and nifty addition to existing sfnt structures.\r\n\r\nIf
    anyone is going to compile a table of pros and cons for each model, I'd recommend
    distinguishing pros/cons for different parties. Obviously the SVG model has more
    pros for companies that have already invested in SVG support, and have most of
    the infrastructure they would need in place. Obviously the glyf/COLR/CPAL model
    has specific pros for rendering environments that still make use of hinting.\r\n\r\nAnd
    if things do change drastically? I think the biggest question is whether MS will
    expand their model to handle gradients and animation. If they do, then their approach
    will be in direct competition with the SVG model, and there would be less reason
    for the ISO MPEG committee to contemplate standardising both.\r\n_____\r\n\r\n*
    At the meeting, I posited a use case in which a font developer might end up including
    both COLR/CPAL data and SVG data in the same font, for different ranges of characters."
  created: '2013-08-29 03:33:26'
- author:
    name: dberlow
  body: "No problem. Tracking glyphs that change color or unicode as a function of
    time or size will also have to be stored in the font name. ;)\r\n"
  created: '2013-08-29 13:19:09'
- author:
    name: Si_Daniels
    picture: 110446
  body: ">So who's going to make a pros/cons table for each approach?\r\n\r\nAdam
    Twardoch actually wrote one up a month or so ago. You could ask him to forward,
    or possibly post here.\r\n\r\nSi"
  created: '2013-08-29 17:37:47'
- author:
    name: hrant
    picture: 110403
  body: "Thank you, Adam.\r\n\r\nhhp\r\n"
  created: '2013-08-30 04:43:58'
- author:
    name: twardoch
    picture: 110427
  body: "A small [edit: not so small after all :) ] postscriptum: \r\n\r\nThere is
    one more consideration that I should mention: \"finiteness\" of the proposals.
    By that I mean whether the limitations of what a given formats aims to achieve
    in the end is now clearly defined. This is closely related to stability of implementations,
    meaning: if, as a developer, I invest the time to implement a given format now,
    will I have to revisit it in the future? \r\n\r\nSuperficially, an \"extensible\"
    structure is appealing. \"Oh, this structure is infinitely extensible, we can
    add so many cool stuff to it later\". But in many cases, an infinitely extensible
    structure also poses risks. Software developers have limited time windows to devote
    to fonts and text technology. They often want to implement something and be done
    with it for the next years. So somewhat paradoxically, a proposal that clearly
    and consciously states its limits is actually attractive because it doesn't leave
    open questions. \r\n\r\nThe GOO proposal seems to be the best example of such
    self-limiting format. It extends the existing embedded bitmap formats by adding
    just two or so new subformats, and that's it. There may be one or two open questions
    now (the scalability issue I discussed), but once those are answered, and developers
    add support for it, it's a done deal. The GOO proposal does not leave many loose
    ends. \r\n\r\nIn other words, the GOO proposal doesn't try to cook many dishes
    at the same time or doesn't try to be a \"catch all solution\". Instead, it aims
    to do just one thing, and to do it very well. Which is, I believe, where its real
    beauty lies. Also \u2014 just like the older embedded bitmap formats \u2014 it
    can be used to host bitmap-only glyph data, without any outline fallback. This
    actually is quite desirable for some scenarios such as fixed-size devices \u2014
    simple electronic displays (brick phones, scrolling electronic banners, diplays
    in car radios or other portable electronics). \r\n\r\nIn constrast, the APP proposal
    limits itself very vaguely. The \"sbix\" table spec says that it can host a huge
    variety of possible glyph formats, from PNG through TIFF and JPEG, SVG and PDF
    to even movie clips. Attractive in principle, it also may be a bit \"scary\".
    The current APP implementation isn't actually \"sbix\". It's \"sbix with PNG glyph
    data\". But there could be \"sbix with SVG data\" or \"sbix with MOV clips\".
    This means that develpers who choose to implement \"sbix as a whole\" may end
    up struggling to support various glyph data sources, and they may never be sure
    whether something new wouldn't pop up in future. \r\n\r\nThe MIC proposal quite
    cleanly defines its current scope, though Greg Hitchcock has suggested during
    the TypeCon meeting that Microsoft may in future extend their format to support
    \"more things\", like gradients. However, knowing Microsoft's practice, they would
    most likely extend it in a transparent, backwards-compatible way (so, for example,
    a gradient would fall back to a solid color). At the current stage of the proposal,
    CPAL and COLR are nicely defined. CPAL may undergo some revisions, especially
    if (hopefully) both the COLR and the SVG tables make use it, i.e. if Adobe, Microsoft
    and Mozilla come to common terms regarding some minor CPAL extensions. \r\n\r\nInterestingly,
    the SVG in SFNT proposal, although very ambitious in terms of graphic effects
    you can achieve, is actually fairly clearly limited. Again, some wrinkles need
    to be ironed out, and animation is a big open question, but if we limit ourselves
    to static SVGs, the principle is very simple: the SVG in SFNT format only defines
    a container format for the data, and clearly DELEGATES everything else to the
    SVG standard proper. \r\n\r\nThis is actually a fairly stable proposal. It means
    that, as a developer who implements it, you'll need to keep up with the evolution
    of SVG proper, but \u2014 if you do have an SVG renderer implementation \u2014
    you'll want to do it anyway. But the SVG in SFNT makes (more less) a promise that
    they won't bother you greatly with doing big changes in future that will be font-specific.
    So as long as you've implemented the SFNT SVG table once (hopefully the revised
    one which shouls reuse CPAL), you'll be done at the font end. Then, you'll just
    need to keep up with your general SVG renderer as you normally would. \r\n\r\nSo
    with SVG, if your application does not have an SVG renderer, it's a \"big step\"
    that you'd need to do, but you'd only need to do it once. (And perhaps it would
    be a good idea to do it anyway, since SVG is a graphics format that may be useful
    is supporting regardless of fonts). But once you've done it, all future steps
    you'll have to do will likely be very small and will \"just happen\". \r\n\r\nIn
    fact, I think the GOO mechanism would serve as an ideal fallback to SVG. Since
    SVG can contain scalable graphics which intermix vectors and bitmaps, the results
    can be very complex. But they could be pre-rendered and put into the CBDT/CBLC
    tables as well. It could be similar to how pre-rendered PNG bitmaps are (or used
    to be) often served by websites to older browsers which don't support SVG. You'd
    lose the smooth scalability, but you would at least get the intended glyphs appearance.
    \r\n\r\nBest,\r\nAdam"
  created: '2013-08-30 11:20:06'
- author:
    name: twardoch
    picture: 110427
  body: "<strong>INTRODUCTION</strong>\r\n\r\n<em>As a follow-up to the TypeCon \u201Ccolor
    fonts\u201D meeting that took place in Portland on August 24th, 2013, I\u2019m
    posting this analysis which I have written and circulated to a group of developers
    and type designers in June. The following is a revised version of my analysis
    as of <strong>August 30th</strong>. I\u2019m incorporating some of the updated
    information which was made available after I wrote the initial version. Note that
    this overview is my personal take on the topic. I <strong>claim no</strong> completeness
    or correctness of the information presented below.</em>\r\n\r\n\r\n<strong>CONCEPTS</strong>\r\n\r\nThere
    are several conceptual approaches for \u201Ccolor fonts\u201D that can be considered,
    in increasing order of complexity:\r\n\r\n<ul>\r\n<li>(a) per-PPM bitmap strike
    definition, without any scaling</li>\r\n<li>(b) scalable bitmap glyphs with multiple
    \u201Cmaster PPM sizes\u201D</li>\r\n<li>(c) one scalable bitmap glyph definition
    across all PPMs</li>\r\n<li>(d) layered outline glyphs, one solid fill per layer</li>\r\n<li>(e)
    static outline glyphs with complex fills and optional bitmap content</li>\r\n<li>(f)
    animated variant of (e)</li>\r\n</li>\r\n\r\n\r\n<strong>APPROACHES</strong>\r\n\r\nWe
    have now four distinct approaches from the major vendors, in increasing order
    of complexity:\r\n\r\n<ul>\r\n<li>GOO: Google \u201CCBDT\u201D/\u201CCBLC\u201D
    tables \u2014 (a) or (b), unclear</li>\r\n<li>APP: Apple \u201Csbix\u201D table
    \u2014 (b) concept</li>\r\n<li>MIC: Microsoft \u201CCOLR\u201D/\u201CCPAL\u201D
    tables \u2014 (d) concept</li>\r\n<li>SVG: Joint Adobe and Mozilla \u201CSVG \u201D
    table \u2014 (e) concept, possibly expandable to (f)</li>\r\n<ul>\r\n\r\n\r\n<strong>CONSIDERATIONS</strong>\r\n\r\nThere
    are also several considerations, or aspects, which each implementation needs to
    address.\r\n\r\n<ul>\r\n<li><strong>Co-existence</strong>: regardless of the possible
    size inflation, whether several approach can co-exist within the same SFNT font
    file. This includes questions such as precedence (what should happen if a consuming
    platform \u201Cunderstands\u201D multiple approaches) or structure sharing (whether
    the same structure, e.g. the PNG image data or a color palette, can be shared
    by multiple approaches). In particular, the question of co-existence of the new
    structures with old ones (\u201Cglyf\u201D or \u201CCFF \u201D table) is important.</li>\r\n<li><strong>External
    modification</strong>: especially with the outline approaches, whether the colors
    specified within the SFNT font file can somehow be manipulated/modified externally
    by the consuming platforms. This also includes more specific questions such as,
    in case of the SVG-based approaches, controlling animation or, if the consuming
    platform is a web browser, interaction with the document\u2019s DOM.</li>\r\n<li><strong>Fallback/degradation</strong>:
    related to co-existence, how the color data should be represented in environments
    that only support grayscale or even monochrome data. Adobe\u2019s Leonard Rosenthol
    has raised a number of fundamental issues on this in context of the SVG discussion.
    The discussion makes, I hope, an interesting read: the \u201CGlyph bbox concerns\u201D
    thread, [1] and [2].</li>\r\n\r\n[1] <a href=\"http://lists.w3.org/Archives/Public/public-svgopentype/2012Jun/thread.html\">http://lists.w3.org/Archives/Public/public-svgopentype/2012Jun/thread.html</a>\r\n[2]
    <a href=\"http://lists.w3.org/Archives/Public/public-svgopentype/2012Aug/thread.html\">http://lists.w3.org/Archives/Public/public-svgopentype/2012Aug/thread.html</a>\r\n\r\n\r\n<strong>DETAILED
    DISCUSSION OF APPROACHES</strong>\r\n\r\n<strong><em>GOO: Google \u201CCBDT\u201D/\u201CCBLC\u201D
    tables</em></strong>\r\n\r\nBitmap-based (PNG) glyphs, either as per-PPM bitmap
    strike definition, without any scaling, or as scalable bitmap glyphs with multiple
    \u201Cmaster PPM sizes\u201D \u2014 this is unclear (see below for details).\r\n\r\nAnnounced
    in May 2013 on the Google blog [GOO1], this is an approach which specifies two
    tables (\u201CCBDT\u201D/\u201CCBLC\u201D, [GOO2]), which in turn extend the existing
    OpenType \u201CEBDT\u201D/\u201CEBLC\u201D tables [GOO3], [GOO4] by adding the
    ability to include uncompressed color images or PNG images. Those, in turn, are
    extended version of Apple\u2019s original \u201Cbdat\u201D/\u201Cbloc\u201D tables
    which have a long history.\r\n\r\nGoogle hosts a \u201CColor Emoji\u201D project
    dedicated to this [GOO5], have created a Python tool which embeds PNGs into that
    table [GOO6] and have provided sample fonts. FreeType 2.5 now also includes support
    for this [GOO7], added on May 29th.\r\n\r\n<em>Co-existence:</em> The GOO proposal
    states: \u201CIt is recommended that such fonts include no \u2018glyf\u2019 table,
    and as such be bitmap-only fonts.  In the presence of color and non-color strikes
    in the same font, it is currently unspecified which bitmap a conformant client
    will choose for rendering.\u201D. While this does not directly invalidate co-existence,
    it raises a valid question (for co-existence in general, and for precedence in
    particular). However, in Microsoft\u2019s and Apple\u2019s traditional implementations
    of the TrueType rasterizer (before ClearType), the bdat/bloc and EBDT/EBLC tables
    worked so that if a bitmap strike was available for a given PPM, it was used,
    otherwise the outline glyph was rendered from the \u201Cglyf\u201D table (even
    for the same glyph but different PPM). I definitely think that all consuming platforms
    which support the GOO approach should adopt the aforementioned principle. This
    is especially crucial when it comes to co-existence between the GOO proposal and
    the MIC proposal. If the GOO approach behaves as I described, then chances are
    that one font could include the CBDT, CBLC, COLR, CPAL and glyf tables, and the
    consuming platform could easily choose whether to use the GOO approach first,
    and then (for different PPM sizes or glyphs which are not supported by the GOO
    tables) use the MIC approach (or just the plain \u201Cglyf\u201D table).\r\n\r\n<em>External
    modification:</em> While some people have generally voiced their desire to be
    able to manipulate colors that are embedded inside of a font file externally,
    I think in case of PNG-based glyphs, this should be, if at all, a post-processing
    step (after the glyph images have been retrieved from the scaler).\r\n\r\n<em>Fallback/degradation:</em>
    the GOO spec includes provisions as to how the color bitmap data should be transformed
    into grayscale bitmap data.\r\n\r\n<em>Unclear:</em> The OpenType spec also includes
    the \u201CEBSC\u201D table [GOO8] which defines which per-PPM strikes should be
    used for which PPM ranges when they need to be scaled. Without \u201CEBSC\u201D,
    it is assumed that the \u201CEBDT\u201D/\u201CEBLC\u201D strikes are only rendered
    for the specified PPM. The GOO proposal makes no mention of how scaling should
    be implemented, or whether a scaler should rely on the presence of the EBSC table.
    I *strongly* think that, should the GOO proposal aim at wider adoption, it should
    strictly follow the principle laid out in the OpenType spec: if no EBSC table
    is present, strikes should be rendered only at given PPMs. For scaling, it should
    refer to the EBSC table. It\u2019s also unclear to me what FreeType 2.5 is doing
    at this point, and whether support for EBSC is planned.\r\n\r\n[GOO1] <a href=\"http://google-opensource.blogspot.de/2013/05/open-standard-color-font-fun-for.html\">http://google-opensource.blogspot.de/2013/05/open-standard-color-font-fun-for.html</a>\r\n[GOO2]
    <a href=\"https://color-emoji.googlecode.com/git/specification/v1.html\">https://color-emoji.googlecode.com/git/specification/v1.html</a>\r\n[GOO3]
    <a href=\"http://www.microsoft.com/typography/otspec/ebdt.htm\">http://www.microsoft.com/typography/otspec/ebdt.htm</a>\r\n[GOO4]
    <a href=\"http://www.microsoft.com/typography/otspec/eblc.htm\">http://www.microsoft.com/typography/otspec/eblc.htm</a>\r\n[GOO5]
    <a href=\"https://code.google.com/p/color-emoji/\">https://code.google.com/p/color-emoji/</a>\r\n[GOO6]
    <a href=\"https://code.google.com/p/color-emoji/source/browse/\">https://code.google.com/p/color-emoji/source/browse/</a>\r\n[GOO7]
    <a href=\"http://git.savannah.gnu.org/cgit/freetype/freetype2.git/\">http://git.savannah.gnu.org/cgit/freetype/freetype2.git/</a>\r\n[GOO8]
    <a href=\"https://www.microsoft.com/typography/otspec/ebsc.htm\">https://www.microsoft.com/typography/otspec/ebsc.htm</a>\r\n\r\n<strong><em>APP:
    Apple \u201Csbix\u201D table</em></strong>\r\n\r\nIn the current implementation:
    bitmap-based (PNG) glyphs, as scalable bitmap glyphs with multiple \u201Cmaster
    strikes\u201D per PPM. The \u201Csbix\u201D spec has provisions to hold other
    types of glyph definitions, such as TIFF, SVG, PDF or even movie clips, but this
    is not very clearly specified nor implemented. \r\n\r\nApple\u2019s is the first
    implementation that has been officially deployed. It was introduced to iOS 4 and
    also runs in CoreText applications Mac OS X 10.7 and newer. It does not run on
    ATSUI applications such as Pages 09 or Keynote 09, but does work in CoreText applications
    such as TextEdit or Safari. Support for \u201Csbix\u201D table with PNG glyph
    has also been added to FreeType. \r\n\r\nThe spec of the table has not been officially
    published by Apple, but has been shared with interested developers. The implementation
    hosts PNG data inside the \u201Csbix\u201D table, with multiple PPM \u201Cmaster
    bitmaps\u201D possible per glyph. The scaler is responsible for choosing the most
    appropriate PPM size and scale it to other PPM sizes as needed.\r\n\r\nIt seems
    that per \u201Cmaster strike\u201D, both the PPM and DPI information can be provided.
    For the metrics, the implementation relies on the bounding boxes stored in the
    \u201Cglyf\u201D table. It seems that, very unfortunately, the Apple implementation
    renders the contents of a \u201Cglyf\u201D table glyph, and the on top it renders
    its associated bitmap \u2014 so if bitmaps are available in the \u201Csbix\u201D
    table for a particular glyph ID, the corresponding \u201Cglyf\u201D glyph ID slot
    has to be empty.\r\n\r\nMac OS X 10.8 includes one font with the \u201Csbix\u201D
    table: Apple Color Emoji, while iOS 6 includes the former along with Apple Color
    Emoji@2 (the latter hosting the glyphs in double DPI resolution, it appears).\r\n\r\nA
    reverse-engineered incomplete and faulty spec has been published [APP1] and [APP2],
    and a patch for fontTools/TTX has been published [APP3]. Those do not seem to
    work correctly, though. However, Fontlab Ltd. has implemented its own \u201Csbix\u201D
    reading and writing, which seems to work correctly. Fontlab Ltd. also has its
    own \u201Csbix\u201D renderer, and I have successfully built a Latin-script color
    font with the \u201Csbix\u201D table and OpenType Layout features such as \u201Ccalt\u201D,
    and that font works as expected in Mac OS X 10.7 and 10.8 (hooray!).\r\n\r\n<em>Co-existence:</em>
    The fact that the \u201Csbix\u201D implementation in Apple OSes seems to require
    that the \u201Cglyf\u201D glyphs are blank raises a big co-existence concern.\r\n\r\nIn
    particular, it seems that this approach could not co-exist with the MIC approach,
    which is a pity. I see that as a weakness of the APP approach.\r\n\r\nAs for the
    co-existence of the APP and GOO approaches, it seems somewhat unclear to me. The
    APP approach requires both \u201Csbix\u201D and \u201Cglyf\u201D to be present,
    while currently, the GOO approach discourages the presence of \u201Cglyf\u201D.
    I see it as a weakness of both approaches (more strongly of the GOO approach).
    Also, there is the question of data duplication. Theoretically, I imagine that
    a smart mechanism (akin to TTC) could allow for some data sharing, wherein both
    the \u201Csbix\u201D table and the \u201CCBLC\u201D table referred to the same
    PNG chunks. But I\u2019m not sure if offsets that go beyond defined table boundaries
    are permitted in the OT spec (I don\u2019t think they are).\r\n\r\n<em>External
    modification:</em> While some people have generally voiced their desire to be
    able to manipulate colors that are embedded inside of a font file externally,
    I think in case of PNG-based glyphs, this should be, if at all, a post-processing
    step (after the glyph images have been retrieved from the scaler).\r\n\r\n<em>Fallback/degradation:</em>
    the APP implementation does not have any clear provisions for fallback/degradation.
    A renderer could fall back to grayscale or monochrome (dithered) versions of the
    \u201Csbix\u201D PNG glyphs, but it would be desirable if it could also fall back
    to \u201Cproper\u201D \u201Cglyf\u201D outline glyphs. However, the fact that
    the APP implementation relies on *empty* \u201Cglyf\u201D glyphs invalidates that.\r\n\r\n<em>Unclear:</em>
    It\u2019s not currently clear how the PPM+DPI \u201Cmaster strikes\u201D should
    be chosen and scaled, but my assumption is that the APP approach explicitly assumes
    that the \u201Csbix\u201D glyphs are scalable, without the need for an additional
    \u201CEBSC\u201D table. This may be disputable. Also, it\u2019s not entirely clear
    to me how a renderer should make use of the PPM and DPI information, though by
    itself it seems rather straightforward.\r\n\r\n[APP1] <a href=\"http://typophile.com/node/96671#comment-524375\">http://typophile.com/node/96671#comment-524375</a>\r\n[APP2]
    <a href=\"http://kanji-database.sourceforge.net/fonts/opentype.html\">http://kanji-database.sourceforge.net/fonts/opentype.html</a>\r\n[APP3]
    <a href=\"https://gist.github.com/jjgod/5478229\">https://gist.github.com/jjgod/5478229</a>\r\n\r\n<strong><em>MIC:
    Microsoft \u201CCOLR\u201D/\u201CCPAL\u201D tables</em></strong>\r\n\r\nThe newest
    member in the family of solutions, announced by Microsoft\u2019s Michelle Perham
    and Si Daniels on June 26th [MIC1], the Microsoft proposal looks quite simple
    and clever to me, judging from the announcement. It adds a relatively lightweight
    baggage of \u201CCOLR\u201D and \u201CCPAL\u201D tables which results in layered
    outline glyphs with one solid fill per layer.\r\n\r\nThe MIC approach is implemented
    in Windows 8.1, with a new Segoe UI Emoji font being included in the OS. A video
    from Microsoft\u2019s Dan McLachlan talk where he presents the approach is available
    [MIC2] (about 9 minutes into the talk). Also, Michelle Perham made a presentation
    at TypeCon 2013 dedicated to the topic. \r\n\r\nThe approach uses a base glyph
    (\u201Cglyf\u201D or, presumably, also \u201CCFF \u201D) which is used for non-color
    situations. The \u201CCOLR\u201D table refers from this glyph into other outline
    glyphs (which exist within the same table), which serve as layers. Each \u201Clayer
    glyph\u201D has its own z-order and a single color references. The color references
    are handled has palette indices, with a separate table, \u201CCPAL\u201D in OpenType
    that resolves the RGBA colors actually used for the glyph. Therefore, both the
    \u201CCOLR\u201D and the \u201CCPAL\u201D tables should be quite small in size,
    all the heavy-lifting being done by the traditional rendering methods. It was
    announced that Microsoft plans to publish the specs for the tables within the
    next few weeks.\r\n\r\n<em>Co-existence:</em> If the GOO approach clarifies its
    behavior when the \u201Cglyf\u201D table is present, then the MIC approach could
    co-exist easily with the GOO approach. Actually, these two approaches could cleverly
    echo the former co-existence of \u201Cglyf\u201D with \u201Cbdat/bloc\u201D (or
    \u201CEBDT\u201D/\u201CEBLC\u201D/\u201CEBSC\u201D). A consuming platform could
    go straight for the monochrome \u201Cglyf\u201D glyphs, or could prioritize the
    MIC approach with a fallback to \u201Cglyf\u201D, or could prioritize the GOO
    approach with a fallback to \u201Cglyf\u201D, or could prioritize the GOO approach,
    then fall back to the MIC approach, and then finally fall back to \u201Cglyf\u201D.
    I don\u2019t see any principal conflict there.\r\n\r\n<em>External modification:</em>
    As Michelle wrote on the OpenType list, \u201CFonts can have multiple palettes,
    but right now the colors are defined by the font developer and the user is not
    able to make changes to the palettes. That\u2019s definitely something we\u2019d
    like to consider in the future and might be something that applications could
    expose.\u201D At TypeCon, Greg Hitchcock clarified the envisioned roles of the
    palettes: first palette is used by default for \u201Cdark on light\u201D color
    situations while second palette is intended for use in \u201Clight on dark\u201D
    situations. Additional palettes should be selectable by the user. \r\n\r\n<em>Fallback/degradation:</em>
    This approach seems to be degrading nicely, and fallback implications have been
    discussed above.\r\n\r\n[MIC1] <a href=\"http://typophile.com/node/104174\">http://typophile.com/node/104174</a>\r\n[MIC2]
    <a href=\"http://channel9.msdn.com/Events/Build/2013/3-191\">http://channel9.msdn.com/Events/Build/2013/3-191</a>\r\n\r\n<strong><em>SVG:
    Joint Adobe and Mozilla \u201CSVG \u201D table</em></strong>\r\n\r\nThe \u201Cfull
    Monty\u201D outline+bitmap (SVG) glyphs with possible animation.\r\n\r\nThis is
    a proposal formulated by Mozilla\u2019s Edwin Flores and Cameron McCormack, with
    input from Robert O\u2019Callahan and Adobe\u2019s Sairus Patel, which has been
    submitted as an unofficial editor\u2019s draft to the W3C [SVG1]. There is a reasonably
    well-working SVG OpenType community for this [SVG3] and a public mailing list
    [SVG2]. As indicated on Robert O\u2019Callahan\u2019s blog [SVG4], this proposal
    has been implemented in Firefox \u2014 it\u2019s off by default but can be enabled
    by toggling \u201Cgfx.font_rendering.opentype_svg.enabled\u201D in about:config.
    Also, a tool, written in Python, is available to create such fonts [SVG5].\r\n\r\nThis
    is the by-far most complex proposal, as it puts the bar quite high for implementers
    (it requires a full SVG renderer, and has provisions for animated glyphs). On
    the other hand, its great advantage is that, once an app has access to the SVG
    renderer, it can delegate the rendering of the glyphs completely to the SVG library.
    So the app only needs to call an OpenType Layout library to perform the layout,
    and then call the SVG renderer for each glyph, and position the rendered bitmaps.
    So in fact in an SVG-compatible environment using the SVG table would be trivial.
    \r\n\r\nThe SVG proposal allows for designs that cannot be achieved by the other
    solutions: it implements \u201Crich color\u201D (with gradients etc.), allows
    for drawing various strokes and, of course, intermixing vectors and bitmaps. So
    it\u2019s potentially very very powerful. \r\n\r\nSairus Patel explained to me
    at TypeCon that he considers the current proposed spec as \u201Cgood to go\u201D,
    and that\u2019s the spec that is implemented in Firefox. \r\n\r\nThis approach
    really is an entirely different animal than all of the above. I can easily imagine
    that the APP, GOO and MIC approaches are all some kind of \u201Ccolor fonts 1.0\u201D,
    while the SVG proposal is \u201Ccolor fonts 2.0\u201D. There\u2019s is an ongoing
    debate on the public mailing list of the W3C community, so I won\u2019t get into
    a detailed discussion here (also because I don\u2019t quite understand some of
    the complexities involved).\r\n\r\nI definitely think, though, that this approach
    can co-exist with all the previous ones.\r\n\r\nOne potential co-existence benefit
    could be if the \u201CSVG \u201D table co-exists with the MIC \u201CCPAL\u201D
    table. The SVG glyphs could potentially make references to the color palettes
    specified within \u201CCPAL\u201D, and if \u2014 in future \u2014 some means to
    externally manipulate the \u201CCPAL\u201D palettes were implemented in consuming
    platforms, both the MIC approach and the SVG approach could benefit from that
    development. \r\n\r\nIn the light of the MIC proposal, Sairus Patel mentioned
    to me that he might consider proposing some extensions to the Microsoft \u201CCPAL\u201D
    table, and then would consider dropping the color palette format proposed in the
    SVG spec \u2014 so that ultimately both the MIC and the SVG formats could use
    the \u201CCPAL\u201D table. \r\n\r\n[SVG1] <a href=\"http://dev.w3.org/SVG/modules/fonts/SVG-OpenType.html\">http://dev.w3.org/SVG/modules/fonts/SVG-OpenType.html</a>\r\n[SVG2]
    <a href=\"http://www.w3.org/community/svgopentype/\">http://www.w3.org/community/svgopentype/</a>\r\n[SVG3]
    <a href=\"http://lists.w3.org/Archives/Public/public-svgopentype/\">http://lists.w3.org/Archives/Public/public-svgopentype/</a>\r\n[SVG4]
    <a href=\"http://robert.ocallahan.org/2013/02/svg-in-opentype-new-approach-to-svg.html\">http://robert.ocallahan.org/2013/02/svg-in-opentype-new-approach-to-svg.html</a>\r\n[SVG5]
    <a href=\"https://github.com/edf825/SVG-OpenType-Utils\">https://github.com/edf825/SVG-OpenType-Utils</a>\r\n\r\n\r\n<strong>PERSONAL
    CONCLUSION</strong>\r\n\r\nIn my view, each of the presented approaches has its
    advantages and disadvantages.\r\n\r\n<strong><em>The Proposals</em></strong>\r\n\r\nThe
    APP proposal is great in so far that it\u2019s actually already implemented. However,
    the interaction of the \u201Csbix\u201D and \u201Cglyf\u201D tables as implemented
    in Apple OSes has its serious drawbacks (no fallback scenario). Also, it\u2019s
    unknown whether the \u201Csbix\u201D table would ever make its way into the official
    ISO OFF or OpenType specs. \r\n\r\nThe MIC proposal only \u201Cgoes color\u201D
    in a limited scope \u2014 it provides a way to render multilayer glyphs with solid
    fills. But they\u2019re outline glyphs, so they should scale nicely. \r\n\r\nThe
    GOO and APP proposals use PNG as their vehicle, so they can have complex fills
    but would fail in high-resolution scenarios. FreeType already implements the APP
    proposal with PNG glyph definitions, and the GOO proposal \u2014 so it looks like
    adding support for them was quite easy.  \r\n\r\nThe GOO approach has advantages
    in so far that it ties into an existing infrastructure of tables, but my fear
    is that these existing table concepts may be abused (no reference to how scaling
    should happen). Also, GOO\u2019s insistence over non-presence of the \u201Cglyf\u201D
    table is very limiting, and not understandable: they say they want their extensions
    to go into the official EBDT/EBLC tables, but those tables make no such requirement.
    \r\n\r\nIn principle, the MIC and GOO approaches could be easily \u201Cmarried
    together\u201D: the MIC proposal would be useful for multilayer glyphs with solid
    fills, the GOO approach for glyphs which require more refined bitmap treatment,
    and fallback scenarios could be defined rather well.\r\n\r\nThe SVG approach is
    very welcome, and, as I said, a kind of \u201C2.0\u201D thing. I believe the discussion
    on them should continue, even if implementations of those could be confined to
    only the web browser context. Also, Firefox actually already implements the SVG
    approach, which is very good news.\r\n\r\n<strong><em>Color Palettes</em></strong>\r\n\r\nAs
    for <strong>color palettes</strong>, I consider its addition to font formats (whether
    through a unified and further developed \u201CCPAL\u201D table or through several
    separate mechanisms) as <strong>third element of typographic user control</strong>.
    \r\n\r\nHistorically, the first user control mechanism was just the \u201Ccmap\u201D
    table: the user\u2019s control over a font was limited to just entering a string
    of Unicodes, and picking the font size \u2014\_and the rest would be done by the
    font. \r\n\r\nThe second mechanism was the addition of the \u201CGSUB\u201D/\u201CGPOS\u201D
    tables: user\u2019s control was extended by the ability to specify OpenType Layout
    features that should be applied to the text. \r\n\r\nAnd now, we\u2019re extending
    the user\u2019s control by adding ability to specify multiple colors through the
    font\u2019s color palette.\r\n\r\n<strong><em>Relation to Existing Solutions</em></strong>\r\n\r\nWhen
    comparing the <strong>outline color font format</strong> proposals, I would use
    the following analogy: \r\n\r\n<ul>\r\n<li>First personal computers had <strong>black-and-white</strong>
    monitors so they only could display one color. That\u2019s like the current monochrome
    font formats.</li>\r\n<li>Then, computers could display <strong>16 colors</strong>
    at the time, and later even 256 colors. The GIF graphics format dominated the
    early days of the web, and it supported up to 256 colors. So that was the \u201C<strong>flat
    color</strong>\u201D implementation, and that\u2019s exactly what the MIC proposal
    is.</li>\r\n<li>Finally, computers gained the possibility to display over <strong>16
    million colors</strong>, and graphic formats such as JPG and PNG were developed
    to support this. That allowed for \u201C<strong>rich color</strong>\u201D applications,
    and this is analogous to the SVG proposal.</li>\r\n</ul>\r\n\r\nBefore color fonts,
    <strong>OpenType</strong> had three separate possible glyph sources: \r\n<ul>\r\n\t<li><strong>embedded
    bitmaps</strong>, which could be monochrome or grayscale, in the \u201Cbdat\u201D/\u201Cbloc\u201D/\u201CEBDT\u201D/\u201CEBLC\u201D/\u201CEBSC\u201D
    tables</li>\r\n\t<li><strong>TrueType outlines</strong> in the \u201Cglyf\u201D
    table, which was a very straightforward structure that allowed little design flexibility
    but through its sophisticated hinting mechanism gave the designer a lot of control
    over the rasterizer</li>\r\n\t<li><strong>PostScript outlines</strong> in the
    \u201CCFF \u201D table, which did not give that precise control over the rasterizer
    through hinting, but was a relatively complex structure that came \u201Csupercharged\u201D
    with some features that were not fully explored to date: fractional point coordinates,
    the FontMatrix mechanism which allowed on-the-fly skewing, scaling or rotation,
    and even Multiple Master, which was dropped from the spec.</li>\r\n</ul>\r\n\r\nAll
    three solutions \u201Cco-existed peacefully\u201D in the monochrome font world.
    \r\n\r\nThe GOO proposal plugs directly into the embedded bitmaps mechanism, but
    extends it with color. \r\n\r\nThe MIC proposal extends the \u201Cglyf\u201D table
    and provides a simple solution for \u201Cflat colors\u201D, but is quite limited
    beyond that. Yet it allows precise hinting. \r\n\r\nThe SVG proposal is a cousin
    of the \u201CCFF \u201D table: it\u2019s technically the most complex, and requires
    a very smart, \u201Cactive\u201D rasterizer. It does not offer hinting but allows
    more complex design solutions than the other proposals. \r\n\r\nI hope that a
    similar \u201Cpeaceful co-existence\u201D can emerge for the color proposals that
    had existed for the monochrome solutions. Each of them has its merits and none
    of them is sufficient by its own. \r\n\r\n<strong><em>Support by FontLab apps</em></strong>\r\n\r\nAs
    a tiny bit of self-promotion, I shall add that Fontlab Ltd. will soon be releasing
    a free app for Mac and Windows called <strong>FontLab Pad</strong> which will
    allow users on both OSes to use fonts that implement any of the above proposals
    (currently the APP and MIC formats are implemented but more support is being added
    as we speak). Also, FontLab\u2019s <strong>TransType 4</strong> allows simple
    creation of MIC-compatible fonts through overlaying existing \u201Clayered fonts\u201D
    and assigning each layer a color. TransType can also output APP-compatible fonts
    with the same contents. In combination with FontLab\u2019s <strong>BitFonter 3</strong>,
    TransType 4 can be used to produce sophisticated full-bitmap color fonts in the
    APP-compatible format. \r\n\r\nAt FontLab, we are very happy with this development
    and support it fully. Our upcoming font editors will support multicolor fonts
    natively, with layers and potentially also complex fills, so fonts in all color
    formats (including SVG) can be created. \r\n\r\nBest regards,\r\nAdam Twardoch"
  created: '2013-08-30 11:58:29'
date: '2013-08-19 15:28:49'
title: Color font meetings at TypeCon and ATypI

---
