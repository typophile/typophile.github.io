<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Build: Handwriting OT font contextual troubles | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Build: Handwriting OT font contextual troubles" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/9949/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2005-03-25T05:17:27+00:00" />
<meta property="article:modified_time" content="2005-03-25T05:17:27+00:00" />

<meta itemprop="name" content="Build: Handwriting OT font contextual troubles">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2005-03-25T05:17:27+00:00" />
<meta itemprop="dateModified" content="2005-03-25T05:17:27+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Build: Handwriting OT font contextual troubles"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Build: Handwriting OT font contextual troubles</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2005-03-25T05:17:27Z">March 25, 2005</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">alan</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">This post really should be in &quot;Build&quot;, but for some reason I'm not allowed to start a topic there. News to me. Anyway &hellip; <!-- raw HTML omitted --> <!-- raw HTML omitted -->Hi everyone, <!-- raw HTML omitted --> <!-- raw HTML omitted -->I'm looking for a little bit of advice on a handwriting font I'm currently working on. The font uses contextual substitution to &quot;flip&quot; through a series of alternates for each glyph, much like LettError's Kosmik, if you're familiar with that. Instead of three variations of each letter, there are nine, but the idea is the same: a kind of controlled randomness (which really isn't random at all). <!-- raw HTML omitted --> <!-- raw HTML omitted -->In addition to the nine variations of each letter, some letters have up to three initial forms and/or up to three final forms. There are also quite a few ligatures, which themselves may have initial and final forms. The ligatures are always constructed of only two letters, no more. <!-- raw HTML omitted --> <!-- raw HTML omitted -->One last detail about the design of the font: it is unicase, so I'm converting all uppercase input to lowercase, for simplicity. <!-- raw HTML omitted --> <!-- raw HTML omitted -->**** Skip down to the next section if you already know how Kosmik works **** <!-- raw HTML omitted --> <!-- raw HTML omitted -->Here's how it works: <!-- raw HTML omitted --> <!-- raw HTML omitted -->First I ask the font to convert all of the letter combinations that will *always* result in a ligature (that is, there are at least nine variations of that ligature). These combinations are: en, er, ju, on, or, te, th, tt. This is contained in the 'liga' feature. <!-- raw HTML omitted --> <!-- raw HTML omitted -->Then I ask the font to begin swapping alternates, using the 'calt' feature. Each glyph belongs to a class of glyphs. There are nine alternates of each letter, so each of the nine glyphs gets put into a separate class. All of the &quot;default&quot; glyphs get put in the &quot;SET_ZERO&quot; class; all of the glyphs ending in &quot;.alt1&quot; get put into the &quot;SET_ONE&quot; class; glyphs ending in &quot;.alt2&quot; are put in the &quot;SET_TWO&quot; class, and so forth. <!-- raw HTML omitted --> <!-- raw HTML omitted -->My 'calt' feature says this: <!-- raw HTML omitted --> <!-- raw HTML omitted --># first, get rid of all that nasty uppercase stuff <!-- raw HTML omitted -->	sub @UPPERCASE by @LOWERCASE; <!-- raw HTML omitted --> <!-- raw HTML omitted --># then use the same method that Kosmik uses to &quot;flip&quot; through classes glyphs <!-- raw HTML omitted -->	sub @SET_ZERO @SET_ZERO' by @SET_ONE; <!-- raw HTML omitted -->	sub @SET_ONE @SET_ZERO' by @SET_TWO; <!-- raw HTML omitted -->	sub @SET_TWO @SET_ZERO' by @SET_THREE; <!-- raw HTML omitted -->	sub @SET_THREE @SET_ZERO' by @SET_FOUR; <!-- raw HTML omitted -->	sub @SET_FOUR @SET_ZERO' by @SET_FIVE; <!-- raw HTML omitted -->	sub @SET_FIVE @SET_ZERO' by @SET_SIX; <!-- raw HTML omitted -->	sub @SET_SIX @SET_ZERO' by @SET_SEVEN; <!-- raw HTML omitted -->	sub @SET_SEVEN @SET_ZERO' by @SET_EIGHT; <!-- raw HTML omitted --> <!-- raw HTML omitted -->So, if a user types &quot;mmmmm&quot;, they will actually get &quot;m m.alt1 m.alt2 m.alt3 m.alt4&quot;. This should be nothing new to many of you. <!-- raw HTML omitted --> <!-- raw HTML omitted -->Please note that the line: <!-- raw HTML omitted -->	sub @SET_EIGHT @SET_ZERO' by @SET_ZERO; <!-- raw HTML omitted -->is omitted, because returning to the original set is understood implicitly. <!-- raw HTML omitted --> <!-- raw HTML omitted -->Every time the user types a glyph, the font looks back at the last glyph, figures out what class it belongs to, and uses that information to determine which variant of the next glyph to place down (at least, that's how I think of it). Even the space character is included in this merry-go-round (yes, there are nine variations of the space character). That way, typing &quot;yes yes yes&quot; won't result in the same three glyphs appearing over and over. <!-- raw HTML omitted --> <!-- raw HTML omitted -->**** This is the next section, welcome back **** <!-- raw HTML omitted --> <!-- raw HTML omitted -->Thanks for your patience if you've gotten this far. Now I'll try to describe some of the issues I've run across. <!-- raw HTML omitted --> <!-- raw HTML omitted -->In order for the flipping to work correctly, every single glyph needs to belong to one of the nine classes (SET_ZERO through SET_EIGHT). That way, when the next letter is layed down, the font knows which version to use by looking at the class of the last glyph. If there were a glyph that ended up on the page which did not belong to any of the nine classes, the next glyph would have no point of reference, and would default to the first variant of that letter. This could have the inconceivably catastrophic effect of the same glyph appearing twice within a relatively small proximity!!!! AAAAAAAAAAHHHH!! <!-- raw HTML omitted --> <!-- raw HTML omitted -->It's something I'd like to avoid. The problem is that not all of the ligatures have nine variations. I have a &quot;tz&quot; ligature that only exists in one form. I can easily write a lookup that says, &quot;whenever an 'a.alt5' is followed by a 't.alt6' and then a 'z.alt7', replace the 't' and 'z' with 't_z', unless it's at the end of a word&quot;. And so forth. These specific cases are tedious, but simple to write, as shown in the Bickham Script feature file that Adobe released recently. <!-- raw HTML omitted --> <!-- raw HTML omitted -->But! The &quot;tz&quot; ligature must belong to one of the nine classes so the flipping can continue undisturbed. But there is only *one* &quot;tz&quot; ligature, and the classes used for flipping must each contain the same number of glyphs, or flipping is not allowed! <!-- raw HTML omitted --> <!-- raw HTML omitted -->It's the same case for initial and final forms: not all letters have three of each, but the glyphs all have to belong to a specific class, and the classes cannot have different numbers of glyphs contained within them. <!-- raw HTML omitted --> <!-- raw HTML omitted -->One way to simplify things would be to create the same number of alternates, initials, and finals for every single letter that can be typed with this font. That would eliminate the need to worry about differing numbers of alternates and specifying certain cases where they can and cannot appear. However, this is a handwriting font created from an actual handwriting sample, and making lots of extra letters and ligatures that are convincing is a non-trivial task. I'm willing to do it, if there isn't a way of resolving these issues with OT features. <!-- raw HTML omitted --> <!-- raw HTML omitted -->I'm hoping to work out all the OT features *before* cleaning up the auto-traced characters and tidying up the font, so right now the font is just a cesspool of mismatched character shapes and sizes and weights, with an external text file serving as my underground mad-scientist OT laboratory. <!-- raw HTML omitted --> <!-- raw HTML omitted -->If anyone has any insight, I would greatly appreciate it. <!-- raw HTML omitted --> <!-- raw HTML omitted -->Thanks, <!-- raw HTML omitted -->Alan</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">hmmm, i'm in no means an expert at this, but here's a bit of code i wrote trying to do something similar, except i only had 2 alternates for lower case letters that switched off with eachother. <!-- raw HTML omitted --> <!-- raw HTML omitted -->feature calt { <!-- raw HTML omitted -->  sub @class0 @class0' by @class1; <!-- raw HTML omitted -->  sub @class1 @class1' by @class0; <!-- raw HTML omitted -->  sub @class0 space @class0' by @class1; <!-- raw HTML omitted -->  sub @class1 space @class1' by @class0; <!-- raw HTML omitted -->  sub @class0 space @UC @class0' by @class1; <!-- raw HTML omitted -->  sub @class1 space @UC @class1' by @class0; <!-- raw HTML omitted -->} calt; <!-- raw HTML omitted --> <!-- raw HTML omitted -->one thing in here is that i didn't make 2 variations of the space character, but wrote code to &quot;skip over&quot; the space character. This should work for your t_z lig too just make a class of characters that only have one form and place them in the code above where it says &quot;space&quot;. But it's late and maybe that won't really work&hellip; <!-- raw HTML omitted -->Also, it's too late for me to think this through, but what happens if you put the t_z lig in every set? <!-- raw HTML omitted -->okay, i'll go to bed and let the pros sort out the confusion i caused in the morning. nite!</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-03-25 06:18:01"
			itemprop="datePublished"
		>
			2005-03-25 06:18:01
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>pablohoney77</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">If that t_z lig is the only problem glyph, you could always have 9 different versions of it. Sure, they all *look* the same, but that would make the substitutions work cleanly. <!-- raw HTML omitted --> <!-- raw HTML omitted -->T</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-03-25 07:36:57"
			itemprop="datePublished"
		>
			2005-03-25 07:36:57
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Thomas Phinney</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Yes, I could make 9 versions of the t_z, but that is one of 30-some ligatures that don't have 9 versions yet. So that's a bit of added work, and on a philosophical level it's not ideal for what I'm doing. But I think that's a very reasonable suggestion, and would save my brain a bit of work, if not my hands. <!-- raw HTML omitted --> <!-- raw HTML omitted -->As for including the t_z and other ligatures in every glyph class, I don't really think that would work. The OT font is not saying, &quot;does t_z belong to SET_FOUR? &hellip; yes&quot;. It's saying, &quot;which class does t_z belong to? &hellip; um, all of them?&quot; So I don't think that will be the best solution in this case. <!-- raw HTML omitted --> <!-- raw HTML omitted -->Thanks for your feedback!</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-03-28 19:05:33"
			itemprop="datePublished"
		>
			2005-03-28 19:05:33
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>alan</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thread to be moved to the BUILD area.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-03-28 19:24:31"
			itemprop="datePublished"
		>
			2005-03-28 19:24:31
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Miss Tiffany</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
