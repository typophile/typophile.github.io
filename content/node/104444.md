---
author:
  name: adiabatic
  picture: 126727
body: "I'm still trying to wrap my head around the <a href='http://www.adobe.com/devnet/opentype/afdko/topic_feature_file_syntax.html#7.a'>OpenType
  Layout Algorithm</a>. Here's what I have currently, largely adapted from <a href='http://pecita.eu/'>Pecita</a>
  and <a href='http://pecita.net/otfpoc/calt-en.xhtml'>OTFPOC</a>:\r\n\r\n<code><pre>lookup
  calt_pass_1 {\r\n    \r\n    sub @can_2s'    lookup plain_to_2s\r\n        @can_s2'
  \   lookup plain_to_s2;\r\n\r\n    sub @can_s2'    lookup plain_to_s2\t# matched
  in [roe][it] \r\n        @can_2s'    lookup plain_to_2s;\r\n\r\n\r\n    sub @can_2b'
  \   lookup plain_to_2b\r\n        @can_b2'    lookup plain_to_b2;\r\n\r\n    sub
  @can_b2'    lookup plain_to_b2\r\n        @can_2b'    lookup plain_to_2b;\r\n    \r\n}
  calt_pass_1;\r\n</pre></code>\r\n\r\nI'm trying to figure out what happens when
  this sort of thing is applied to an arbitrarily long text string. I'm making a script
  font for <a href='http://www.frogorbits.com/qs/manual.pdf'>Quikscript (3 MB PDF)</a>,
  and I'd like to be able to correctly represent the highly-ligated Senior Quikscript
  when 'calt' is turned on. If you'd like to see Quikscript, both Junior and Senior
  in action, turn to the antepenultimate page of the manual. Note that Senior Quikscript
  has a <em>lot</em> of abbreviations that're in use in the \"As written in\" section;
  you may want to have a look at the last word on the page, which is \"impossible\"
  written with only one penlift.\r\n\r\nQuestions:\r\n\r\n<ul>\r\n<li>If I apply calt_pass_1
  to a four-letter string, letters 2 and 3 won't shape each other. How do I design
  subs/lookups so the middle letters can affect each other, as well as the letters
  they're already (maybe) connected to? As I've written things <a href='https://github.com/adiabatic/abbots-morton-experiment'>in
  my font</a>, I can't guarantee that <a href='https://gist.github.com/adiabatic/5950411#file-ame-fea-L149'>a
  second pass</a> will start at the second string instead of the first if there's
  nothing to change about the first character in the string.\r\n<li>Words with an
  odd number of letters occur frequently. How can I design my subs so I'm guaranteed
  to be able to change them too if I'm subbing letters two at a time?\r\n</ul>\r\n\r\n<em>Please</em>
  chime in if I'm not being clear; I've tried to strip out some detail that depends
  on knowing how Senior Quikscript letters are formed. If it'll help, I'll be more
  than happy to draw pictures of what things should look like."
comments:
- author:
    name: agisaak
    picture: 115092
  body: "Without including definitions for the classes and lookups referenced in the
    above code, it's difficult to comment on this.\r\n\r\nAndr\xE9"
  created: '2013-07-09 05:24:30'
- author:
    name: adiabatic
    picture: 126727
  body: "Whoops \u2014 that was in the first draft of this post, but not the one I
    actually posted. <a href='https://gist.github.com/adiabatic/5950411'>Here's the
    whole .fea file</a>. This file is generated by <a href='https://github.com/adiabatic/abbots-morton-experiment/blob/d5cc29959558c79477033a103932f2c7a6022445/generate-calt.py'>generate-calt.py</a>,
    which uses data described in <a href='https://github.com/adiabatic/abbots-morton-experiment/blob/08b7effde17905cf1bbb355d6a6414da52078f26/glyphinfo.yaml'>glyphinfo.yaml</a>."
  created: '2013-07-09 20:15:43'
date: '2013-07-09 02:28:46'
title: Understanding the OpenType Engine Layout Algorithm

---
