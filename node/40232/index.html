<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Macro - Copy to Composites | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="Macro - Copy to Composites" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/40232/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2007-12-20T11:20:58+00:00" />
<meta property="article:modified_time" content="2007-12-20T11:20:58+00:00" />

<meta itemprop="name" content="Macro - Copy to Composites">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2007-12-20T11:20:58+00:00" />
<meta itemprop="dateModified" content="2007-12-20T11:20:58+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Macro - Copy to Composites"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <div class="float-right">
 
    <a class="text-decoration-none share facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2ftypophile.github.io%2fnode%2f40232%2f"><i class="bi bi-facebook"></i></a> 
    
    <a class="text-decoration-none share twitter" href="https://twitter.com/intent/tweet?text=title&amp;url=http%3a%2f%2ftypophile.github.io%2fnode%2f40232%2f&amp;"><i class="bi bi-twitter"></i></a> 
    
    <a class="text-decoration-none share linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2ftypophile.github.io%2fnode%2f40232%2f&amp;source=http%3a%2f%2ftypophile.github.io%2fnode%2f40232%2f/"><i class="bi bi-linkedin"></i></a>
 </a>
</div>

    <h1 class="post-title p-name" itemprop="name headline">Macro - Copy to Composites</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2007-12-20T11:20:58Z">December 20, 2007</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:RachelR">
            RachelR
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>Hi all,</p>
<p>I&rsquo;m to write a script to use with RoboFab that will work like the fontlab function &ldquo;Copy to composites&rdquo; from the preview window when a glyph is used in other composites.</p>
<p><img src="/images/old-images/Picture-1_3595.gif" alt=""></p>
<p>This fiunction works fine but I was trying to produce something that would update all the metrics in composites in on go without having to go through each glyph.</p>
<p>I thought something like this might work,
<code>
#&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;
#UPDATE COMPONENT METRICS
#&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;
from robofab.world import CurrentFont
f = CurrentFont()</p>
<p>f[&lsquo;Itilde&rsquo;].leftMargin = f[&lsquo;I&rsquo;].leftMargin
f[&lsquo;Imacron&rsquo;].leftMargin = f[&lsquo;I&rsquo;].leftMargin
f[&lsquo;Ibreve&rsquo;].leftMargin = f[&lsquo;I&rsquo;].leftMargin
f[&lsquo;Iacute&rsquo;].leftMargin = f[&lsquo;I&rsquo;].leftMargin
f[&lsquo;Icircumflex&rsquo;].leftMargin = f[&lsquo;I&rsquo;].leftMargin
f[&lsquo;Idieresis&rsquo;].leftMargin = f[&lsquo;I&rsquo;].leftMargin
f[&lsquo;Igrave&rsquo;].leftMargin = f[&lsquo;I&rsquo;].leftMargin
f[&lsquo;Idotaccent&rsquo;].leftMargin = f[&lsquo;I&rsquo;].leftMargin
f[&lsquo;Itilde&rsquo;].rightMargin = f[&lsquo;I&rsquo;].rightMargin
f[&lsquo;Imacron&rsquo;].rightMargin = f[&lsquo;I&rsquo;].rightMargin
f[&lsquo;Ibreve&rsquo;].rightMargin = f[&lsquo;I&rsquo;].rightMargin
f[&lsquo;Iacute&rsquo;].rightMargin = f[&lsquo;I&rsquo;].rightMargin
f[&lsquo;Icircumflex&rsquo;].rightMargin = f[&lsquo;I&rsquo;].rightMargin
f[&lsquo;Idieresis&rsquo;].rightMargin = f[&lsquo;I&rsquo;].rightMargin
f[&lsquo;Igrave&rsquo;].rightMargin = f[&lsquo;I&rsquo;].rightMargin
f[&lsquo;Idotaccent&rsquo;].rightMargin = f[&lsquo;I&rsquo;].rightMargin</p>
<p>f.update()</p>
</code>
<p>This produces sidebearings including the added accents in the case of the Itilde, Imacron etc.</p>
<p>When using the Copy to Composites function in FL it produces the correct sidebearings with the accents, as can be seen with the measurement line.</p>
<p>What I wanted is someway of applying the copy to composites function to all composites.</p>
<p><img src="/images/old-images/Picture-2_4690.gif" alt=""></p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>A quicker way is to rebuild your accented glyphs with the f.generateGlyph() method since it will copy the metrics of the baseglyph. Just select the glyphs you want to update and run this script:</p>
<code>
#FLM: Build accents
<p>from robofab.world import CurrentFont, CurrentGlyph
from robofab.interface.all.dialogs import ProgressBar</p>
<p>f = CurrentFont()</p>
<p>def buildAccents(f, g):
&ndash;&gt; f.generateGlyph(g.name, replace=True, printErrors=True)
&ndash;&gt; g.update()</p>
<p>if f:
&ndash;&gt; if f.selection:
&ndash;&gt; &ndash;&gt; l = f.selection
&ndash;&gt; else:
&ndash;&gt; &ndash;&gt; l = f.keys()
&ndash;&gt; bar = ProgressBar(&lsquo;Building accents&hellip;&rsquo;, len(l))
&ndash;&gt; for n in l:
&ndash;&gt; &ndash;&gt; g = f[n]
&ndash;&gt; &ndash;&gt; buildAccents(f, g)
&ndash;&gt; &ndash;&gt; bar.tick()
&ndash;&gt; bar.close()
&ndash;&gt; print &ldquo;Accents for glyphs &quot; + str(l) + &quot; built&rdquo;
&ndash;&gt; f.update()
&ndash;&gt; print &quot;&quot;
</code>
(replace the arrows with a tab to get proper Python syntax)</p>
<p>:)</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-12-20 12:14:31"
			itemprop="datePublished"
		>
			2007-12-20 12:14:31
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:pvanderlaan">
            pvanderlaan
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>but robofab&rsquo;s accent builder assumes the designer is using <a href="http://typophile.com/node/39404">anchors</a>, right?</p>
<p>;-)</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-12-20 16:11:58"
			itemprop="datePublished"
		>
			2007-12-20 16:11:58
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:gferreira">
            gferreira
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Yes, this RoboFab method requires the use of anchors. Which I think is almost vital if you&rsquo;re dealing with many accented glyphs.</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2007-12-21 12:32:55"
			itemprop="datePublished"
		>
			2007-12-21 12:32:55
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:pvanderlaan">
            pvanderlaan
	    </a>
			</span></span>
	</div>
	
</div>
 
  <p class="text-end"><a class="text-secondary" href="https://github.com/typophile/typophile.github.io/edit/main/content/node/40232.md">Suggest an edit</a></p>

</article>

    </main>
    
  </body>
</html>
