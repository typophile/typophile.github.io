<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Grouping zeros: OpenType ligature substitutions right to left | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="Grouping zeros: OpenType ligature substitutions right to left" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/122993/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2015-02-01T12:01:08+00:00" />
<meta property="article:modified_time" content="2015-02-01T12:01:08+00:00" />

<meta itemprop="name" content="Grouping zeros: OpenType ligature substitutions right to left">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2015-02-01T12:01:08+00:00" />
<meta itemprop="dateModified" content="2015-02-01T12:01:08+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Grouping zeros: OpenType ligature substitutions right to left"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Grouping zeros: OpenType ligature substitutions right to left</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2015-02-01T12:01:08Z">February 1, 2015</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:itu">
            itu
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>Is it possible to do ligature substitutions right to left in OpenType?</p>
<p>I&rsquo;m working on a special monospaced typeface with ligatures, you can check it out [[https://github.com/i-tu/Hasklig/|here]].</p>
<p>I&rsquo;m trying to separate zeros in groups of three with a ligature. Examples: 1000000 -&gt; 1 000 000, and 10000 -&gt; 10 000. The substitution should be done right to left, or otherwise the 10000 becomes 1 000 0, as with the following code:
<code>
feature liga {
sub zero zero zero by zero_zero_zero;
}
</code></p>
<p>I&rsquo;d also appreciate information on how one would use kerning rules in a situation like this, though I&rsquo;m not sure if they would apply to a monospaced typeface.</p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Working link: <a href="https://github.com/i-tu/Hasklig/">https://github.com/i-tu/Hasklig/</a></div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2015-02-01 15:06:43"
			itemprop="datePublished"
		>
			2015-02-01 15:06:43
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:riccard0">
            riccard0
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>You can use contextual substitutions to replace a zero, or a digit, with a variant; for instance a digit followed by three digits but not a fourth can be replaced by a digit with a larger right side bearing. Knowing that lookups are applied on the input line one after the other, that gives the impression that the processing is right to left though it is not. Here is some code that I just checked in FontForge and that groups digits in groups of three.</p>
<PRE>
@dgt    = [\zero \one \two \three \four 
          \five \six \seven \eight \nine] ;
@dgtrsp = [\zero.rsp \one.rsp \two.rsp \three.rsp 
          \four.rsp \five.rsp \six.rsp 
          \seven.rsp \eight.rsp \nine.rsp ] ; 

lookup addspace1 {
   ignore sub @dgt' @dgt @dgt @dgt @dgt ; 
   sub @dgt' @dgt @dgt @dgt by @dgtrsp ;
} addspace1 ;

lookup addspace2 {
	sub @dgt' @dgt @dgt @dgtrsp by @dgtrsp ;
} addspace2 ;

lookup addspace3 {
	sub @dgt' @dgt @dgt @dgtrsp by @dgtrsp ;
} addspace3 ;

lookup addspace4 {
	sub @dgt' @dgt @dgt @dgtrsp by @dgtrsp ;
} addspace4 ;

feature calt {
   script DFLT;
     language dflt ;
	lookup addspace1 ;
	lookup addspace2 ;
	lookup addspace3 ;
	lookup addspace4 ;
   script latn ;
     language dflt;
	lookup addspace1 ;
	lookup addspace2 ;
	lookup addspace3 ;
	lookup addspace4 ;
} calt ;
</PRE>
<p>Of course, if you wanted to group digits after the decimal point, you would consider left contexts and use digits with a large left side bearing instead.</p>
<p>It was assumed above that the glyph zero.rsp is the glyph zero with a right side bearing increased by some constant value and similarly for other .rsp glyphs. It is also possible to keep all .rsp digits the same width as  digits and then to add a kerning equal to that constant value (for you, the character widths) between the .rsp digits and the digits; that has the same visual effect.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2015-02-02 00:52:39"
			itemprop="datePublished"
		>
			2015-02-02 00:52:39
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Michel&#43;Boyer">
            Michel Boyer
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
