<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Robofab script to address Multiple Masters | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Robofab script to address Multiple Masters" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/67809/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2010-02-25T14:56:44+00:00" />
<meta property="article:modified_time" content="2010-02-25T14:56:44+00:00" />

<meta itemprop="name" content="Robofab script to address Multiple Masters">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2010-02-25T14:56:44+00:00" />
<meta itemprop="dateModified" content="2010-02-25T14:56:44+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Robofab script to address Multiple Masters"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Robofab script to address Multiple Masters</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2010-02-25T14:56:44Z">February 25, 2010</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">RachelR</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>Hi all</p>
<p>Is it possible for a Robofab script to affect all the masters in a Multiple master font ?</p>
<p>I have a MM font with a Light and a Bold Master. I&rsquo;m kerning this fonts and to speed thing up slightly I wrote this little script to transfer the kerning amount to glyph pairs with the same shape. The script works but only on the light master - is it possible to haveit work on both masters.</p>
<code>
from robofab.world import CurrentFont
f = CurrentFont()
kerning = f.kerning
#
OA = kerning[('O','A')]
AO = kerning[('A','O')]
OV = kerning[('O','V')]
VO = kerning[('V','O')]
OW = kerning[('O','W')]
WO = kerning[('W','O')]
OY = kerning[('O','Y')]
YO = kerning[('Y','O')]
OX = kerning[('O','X')]
XO = kerning[('X','O')]
OT = kerning[('O','T')]
TO = kerning[('T','O')]
KO = kerning[('K','O')]
#
#
kerning[('A','C')] = kerning[('A','G')] = kerning[('A','Q')] = kerning[('A','OE')] = AO
kerning[('D','A')] = kerning[('Q','A')] = OA
#
kerning[('V','C')] = kerning[('V','G')] = kerning[('V','Q')] = kerning[('V','OE')] = VO
kerning[('D','V')] = kerning[('Q','V')] = OV
#
kerning[('W','C')] = kerning[('W','G')] = kerning[('W','Q')] = kerning[('W','OE')] = WO
kerning[('D','W')] = kerning[('Q','W')] = OW
#
kerning[('Y','C')] = kerning[('Y','G')] = kerning[('Y','Q')] = kerning[('Y','OE')] = YO
kerning[('D','Y')] = kerning[('Q','Y')] = OY
#
kerning[('X','C')] = kerning[('X','G')] = kerning[('X','Q')] = kerning[('X','OE')] = XO
kerning[('D','X')] = kerning[('Q','X')] = OX
#
kerning[('D','T')] = kerning[('Q','T')] = OT
kerning[('T','C')] = kerning[('T','Q')] = TO
#
kerning[('K','C')] = kerning[('K','G')] = kerning[('K','Q')] = kerning[('K','OE')] = KO
#
#
f.update()
print "UpperUpperKern Done"
</code></div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I could be wrong, but AFAIK when you handle the kerning through Robofab you can only control the values of the first master. The kerning value amounts of the remaining masters will be the same as the first master. Therefore, you might have to use [[http://robofab.org/howto/lowlevel.html|Robofab&rsquo;s naked() method]] and go from there, or use FontLab&rsquo;s API&rsquo;s all the way.</p>
<p>I&rsquo;ve wrote several scripts for FL that handle MM kerning, and I can tell you things can be complicated. The kerning values reside in something that looks like a list, and are associated with the left glyph of the pair.</p>
<p>Imagine a 2-master font with only one kerning pair AV, with a kerning value of -50 for the first master, and -80 for the second. If you do,
<code>print fl.font[&lsquo;A&rsquo;].kerning[0].values</code>
you&rsquo;ll get <code>[-50,-80]</code>.</p>
<p>The difficulties start when you try to modify the values or add new pairs.</p>
<p>The list of kerning pairs is read-only, so this will fail,
<code>fl.font[&lsquo;A&rsquo;].kerning[0].values = [-10, -30]</code>
but you can change the values one by one, like so,
<code>fl.font[&lsquo;A&rsquo;].kerning[0].values[0] = -10
fl.font[&lsquo;A&rsquo;].kerning[0].values[1] = -30</code></p>
<p>And to copy the values of one pair to another pair, you first need to create that pair (if it doesn&rsquo;t exist already), 
<code>defaultKerningValue = -1
rightGlyphID = fl.font.FindGlyph(&lsquo;T&rsquo;)
pair = KerningPair(rightGlyphID, defaultKerningValue)
fl.font[&lsquo;A&rsquo;].kerning.append(pair)</code>
and then go through the values and modify them accordingly.</p>
<p>Again, handling MM kerning is not trivial. You might be better off saving AFM files, modifying them and reading back in. But that process is not 100% reliable sometimes, so proceed with care.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-25 21:15:16"
			itemprop="datePublished"
		>
			2010-02-25 21:15:16
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Miguel Sousa</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Rachel, what your script is trying to to can be handled by <em>class kerning</em> much easier. No coding necessary.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-25 21:39:09"
			itemprop="datePublished"
		>
			2010-02-25 21:39:09
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Jens Kutilek</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Very good point Jens.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-25 23:28:07"
			itemprop="datePublished"
		>
			2010-02-25 23:28:07
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Miguel Sousa</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">You may be better off writing a single script that has a global variable defining the master. So run it once with the value 0 for light master, and then 1 for the next and so on. I&rsquo;ve several scripts that I use on fonts with 7+ masters and this works fine, but I also don&rsquo;t do kerning within FontLab so I&rsquo;m not 100% sure this will work for what you are doing.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-25 23:44:11"
			itemprop="datePublished"
		>
			2010-02-25 23:44:11
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>aida</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
