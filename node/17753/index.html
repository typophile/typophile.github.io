<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Questions regarding the OFA specification | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Questions regarding the OFA specification" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/17753/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2006-02-07T00:40:08+00:00" />
<meta property="article:modified_time" content="2006-02-07T00:40:08+00:00" />

<meta itemprop="name" content="Questions regarding the OFA specification">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2006-02-07T00:40:08+00:00" />
<meta itemprop="dateModified" content="2006-02-07T00:40:08+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Questions regarding the OFA specification"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Questions regarding the OFA specification</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2006-02-07T00:40:08Z">February 7, 2006</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">nickshanks</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">I can't find a specification for the Open Font Architecture anywhere (!) but I am kind of making things up as I go along by examination and copying, and published specs for OFA implementations such as TrueType and OpenType.
I have two questions that remain though:

1) Do tables have to be aligned on four byte word boundaries?
2) Is there any reason why tables are output in a specific order, yet given in a different order in the table listing at the start of the file? e.g. in the Apple Symbols font the header gives the tables in this order: LTSH, OS/2, VDMX, cmap, ... but by offset in the file the tables are ordered hmtx, fpgm, prep, loca, glyf, ...

Thanks for any insight,
– Nicholas</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">You may want to look at Recommendaations for OpenType fonts(<a>http://www.microsoft.com/typography/otspec/recom.htm</a>).

There is no strict requirement on table alignment and ordering in the OpenType format. However it is recommended to have them 4-byte aligned and padded with zeroes to 4-byte boundary. Form the page above:

<cite>
Table Alignment and Length

All tables should be aligned to begin at offsets which are multiples of four bytes. While this is not required by the TrueType rasterizer, it does prevent ambiguous checksum calculations and greatly speeds table access on some processors. 

All tables should be recorded in the table directory with their actual length. To ensure that checksums are calculated correctly, it is suggested that tables begin on LONG word boundries. Any extra space after a table (and before the next LONG word boundry) should be padded with zeros. 
</cite>

Physical order of tables in the font does not depend at all on alphabetical order of tables in the font header. Table ordering recommendations are based on the order in which operating system typically read font data. Grouping some tables together really does (or at least did) significantly speed up font loading time. Recommended order is (from the same page):

<cite>
Optimized Table Ordering

OpenType fonts with TrueType outlines are more efficient in the Windows operating system when the tables are ordered as follows (from first to last):

head, hhea, maxp, OS/2, hmtx, LTSH, VDMX, hdmx, cmap, fpgm, prep, cvt, loca, glyf, kern, name, post, gasp, PCLT, DSIG

The initial loading of an OpenType font containing CFF data will be more efficiently handled if the following sfnt table ordering is used within the body of the sfnt (listed from first to last):

head, hhea, maxp, OS/2, name, cmap, post, CFF, (other tables, as convenient)

</cite>

Hope this will help.

Thanks,
Sergey
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-07 02:41:37"
			itemprop="datePublished"
		>
			2006-02-07 02:41:37
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>sergeym</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
