<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Kerning Macro, Fontlab API | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Kerning Macro, Fontlab API" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/95379/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2012-08-07T09:18:43+00:00" />
<meta property="article:modified_time" content="2012-08-07T09:18:43+00:00" />

<meta itemprop="name" content="Kerning Macro, Fontlab API">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2012-08-07T09:18:43+00:00" />
<meta itemprop="dateModified" content="2012-08-07T09:18:43+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Kerning Macro, Fontlab API"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Kerning Macro, Fontlab API</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2012-08-07T09:18:43Z">August 7, 2012</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">RachelR</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">Hi all

I wrote this Robofab macro to copy kerning from one pair to others.

I am using Class kerning put I kern OAO and then use the macro to copy those values to AC, AG, AQ etc.

It speeds the process up and ensures I don't miss pairs

#Upper/UpperKern---------------
#
from robofab.world import CurrentFont
f = CurrentFont()
kerning = f.kerning
#
if kerning[('A','O')]:
	AO = kerning[('A','O')]
	kerning[('A','C')] = kerning[('A','G')] = kerning[('A','Q')] = kerning[('A','OE')] = AO

if kerning[('O','A')]:
	OA = kerning[('O','A')]
	kerning[('D','A')] = kerning[('Q','A')] = OA

… …

Problem with this macro is it doesn't work with MM fonts. The value from one master is copied to the other.

The value for 'AO' could be different across masters but the macro copies the same value to both masters.

The Fontlab API KerningPair class says it's MM compatible but doesn't give any examples of how to use it.

http://e-font.de/flpydoc/

Does anyone know how I could use FL's API to copy the value of kerning pairs to other pairs.
</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">You are using Robofab for your macro, so you’d want to look at the Robofab docs rather than the FontLab API: http://www.robofab.org/objects/kerning.html

I’m not sure if Robofab handles MultipleMaster VFBs.

Another solution would be to simply put C, G, Q, Œ etc. in the right side kerning class for O ;)</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-08-07 11:50:15"
			itemprop="datePublished"
		>
			2012-08-07 11:50:15
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Jens Kutilek</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Robofab doesn't handle kerning in MM fonts, I think Fontlab API does.

My macro was done using Robofab but I would like to do the same thing with FL API.

I could do the class thing but it wouldn't fit in with my work flow.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-08-07 12:14:52"
			itemprop="datePublished"
		>
			2012-08-07 12:14:52
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>RachelR</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Here's an example of creating an MM kerning pair using the FontLab Python API: 

<pre>f = fl.font	# Set current font to "f"
g1name = "A"	# First glyph's name is "A"
g2name = "W"	# Second glyph's name is "W"
g1i = f.FindGlyph(g1name)	# Find glyph index for "A" glyph
g2i = f.FindGlyph(g2name)	# Find glyph index for "W" glyph
if g1i > -1 and g2i > -1:	# If both glyphs exist
  g1 = f.glyphs[g1i]		# Assign first glyph object
  kp = KerningPair(g2i)		# Blank kerning pair referring to "W"
  if g1.layers_number == 4: 	# Check if first glyph has 4 masters
    kp.values = [-35, -32, -30, -28]	# Assign values for 4 masters
    g1.kerning.append(kp)	# Add kerning pair to fist glyph</pre>

(It's possible to write this code more efficiently, but this is the "safest" and most verbatim method that should show how it works.)</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-08-07 22:21:24"
			itemprop="datePublished"
		>
			2012-08-07 22:21:24
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>twardoch</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thanks adam, that looks perfect</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-08-08 06:54:30"
			itemprop="datePublished"
		>
			2012-08-08 06:54:30
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>RachelR</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
