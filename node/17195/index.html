<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>Chaining Context Substitution | Typophile Archive</title>
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content>
<meta name=generator content="Hugo 0.91.2">
<meta name=robots content="noindex, nofollow">
<link href=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3 crossorigin=anonymous>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js integrity=sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p crossorigin=anonymous></script>
<meta property="og:title" content="Chaining Context Substitution">
<meta property="og:description" content>
<meta property="og:type" content="article">
<meta property="og:url" content="http://typophile.github.io/node/17195/"><meta property="article:section" content="node">
<meta property="article:published_time" content="2006-01-11T01:48:25+00:00">
<meta property="article:modified_time" content="2006-01-11T01:48:25+00:00">
<meta itemprop=name content="Chaining Context Substitution">
<meta itemprop=description content><meta itemprop=datePublished content="2006-01-11T01:48:25+00:00">
<meta itemprop=dateModified content="2006-01-11T01:48:25+00:00">
<meta itemprop=wordCount content="0">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content="Chaining Context Substitution">
<meta name=twitter:description content>
</head>
<body class="ma0 avenir bg-near-white">
<header>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
<div class=container>
<a class=navbar-brand href=/>Typophile Archive</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
</div>
</nav>
</header>
<main class=pb7 role=main>
<article class=container>
<header class="post-header py-3">
<h1 class="post-title p-name" itemprop="name headline">Chaining Context Substitution</h1>
<p class=text-muted>
<time class="f6 mv4 dib tracked" datetime=2006-01-11T01:48:25Z>January 11, 2006</time>
• <span itemprop=author itemscope itemtype=http://schema.org/Person>
<span class="p-author h-card" itemprop=name>gtrianta</span></span>
</p>
</header>
<div class="post-content e-content" itemprop=articleBody>Hello everyone
I am new to Typophile and this is my first post. I am glad to be here. I have an OpenType features related problem. I want to make the following substitutions:
1 + 0 with a glyph called 1_0
1 + 0 + 0 with a glyph called 1_0_0 and
1 + 0 + 0 + 0 with a glyph called 1_0_0_0
(1 and 0 can be replaced by any digit - see code below)
I work in Fontlab Studio 5 and I at first I wrote the following code:
# glyph classes
@digitsnozero=[one two three four five six seven eight nine];
@digits=[zero one two three four five six seven eight nine];
@twodigits=[X X_X X_X_X X_L L L_X L_X_X L_X_X_X X_C];
@threedigits=[C C_C C_C_C C_C_C_C D D_C D_C_C D_C_C_C D_C_C_C_C];
@fourdigits=[M M_M M_M_M M_M_M_M];
feature liga {
# substitutions for two digits
sub @digitsnozero' @digits by @twodigits;
# substitutions for three digits
sub @digitsnozero' [@digits @twodigits @threedigits] @digits by @threedigits;
# substitutions for four digits
sub [one two three four]' [@digits @twodigits @threedigits]
@digits @digits by @fourdigits;
} liga;
The problem is that when the first rule is activated the other two are ignored. As a result I only get the first substitution (1 + 0 -> 1_0)
I solved the problem by putting each rule in a different feature (the first in onum, the second in smcp and the third in liga - it works).
So now I have the following:
feature onum {
# substitutions for two digits
sub @digitsnozero' @digits by @twodigits;
} onum;
feature smcp {
# substitutions for three digits
sub @digitsnozero' [@digits @twodigits @threedigits] @digits by @threedigits;
} smcp;
feature liga {
# substitutions for four digits
sub [one two three four]' [@digits @twodigits @threedigits] @digits @digits by @fourdigits;
} liga;
I read in the OpenType specification about the Chaining Context Substitution but I did not understand how am I supposed to do it.
Can anyone tell me if I can put all the three rules in one feature (e.g. in a liga feature)? Can I do anything with 'lookup'?
George Triantafyllakos - backpacker.gr</div>
<div class="comment card m-3">
<div class=card-body>
<div class=commentbody>I believe the solution is to reverse the order of your substitutions. Start with the longest (1_0_0_0) and work down.</div>
</div>
<div class="card-footer text-muted post-meta text-end">
<time class=dt-published datetime="2006-01-11 02:04:19" itemprop=datePublished>
2006-01-11 02:04:19
</time>
•
<span itemprop=author itemscope itemtype=http://schema.org/Person>
<span class="p-author h-card" itemprop=name>Mark Simonson</span></span>
</div>
<div class="comment card m-3">
<div class=card-body>
<div class=commentbody>Oh God! It worked ...
I can't believe it was so easy!! (I thought I tried it but I didn't and I 've been trying for the last 6 hours for a solution)
Mark, thank you very much!
George Triantafyllakos - backpacker.gr</div>
</div>
<div class="card-footer text-muted post-meta text-end">
<time class=dt-published datetime="2006-01-11 02:11:47" itemprop=datePublished>
2006-01-11 02:11:47
</time>
•
<span itemprop=author itemscope itemtype=http://schema.org/Person>
<span class="p-author h-card" itemprop=name>gtrianta</span></span>
</div>
</div>
</div>
<div class="comment card m-3">
<div class=card-body>
<div class=commentbody>Writing OT features is a bit of a logic puzzle sometimes. The easy way is not always obvious.</div>
</div>
<div class="card-footer text-muted post-meta text-end">
<time class=dt-published datetime="2006-01-11 02:39:58" itemprop=datePublished>
2006-01-11 02:39:58
</time>
•
<span itemprop=author itemscope itemtype=http://schema.org/Person>
<span class="p-author h-card" itemprop=name>Mark Simonson</span></span>
</div>
</div>
<div class="comment card m-3">
<div class=card-body>
<div class=commentbody>Big hint: With any many-to-one substitutions, the longest string should go first, which is why "ffi" and "ffl" are before "ff", "fi", and "fl". (Which is pretty much the opposite of what happens when you're typing. Which is why you should always write OT code while drunk.)</div>
</div>
<div class="card-footer text-muted post-meta text-end">
<time class=dt-published datetime="2006-01-11 05:08:28" itemprop=datePublished>
2006-01-11 05:08:28
</time>
•
<span itemprop=author itemscope itemtype=http://schema.org/Person>
<span class="p-author h-card" itemprop=name>.</span></span>
</div>
</div>
<div class="comment card m-3">
<div class=card-body>
<div class=commentbody>"Which is why you should always write OT code while drunk"
So that is your secret :-)
ChrisL</div>
</div>
<div class="card-footer text-muted post-meta text-end">
<time class=dt-published datetime="2006-01-12 19:43:23" itemprop=datePublished>
2006-01-12 19:43:23
</time>
•
<span itemprop=author itemscope itemtype=http://schema.org/Person>
<span class="p-author h-card" itemprop=name>dezcom</span></span>
</div>
</div>
</article>
</main>
</body>
</html>