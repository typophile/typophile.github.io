<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>AFDK build font display problem in InDesign CS4 | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="AFDK build font display problem in InDesign CS4" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/59733/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2009-07-07T21:09:43+00:00" />
<meta property="article:modified_time" content="2009-07-07T21:09:43+00:00" />

<meta itemprop="name" content="AFDK build font display problem in InDesign CS4">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2009-07-07T21:09:43+00:00" />
<meta itemprop="dateModified" content="2009-07-07T21:09:43+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="AFDK build font display problem in InDesign CS4"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">AFDK build font display problem in InDesign CS4</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2009-07-07T21:09:43Z">July 7, 2009</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:clauses">
            clauses
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>Hi there
I have a problem with my Adobe FDK build OTF fonts in InDesign CS4. As you can see, the selection of text is only from the x-height down to somewhere below the baseline. And when change the text, it&rsquo;s size or style the space around the black selection does not change/update. Very annoying. What could be wrong?</p>
<p><img src="/images/old-images/error_4719.jpg" alt=""></p>
<p>Thanks,
Claus</p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Perhaps the vertical metrics. Is the font&rsquo;s UPM 1000? Have you ran the font through CompareFamily?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-07 23:28:54"
			itemprop="datePublished"
		>
			2009-07-07 23:28:54
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Miguel&#43;Sousa">
            Miguel Sousa
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">That looks like the caret height and refresh problem resulting from a CFF font having a UPM other than 1000. But I thought that had been fixed in CS3?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-08 00:03:09"
			itemprop="datePublished"
		>
			2009-07-08 00:03:09
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">The UPM is 2048. I haven&rsquo;t run compare family. I will do that tomorrow.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-08 00:21:38"
			itemprop="datePublished"
		>
			2009-07-08 00:21:38
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:clauses">
            clauses
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Okay, just had a look. Compare family gives a 76 KB serving of fail. I had a look with fontQA, and this is what is says:</p>
<p>Vertical Metrics
Test	Message	Details
Y-min	Family Statistic	min: -497, max: -497, rng: 0, avg: -497, sdv: 0
Markant	Y-min	-497
Y-max	Family Statistic	min: 2080, max: 2080, rng: 0, avg: 2080, sdv: 0
Markant	Y-max	2080
UPM	Not all UPM values are matching the required value	1000
Markant	UPM	2048
equal Ascender	All Ascender values are equal.	1490
Markant	Ascender	1490
equal Descender	All Descender values are equal.	-393
Markant	Descender	-393
OS/2-sTypoAscender	All OS/2-sTypoAscender values are matching the calculated value	
Markant	The OS/2-sTypoAscender value matches the required value	OS/2-sTypoAscender: 1490
OS/2-sTypoDescender	All OS/2-sTypoDescender values are matching the calculated value	
Markant	The OS/2-sTypoDescender value matches the required value	OS/2-sTypoDescender: -393
equal OS/2-sTypoLineGap	All OS/2-sTypoLineGap values are equal.	574
Markant	OS/2-sTypoLineGap	574
OS/2-usWinAscent	All OS/2-usWinAscent values are matching the calculated value	2080
Markant	OS/2-usWinAscent	2080
OS/2-usWinDescent	All OS/2-usWinDescent values are matching the calculated value	497
Markant	OS/2-usWinDescent	497
hhea-Ascender	Not all hhea-Ascender values are matching the recommended value	
Markant	The hhea-Ascender value does not match the recommended value	hhea-Ascender: 1490, recommended: 2080
hhea-Descender	Not all hhea-Descender values are matching the recommended value	
Markant	The hhea-Descender value does not match the recommended value	hhea-Descender: -393, recommended: -497
suspect BBox height	The BBox height of all glyphs is in a normal range.	
Markant	The BBox height of all glyphs is in a normal range.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-08 02:25:57"
			itemprop="datePublished"
		>
			2009-07-08 02:25:57
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:clauses">
            clauses
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I&rsquo;ve just tried Adobe Arabic (which is an OT-CFF font with a 2048 UPM) in InDesign CS4 and saw no selection issues.</p>
<p>Claus, run this command:
<code>spot -t head YourFont.otf | grep unitsPerEm</code>
What result do you get? unitsPerEm=2048?</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-08 04:25:46"
			itemprop="datePublished"
		>
			2009-07-08 04:25:46
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Miguel&#43;Sousa">
            Miguel Sousa
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><code>
BigMac:Markant claus$ spot -t head Markant-Regular.otf | grep unitsPerEm
unitsPerEm        =2048
</code>
<p>And damn Typophile won&rsquo;t let me insert an image now, otherwise I could show the vertical metrics from fontQA. That is why I had to paste that illegible mess in the post above.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-08 05:19:04"
			itemprop="datePublished"
		>
			2009-07-08 05:19:04
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:clauses">
            clauses
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I think I found the problem. I&rsquo;m assuming that you&rsquo;re generating the PFA file from FontLab Studio (v5.0.4), yes?</p>
<p>When the font&rsquo;s UPM value is different from 1000, FontLab Studio generates the PFA file with incorrect FontBBox values. The FontBBox values are correctly displayed in the &ldquo;Key dimensions&rdquo; pane of the Font Info dialog; but the values in the generated font will be different.
<img src="/images/old-images/PFA_FBBox_3442.png" alt=""></p>
<p>For quick workaround, just open the PFA file in a text editor and edit the FontBBox values to match what&rsquo;s displayed by the Font Info.</p>
<p>BTW, CompareFamily quickly pointed me to the reason of the problem. <strong>Single Face Test 15</strong> (Warn if Font BBox x/y coordinates are improbable, or differ between head table and CFF) output the following message:
<strong>The font bounding box in the hhea table &lsquo;(-322, -512, 2306, 1798)&rsquo; differs from that in the CFF table &lsquo;[-157, -250, 1126, 878]&rsquo;.</strong></p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-10 00:25:54"
			itemprop="datePublished"
		>
			2009-07-10 00:25:54
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Miguel&#43;Sousa">
            Miguel Sousa
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Hi Miguel
Thanks a lot for looking into this. It halfway worked, now the rendering updates as it should. The only thing is that the selection still looks like before – that is only colouring from the x-height and down to somewhere below the baseline. This is a minor issue, so let&rsquo;s not waste time on pursuing that.</p>
<p>Claus</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2009-07-11 14:40:38"
			itemprop="datePublished"
		>
			2009-07-11 14:40:38
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:clauses">
            clauses
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
