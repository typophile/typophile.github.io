<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Font fallback mechanism: how to extend OFL font with symbols (Unicode) | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Font fallback mechanism: how to extend OFL font with symbols (Unicode)" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/91768/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2012-04-04T11:49:42+00:00" />
<meta property="article:modified_time" content="2012-04-04T11:49:42+00:00" />

<meta itemprop="name" content="Font fallback mechanism: how to extend OFL font with symbols (Unicode)">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2012-04-04T11:49:42+00:00" />
<meta itemprop="dateModified" content="2012-04-04T11:49:42+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Font fallback mechanism: how to extend OFL font with symbols (Unicode)"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Font fallback mechanism: how to extend OFL font with symbols (Unicode)</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2012-04-04T11:49:42Z">April 4, 2012</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">ChrisGr</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">I'm a beginner in Typography (Inkscape and FontForge on Win7x32).  

I try to explain my answer with an example: 
<strong>I like to use the existing OFL font family "PT Sans"</strong> with different styles/weights and also Condensed/Extended variants <strong>for charts and drawings in a project</strong>. But this font-family (like any other good text font) <strong>misses some Unicode symbol chars</strong> (from Unicode-Block Dingbats, Miscellaneous Symbols, etc.) that I need. 
Windows seems to automatically use sometimes weird fallback chars, coming from the installed fonts with extended Unicode support (Segoe UI Symbol, Arial Unicode MS, DejaVu Sans, etc.). Office/Word (Uniscribe?), MS IE (first Uniscribe, now DirectWrite), Firefox (first Uniscribe, now DirectWrite), Chrome (Uniscribe) seem to have sometimes different implementations of this "<strong>font fallback mechanism</strong>". I was unable to find enough information to understand this OS and software behaviour. I'm especially interested if it is possible to edit this mechanism, for example to prescribe the usage of the preferred Unicode font. This would be generally interesting also by using fonts like Linux Liberation/Biolinum. Here some links: 
[[https://en.wikipedia.org/wiki/Fallback_font|Wikipedia: Fallback font]]
[[https://en.wikipedia.org/wiki/Uniscribe|Wikipedia: Uniscribe]]
[[http://msdn.microsoft.com/en-us/library/windows/desktop/dd374105%28v=vs.85%29.aspx|MS Win UI Dev: Using Font Fallback]]
[[http://msdn.microsoft.com/en-us/library/windows/desktop/dd317788(v=vs.85).aspx|MS DirectWrite]]
[[http://blog.mozilla.com/nattokirai/2009/10/05/making-font-initialization-lazier/|Mozilla: Making font initialization lazier]]
[[http://maxradi.us/documents/uniscribe/|Brett Wilson (Google Chrome Dev) / Uniscribe: The Missing Documentation & Examples]]

I think I have two options: 
A) use the PT Sans fonts and modify/extend them with the risk to have to integrate future releases and to make errors as a beginner
B) create a new font with the PT Sans metrics and only the desired Unicode symbols. But the technical background and the fluid usage in texting/graphical software is not clear to me (without the need to change font family for certain characters in the text). 

<strong>Is there more information about the Font fallback mechanism with rare Unicode characters in Windows, especially whether this behavior can be influenced?</strong> 

I hope my question is clear enough and someone here can extend my knowledge about this complex behaviour. Thank you. </div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">No single font can be all things to all people. If the EULA for PT Sans allows you to make modifications for your own use, fine; if not, you'll just to have to live with the limitations and change fonts as needed.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-04-04 16:38:28"
			itemprop="datePublished"
		>
			2012-04-04 16:38:28
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>oldnick</span
			></span
		>
	</div>
	 <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><cite>No single font can be all things to all people.</cite>
That is the reason why I try to add the characters I need to a free quality font. I'm asking how  (way A or B). 

<cite>If the EULA for PT Sans allows you to make modifications for your own use, fine; if not, you'll just to have to live with the limitations and change fonts as needed.</cite>
[[http://en.wikipedia.org/wiki/PT_Sans|PT Sans]] is licenced under the SIL Open Font License 1.1 (OFL) and modifications can be made and also distributed. </div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-04-04 17:11:19"
			itemprop="datePublished"
		>
			2012-04-04 17:11:19
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>ChrisGr</span
			></span
		>
	</div>
	
</div>
 
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">{To Follow}</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-04-04 17:25:49"
			itemprop="datePublished"
		>
			2012-04-04 17:25:49
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>hrant</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">If you're really a beginner, neither option is a guarantee of success: Experience is the best teacher.

However, if you pursue option A, you won't have to re-do kerning and feature building from scratch.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-04-04 18:03:03"
			itemprop="datePublished"
		>
			2012-04-04 18:03:03
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>oldnick</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I have found some more info about [[http://blog.mozilla.com/nattokirai/2011/08/11/directwrite-text-rendering-in-firefox-6/|DirectWrite Text Rendering in Firefox 6]] (interesting, but no info on font fallback)
Rereading [[http://msdn.microsoft.com/en-us/library/windows/desktop/dd371554%28v=vs.85%29.aspx|MSDN > Introducing DirectWrite > Support for International Text]] I found a maybe better describing of the crucial behaviours: 
<cite>Unicode features such as <strong>surrogates</strong>, BIDI, line breaking, and UVS are supported. </cite> In [[http://msdn.microsoft.com/en-us/library/windows/desktop/dd941771%28v=vs.85%29.aspx|this CCP-script]] (to complex for me) there are some comments about surrogates. In [[http://msdn.microsoft.com/en-us/library/windows/desktop/dd374069%28v=vs.85%29.aspx|MSDN Surrogates and Supplementary Characters]] there is some interesting info: <cite>Applications automatically support supplementary characters if they support Unicode and use system controls and standard API functions, such as ExtTextOut and DrawText.</cite>  and there are some registry settings about surrogates. Still I don't understand enough. 

@oldnick: Option B is not a re-creation of the standard characters: only some of the desired characters mainly in Symbol Unicode blocks should be created and integrated. <strong>The core of my question is about the Windows Font fallback mechanism with Unicode characters. I have rewritten my question in the first post. </strong> If I don't get enough information about that, I don't feel to decide what to do. Maybe I have to ask in some programmers/Windows GUI Forum?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-04-04 20:30:47"
			itemprop="datePublished"
		>
			2012-04-04 20:30:47
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>ChrisGr</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Some useful: 
[[http://www.russellcottrell.com/greek/utilities/SurrogatePairCalculator.htm|The Surrogate Pair Calculator etc.]]

I think I have found the crucal infos: 
[[http://msdn.microsoft.com/en-us/library/dd374069|MSDN Surrogates and Supplementary Characters]]
[[http://winvnkey.sourceforge.net/webhelp/winvnkey4.0-english-help.htm#surrogate_fonts.htm|WinVNKey: How To Set Up Surrogate fonts]]
[[http://technet.microsoft.com/en-us/library/cc939627.aspx|TechNet FontSubstitutes]]

I think I go to test editing the registry settings: 
<code>     [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsNT\CurrentVersion\LanguagePack\SurrogateFallback]
Plane1=(Name for fallback font for characters in Plane 1)
Plane2=(Name for fallback font for characters in Plane 2)</code>
and also "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\FontSubstitutes"
If this works well, probably I choose option B). Will report news about my experience here. 
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-04-04 21:43:36"
			itemprop="datePublished"
		>
			2012-04-04 21:43:36
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>ChrisGr</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I'm not quite sure what you're looking for here.  All browsers implement the same basic algorithm for fallback within fonts in a given fontlist.  If you specify <code>font-family: FontA, FontB, sans-serif;</code>, then all browsers will first test FontA for a given character, then FontB, etc.  If <strong>system</strong> fallback occurs (i.e. none of the fonts in your specified fontlist contain a glyph for a given character), then the behavior will vary across browsers.  Chrome used a hard-coded fallback list, IE uses an OS-level fallback routine and Firefox uses a hybrid approach.  But if your goal is to always see a given set of symbols, make a font containing those symbols and include it in your font list.  In that case, fallback will be consistent across browsers.

John Daggett
Mozilla Japan</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-04-10 02:51:26"
			itemprop="datePublished"
		>
			2012-04-10 02:51:26
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>jdaggett</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
