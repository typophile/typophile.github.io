<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#39;locl&#39; Opentype feature sample code | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="&#39;locl&#39; Opentype feature sample code" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/16705/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2005-12-08T22:17:00+00:00" />
<meta property="article:modified_time" content="2005-12-08T22:17:00+00:00" />

<meta itemprop="name" content="&#39;locl&#39; Opentype feature sample code">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2005-12-08T22:17:00+00:00" />
<meta itemprop="dateModified" content="2005-12-08T22:17:00+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="&#39;locl&#39; Opentype feature sample code"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">'locl' Opentype feature sample code</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2005-12-08T22:17:00Z">December 8, 2005</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:ebensorkin">
            ebensorkin
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>I have 3 questions related to the Open type feature &lsquo;locl&rsquo;</p>
<ol>
<li>
<p>It seems that there is no application support for the &lsquo;locl&rsquo; feature yet. Thomas Phinney agrees that there is none in Adobe products ( yet). But is it in Microsoft Vista/longhorn?</p>
</li>
<li>
<p>Henadij posted some locl feature code here:</p>
</li>
</ol>
<p><a href="http://www.typophile.com/node/15506">http://www.typophile.com/node/15506</a></p>
<p>Does anybody know if that code was written correctly? Is there is any sample code for this feature? I have been googling but to no avail.</p>
<ol start="3">
<li>Would anybody share their code? I wanted to build some Polish &amp; Czech localization into a font!</li>
</ol>
<p>Thanks!</p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Eben,</p>
<p>the code Henadij posted is principally correct but it is better to name the glyphs according to the Adobe/FontLab naming conventions: baseglyphname.suffix. Fontlab Ltd. recommends that the suffix for localized forms corresponds either to the primary OpenType feature name that the localized glyph is associated with (that would be &ldquo;locl&rdquo;) or to the OpenType language tag of the primary language that the localized form is associated with (that would be &ldquo;PLK&rdquo; for Polish in Henadij&rsquo;s example).</p>
<p>So if I wrote the code, it would be:</p>
<p>@loclPLK1 = [cacute nacute oacute sacute zacute];
@loclPLK2 = [cacute.PLK nacute.PLK oacute.PLK sacute.PLK zacute.PLK];</p>
<p>feature locl { # Localized Forms
language PLK exclude_dflt; # Polish;
sub @loclPLK1 by @loclPLK2;
} locl;</p>
<p>Alternatively, the glyph names &ldquo;cacute.PLK&rdquo; etc. could be &ldquo;cacute.locl&rdquo;.</p>
<p>Adobe software does not parse the glyph suffixes into anything meaningful yet, but Fontlab Ltd. does plan to have some smart algorithms that takes notion of properly formed glyph name suffixes.</p>
<p>Regards, 
Adam</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-08 23:22:47"
			itemprop="datePublished"
		>
			2005-12-08 23:22:47
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:twardoch">
            twardoch
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Eben, it doesn&rsquo;t hurt to have a locl feature in yout font. And you can also &ldquo;double-up&rdquo; the feature as a Stylistic Set, which will allow present users of InDesign CS2 access to it.</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-09 00:03:04"
			itemprop="datePublished"
		>
			2005-12-09 00:03:04
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:.">
            .
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Adam, Wow! So clearly put &amp; so fast! Awesome.</p>
<p>Chester, can you point me at some feature code for a &lsquo;stylistic set&rsquo;? Is the feature called &lsquo;ss01&rsquo;? Or is it &lsquo;salt?&rsquo; I bet it&rsquo;s ss01 ( ss02, etc) There is probably some discustion of this feature here on typophile. I&rsquo;d better search for it.</p>
<p>Thanks to you both!</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-09 00:18:07"
			itemprop="datePublished"
		>
			2005-12-09 00:18:07
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:ebensorkin">
            ebensorkin
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>ssXX is it. The first one in your font will be ss01. And the way it would look, borrowing Adam&rsquo;s code above:</p>
<p>feature ss01 { # Polish Localized Forms
language PLK exclude_dflt; # Polish;
sub @loclPLK1 by @loclPLK2;
} ss01;</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-09 00:25:04"
			itemprop="datePublished"
		>
			2005-12-09 00:25:04
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:.">
            .
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>So then the complete code would look like this :</p>
<p>@loclPLK1 = [cacute nacute oacute sacute zacute];
@loclPLK2 = [cacute.PLK nacute.PLK oacute.PLK sacute.PLK zacute.PLK];
feature ss01 { # Polish Localized Forms
language PLK exclude_dflt; # Polish;
sub @loclPLK1 by @loclPLK2;
} ss01;</p>
<p>Or do you only need the code you showed if the locl feature precedes the ss01 feature?</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-09 01:04:21"
			itemprop="datePublished"
		>
			2005-12-09 01:04:21
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:ebensorkin">
            ebensorkin
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Also I noticed that when I test The locl or the langage feature in Fontlab that my calt features are not available to be applied at the same time. It seems to be either or in the Fontlab preview. Willl it be like that in Indesign or other apps too?</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-09 01:08:05"
			itemprop="datePublished"
		>
			2005-12-09 01:08:05
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:ebensorkin">
            ebensorkin
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Nothing wrong with also putting this in a stylistic set, but you should certainly do it in &lsquo;locl&rsquo; as well.</p>
<p>T</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-09 01:29:32"
			itemprop="datePublished"
		>
			2005-12-09 01:29:32
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Thomas&#43;Phinney">
            Thomas Phinney
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p><em>Will it be like that in Indesign or other apps too?</em></p>
<p>It certainly shouldn&rsquo;t be. Microsoft&rsquo;s approach, which I hope other layout engine developers will follow, is to apply the &lsquo;locl&rsquo; feature before any other layout feature, thereby setting the localised input glyphs for all subsequent features. Then the &lsquo;ccmp&rsquo; feature is applied, and then the other supported features in the order in which the lookups are ordered in the font (with some exceptions for complex script handling, e.g. for Indic scripts, in which language shaping features are strictly ordered by the shaping engine). Once the &lsquo;locl&rsquo; feature has been applied, you should be able to apply any other features to the results: the &lsquo;locl&rsquo; feature is certainly not supposed to be exclusive.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-09 01:33:57"
			itemprop="datePublished"
		>
			2005-12-09 01:33:57
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Paul Nelson showed a demonstration of &lsquo;locl&rsquo; feature support in MS Publisher at the ATypI conference in Rome in 2002 (specifically, substitution of preferred Urdu forms of Persian numeral characters). This has not been released though, and the fact that he demo&rsquo;d it doesn&rsquo;t necessarily mean it will be in Office 12. MS, like most software companies, won&rsquo;t commit to or comment on functionality of unreleased products. They test a lot of things internally that might not show up in published software for two or three versions, if at all.</p>
<p>On 25 February 2005, Paul noted on the OpenType developer list that APIs for calling language system tags had been added to Uniscribe (the MS Unicode Script Processor), so the back end will be in Windows Vista. But applications will need to take advantage of the new APIs.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-09 01:52:07"
			itemprop="datePublished"
		>
			2005-12-09 01:52:07
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thanks for the clarification John! I have been to the official adobe feature request page to ask for locl support. Is there a MS equivalent? I have no idea if it means anything but I figure I have to try&hellip;</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-09 06:22:34"
			itemprop="datePublished"
		>
			2005-12-09 06:22:34
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:ebensorkin">
            ebensorkin
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I&rsquo;ll note that it would be a wise precaution to order the locl and ccmp lookups in the same order as well, in case one puts the font in some environment that relies strictly on the order of lookups in the font. Microsoft themselves have been making noises about going to that approach in the future.</p>
<p>I can&rsquo;t say when or where Adobe will support &lsquo;locl&rsquo;, but it is very reasonable to assume that we will get there eventually.</p>
<p>T</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-09 07:19:18"
			itemprop="datePublished"
		>
			2005-12-09 07:19:18
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Thomas&#43;Phinney">
            Thomas Phinney
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Chester, this is wrong:</p>
<p>feature ss01 { # Polish Localized Forms
language PLK exclude_dflt; # Polish;
sub @loclPLK1 by @loclPLK2;
} ss01;</p>
<p>Maybe not wrong, but doesn&rsquo;t make much sense. You want the &ldquo;locl&rdquo; feature to work in the Polish language context but you want the stylistic set work regardless of the language context.</p>
<p>Here is an example how locl, ss01, ss02 and salt could work for Polish and Romanian localized forms.</p>
<h1 id="start">START</h1>
<h1 id="define-classes-for-substitutions">Define classes for substitutions</h1>
<p>@loclPLK1 = [Cacute Nacute Oacute Sacute Zacute cacute nacute oacute sacute zacute];
@loclPLK2 = [Cacute.PLK Nacute.PLK Oacute.PLK Sacute.PLK Zacute.PLK cacute.PLK nacute.PLK oacute.PLK sacute.PLK zacute.PLK];
@loclROM1 = [Scedilla scedilla]; 
@loclROM2 = [Scommaaccent scommaaccent];</p>
<h1 id="define-locl-localized-forms-feature">Define locl (Localized Forms) feature</h1>
<p>feature locl {</p>
<h1 id="latin-script-this-is-optional">Latin script, this is optional</h1>
<p>script latn;</p>
<h1 id="next-lookup-applies-to-romanian-language-context-only">Next lookup applies to Romanian language context only</h1>
<p>language ROM exclude_dflt;</p>
<h1 id="define-and-implement-loclrom-lookup">Define and implement loclROM lookup</h1>
<p>lookup loclROM { 
sub @loclROM1 by @loclROM2;
} loclROM;</p>
<h1 id="next-lookup-applies-to-polish-language-context-only">Next lookup applies to Polish language context only</h1>
<p>language PLK exclude_dflt; # Polish;</p>
<h1 id="define-and-implement-loclplk-lookup">Define and implement loclPLK lookup</h1>
<p>lookup loclPLK {
sub @loclPLK1 by @loclPLK2;
} loclPLK;</p>
<p>} locl;</p>
<h1 id="define-ss01-stylistic-set-1-feature-for-polish-localized-forms">Define ss01 (Stylistic Set 1) feature for Polish localized forms</h1>
<p>feature ss01 {</p>
<h1 id="next-lookup-applies-to-the-default-language-context-only">Next lookup applies to the default language context only</h1>
<p>language dflt;</p>
<h1 id="refer-to-the-loclplk-lookup-defined-earlier">Refer to the loclPLK lookup defined earlier</h1>
<p>lookup loclPLK;</p>
<h1 id="the-lookup-above-also-applies-to-the-polish-language-context">The lookup above also applies to the Polish language context</h1>
<p>language PLK include_dflt; # Polish;</p>
<h1 id="the-lookup-above-also-applies-to-the-romanian-language-context">The lookup above also applies to the Romanian language context</h1>
<p>language ROM include_dflt; # Romanian;
} ss01;</p>
<h1 id="define-ss02-stylistic-set-2-feature-for-romanian-localized-forms">Define ss02 (Stylistic Set 2) feature for Romanian localized forms</h1>
<p>feature ss02 {</p>
<h1 id="next-lookup-applies-to-the-default-language-context-only-1">Next lookup applies to the default language context only</h1>
<p>language dflt;</p>
<h1 id="refer-to-the-loclrom-lookup-defined-earlier">Refer to the loclROM lookup defined earlier</h1>
<p>lookup loclROM;</p>
<h1 id="the-lookup-above-also-applies-to-the-polish-language-context-1">The lookup above also applies to the Polish language context</h1>
<p>language PLK include_dflt; # Polish;</p>
<h1 id="the-lookup-above-also-applies-to-the-romanian-language-context-1">The lookup above also applies to the Romanian language context</h1>
<p>language ROM include_dflt; # Romanian;
} ss02;</p>
<h1 id="define-salt-stylistic-alternates-feature-for-all-stylistic-substitutions">Define salt (Stylistic Alternates) feature for all stylistic substitutions</h1>
<h1 id="this-feature-defines-and-implements-just-one-lookup">This feature defines and implements just one lookup</h1>
<h1 id="that-applies-to-all-language-contexts">that applies to all language contexts</h1>
<p>feature salt { 
sub @loclROM1 by @loclROM2;
sub @loclPLK1 by @loclPLK2;
} salt;</p>
<h1 id="end">END</h1>
<p>Regards, 
Adam</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-10 02:10:52"
			itemprop="datePublished"
		>
			2005-12-10 02:10:52
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:twardoch">
            twardoch
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p><em>I’ll note that it would be a wise precaution to order the locl and ccmp lookups in the same order as well, in case one puts the font in some environment that relies strictly on the order of lookups in the font.</em></p>
<p>Yes, absolutely. The original intent of OpenType was that lookups would be applied in the order in which they occur in the font. The only reason why Microsoft decided to overide this for certain features is the some font developers, who shall remain nameless, were getting the ordering wrong for Indic fonts that require very strict feature processing for correct display.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2005-12-10 02:16:01"
			itemprop="datePublished"
		>
			2005-12-10 02:16:01
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
