<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Coverage Offset Overflow | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="Coverage Offset Overflow" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/69253/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2010-04-08T20:29:26+00:00" />
<meta property="article:modified_time" content="2010-04-08T20:29:26+00:00" />

<meta itemprop="name" content="Coverage Offset Overflow">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2010-04-08T20:29:26+00:00" />
<meta itemprop="dateModified" content="2010-04-08T20:29:26+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Coverage Offset Overflow"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Coverage Offset Overflow</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2010-04-08T20:29:26Z">April 8, 2010</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:agisaak">
            agisaak
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>I&rsquo;m faced with the following fatal error message in FontLab:</p>
<p><code> Coverage offset overflow (0x10004) in single substitution </code></p>
<p>A google search hasn&rsquo;t revealed any particular information about what a &lsquo;coverage offset overflow&rsquo; is, but I&rsquo;m starting to suspect that it means the total size of my GSUB table has become too large.</p>
<p>I was under the impression, however, that size limits pertained to individual lookups rather than to the entire font. However, I&rsquo;m currently getting this when I add substitutions almost anywhere, even if they are clearly not in and of themselves large. For example, the font compiles fine as it is now, but when I add the following code to my &lsquo;salt&rsquo; feature, I get the error indicated above:</p>
<p><code> lookup CurrencyAlt { </code></p>
<p>     <code> sub rupee by rupee.alt; </code></p>
<p><code> } CurrencyAlt; </code></p>
<p>Since I&rsquo;m placing this within its own lookup, this shouldn&rsquo;t be contributing to the size of any other lookup, and this is hardly a large substitutions.</p>
<p>The font in question does contain a very large amount of code involving substitutions which specify multiple contexts involving large classes (e.g. sub @X' @Y @Z by @W where the classes contain hundreds of glyphs), so it doesn&rsquo;t surprise me that I am starting to run into problems. The problem which I <em> am </em> having, though, is trying to track down exactly <em>which</em> portions of my code are at fault since the error itself starts cropping up when fairly trivial bits of code (such as the above) are added, and FontLabs error reporting isn&rsquo;t even indicating which <em> feature </em> is involved, let alone which lines of code are contributing to the problem.</p>
<p>Can anyone explain to me exactly what a &lsquo;coverage offset&rsquo; is?</p>
<p>Which of the following is more likely to solve this sort of problem?</p>
<p>— breaking larger lookups into smaller ones (even though the total number of substitutions remains the same)</p>
<p>— splitting classes into smaller ones (which would entail creating more substitution rules, but ones which deal with fewer glyphs).</p>
<p>Any pointers would be appreciated,</p>
<p>André</p>
<p>[n.b. I haven&rsquo;t even started kerning yet, so the GPOS table isn&rsquo;t involved &ndash; I know overflow errors are quite common where the kern feature is involved].</p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>André,</p>
<p>I can claim no expertise whatsoever in this matter but, at first blush, I notice that your feature name has more than four characters in it, while NO other feature name I know of does. Relevant? Peut-être&hellip;</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-08 23:00:52"
			itemprop="datePublished"
		>
			2010-04-08 23:00:52
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:oldnick">
            oldnick
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Nick, you can name lookups whatever you want. You refer back to these names when you put them into a feature lookup list.</p>
<p><quote><em>Can anyone explain to me exactly what a &lsquo;coverage offset&rsquo; is?</em></quote></p>
<p>It&rsquo;s a list of offsets from the start of any major OTF table that point to the actual data. Something like this (simplified ;-):</p>
<p><code>[GSUB] &lsquo;liga&rsquo; pos_A &lsquo;ccmp&rsquo; pos_B &lsquo;calt&rsquo; POS_C ;
pos_A: &lsquo;f&rsquo; pos_D ;
&lsquo;T&rsquo; pos_E ;
pos_D: &lsquo;i&rsquo; -&gt; f_i ;
&lsquo;l&rsquo; -&gt; f_l ;
</code>(etc.).</p>
<p>The default size for coverage tables is fixed to 16-bit values only, which means that the distance in bytes between the start of the table (pos_A) and the first definition (pos_D) may not be more than 64K. However, that&rsquo;s a meaningless number because you can&rsquo;t really influence that directly&hellip; [*]</p>
<p>I&rsquo;m not sure which of your options is best &hellip; ADFKO, FontForge, and VOLT (but not FontLab!) allow <em>far</em> offsets, which can be greater than 16 bits (if I remember correctly, all the way up to 32 bits, making multiple gigabyte lookup tables possible). I know, that doesn&rsquo;t help &hellip;</p>
<p>[*] Just noticed that number: 0x10004. It&rsquo;s a tad over 64K, so at least the error report is correct in that the offset is too big.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-08 23:36:50"
			itemprop="datePublished"
		>
			2010-04-08 23:36:50
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Theunis&#43;de&#43;Jong">
            Theunis de Jong
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Thanks, Theunis</p>
<p>So basically, the &lsquo;in single substitution&rsquo; part of the error isn&rsquo;t telling me that I should be looking for a single <code> sub </code> rule that&rsquo;s got too much stuff in it &ndash; I need to address this with respect to the entire set of code to shrink down the table size (sort of what I thought, but FLab&rsquo;s error messages tend to be cryptic).</p>
<p>Part of my &lsquo;to-do&rsquo; list has been to clean up my code in general. Maybe now&rsquo;s a good time to start on that project with crossed fingers.</p>
<p>André</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-09 03:09:43"
			itemprop="datePublished"
		>
			2010-04-09 03:09:43
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:agisaak">
            agisaak
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
