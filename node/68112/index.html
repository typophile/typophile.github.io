<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Coding osf fractions | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Coding osf fractions" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/68112/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2010-03-06T18:17:58+00:00" />
<meta property="article:modified_time" content="2010-03-06T18:17:58+00:00" />

<meta itemprop="name" content="Coding osf fractions">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2010-03-06T18:17:58+00:00" />
<meta itemprop="dateModified" content="2010-03-06T18:17:58+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Coding osf fractions"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Coding osf fractions</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2010-03-06T18:17:58Z">March 6, 2010</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Frode Bo Helland</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>Hi. I’m using this OT code for my fractions, but it returns an error message when I add “zerooldstyle oneoldstyle twooldstyle …” to the numbers class. Any ideas why?</p>
<p>Also, I’m having some trouble figuring out how I can change the slash to a osf specific fraction bar when onum is activated.</p>
<p>feature frac {
@numbers = [ zero one two three four five six seven eight nine ] ;
@numerators = [ zero.numr one.numr two.numr three.numr four.numr five.numr six.numr seven.numr eight.numr nine.numr ] ;
@denominators = [ zero.dnom one.dnom two.dnom three.dnom four.dnom five.dnom six.dnom seven.dnom eight.dnom nine.dnom ] ;
@predenominators = [ slash fraction onehalf onequarter threequarters zero.dnom one.dnom two.dnom three.dnom four.dnom five.dnom six.dnom seven.dnom eight.dnom nine.dnom ] ;</p>
<p>sub one' [slash fraction]' two' by onehalf ;
sub one' [slash fraction]' four' by onequarter ;
sub three' [slash fraction]' four' by threequarters ;</p>
<p>sub @numbers by @numerators ;
sub @predenominators @numerators' by @denominators ;
sub slash by fraction ;
} frac;</p>
</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">You could place your onum feature after your frac feature. Then all you have to do is substitute the figures and fraction bar with their onum versions.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-03-06 19:08:23"
			itemprop="datePublished"
		>
			2010-03-06 19:08:23
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Mark Simonson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Didn’t even know you could sort them in a different order. Thanks Mark!</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-03-06 21:18:38"
			itemprop="datePublished"
		>
			2010-03-06 21:18:38
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Frode Bo Helland</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>The order makes a difference, and you can use it to your advantage (or at least need to be aware of the implications). You can change the order (in FontLab) by dragging the features up and down in the list on the left side of the OpenType Panel.</p>
<p>BTW, when you add a new feature, it gets placed just before (above) the currently selected feature. If you know where you want it to go in the list, you can use this to save the step of moving it. Note: You need to hit the &ldquo;compile&rdquo; button to get it to stay in this initial spot, otherwise it will get moved to the end when you save. I have no idea why, but that&rsquo;s how it works.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-03-06 21:44:20"
			itemprop="datePublished"
		>
			2010-03-06 21:44:20
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Mark Simonson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>@ frode frank</p>
<p>I think, it is a bad idea to substitute &ldquo;numr fraction dnom&rdquo; by prebuilt fractions, because the user can’t change the kerning to the fraction anymore.</p>
<p>My code:</p>
<p><code>@lnum=[zero.fitted one.fitted two.fitted three.fitted four.fitted five.fitted six.fitted seven.fitted eight.fitted nine.fitted];
@t_lnum=[zero.tab one.tab two.tab three.tab four.tab five.tab six.tab seven.tab eight.tab nine.tab];
@onum=[zero one two three four five six seven eight nine];
@t_onum=[zero.taboldstyle one.taboldstyle two.taboldstyle three.taboldstyle four.taboldstyle five.taboldstyle six.taboldstyle seven.taboldstyle eight.taboldstyle nine.taboldstyle];</code></p>
<p><code>@numr=[zero.numerator one.numerator two.numerator three.numerator four.numerator five.numerator six.numerator seven.numerator eight.numerator nine.numerator];
@dnom=[zero.denominator one.denominator two.denominator three.denominator four.denominator five.denominator six.denominator seven.denominator eight.denominator nine.denominator];</code></p>
<p><code>@prebuilt_frac = [onequarter onehalf threequarters];</code></p>
<p><code>feature numr {#G_S_U_B-Tag
lookup NUMR {
sub @onum by @numr;
sub @lnum by @numr;
sub @t_onum by @numr;
sub @t_lnum by @numr;
} NUMR;
} numr;
#&mdash;Numerators</code></p>
<p><code>feature dnom {#G_S_U_B-Tag
lookup DNOM {
sub @onum by @dnom;
sub @lnum by @dnom;
sub @t_onum by @dnom;
sub @t_lnum by @dnom;
} DNOM;
} dnom;
#&mdash;Denominators</code></p>
<p><code>feature frac {#G_S_U_B-Tag
lookup NUMR;
sub slash by fraction;
#Alternatively to sub slash by fraction
#ignore sub [one.numerator two.numerator three.numerator four.numerator five.numerator six.numerator seven.numerator eight.numerator nine.numerator] slash' zero.numerator;
#sub slash' by fraction;
#sub slash zero.numerator' by question;
sub zero.numerator fraction zero.numerator zero.numerator by perthousand;
sub zero.numerator fraction zero.numerator by percent;
sub [fraction @dnom @prebuilt_frac] @numr' by @dnom;
} frac;
#&mdash;Fractions</code></p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-03-07 10:56:55"
			itemprop="datePublished"
		>
			2010-03-07 10:56:55
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Arno Enslin</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Frode, I think your frac code is fine. You can safely leave out the section that forces pre-built fractions to be used if you think users might want to manually kern them.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-03-07 15:37:48"
			itemprop="datePublished"
		>
			2010-03-07 15:37:48
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Mark Simonson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>BTW, Tal Lemming has an interesting post about improving the on the usual coding of the frac feature:</p>
<p><a href="http://talleming.com/2009/10/01/fraction-fever-2/">http://talleming.com/2009/10/01/fraction-fever-2/</a></p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-03-07 15:43:09"
			itemprop="datePublished"
		>
			2010-03-07 15:43:09
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Mark Simonson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>The code isn’t mine. I found it in a discussion on fractions on Typophile (I also found and read Tal’s article via the same thread). It does make sense to not force the pre built fractions. Thank you, Mark and Arno.</p>
<p>If anyone know why I can’t add to the classes, I would be very grateful. I’ll never learn Opentype if I just copy someones code everytime I run into a problem.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-03-07 21:13:31"
			itemprop="datePublished"
		>
			2010-03-07 21:13:31
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Frode Bo Helland</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">By adding glyphs to the classes are you making it so that the classes that are being substituted have different numbers of glyphs in them? That will cause an error.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-03-07 21:18:23"
			itemprop="datePublished"
		>
			2010-03-07 21:18:23
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>eliason</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Right, but what I was saying in my first reply is that you can avoid the whole problem with adding figure variants to the fraction code by putting the frac feature before features like onum, etc. That way, the frac feature only has to deal with the default figures. Adding all the different figure styles to the frac feature would add some unnecessary complexity to the feature code (unless maybe you have fractions with old style figures or something, which I don&rsquo;t think is the case, right?).</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-03-07 22:26:59"
			itemprop="datePublished"
		>
			2010-03-07 22:26:59
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Mark Simonson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I understood your solution, Mark. I’m just saying this is how I go about learning stuff: Asking “why”. I do have fractions with hybrid figures, but there’s no reason I can’t change them the same way I’m changing the lining figures.</p>
<p>Thanks Craig, that was it.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-03-08 11:27:32"
			itemprop="datePublished"
		>
			2010-03-08 11:27:32
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Frode Bo Helland</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
