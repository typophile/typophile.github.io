<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>How do I get bitmap output of glyphs in FontLab 5? | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="How do I get bitmap output of glyphs in FontLab 5?" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/74729/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2010-09-29T21:46:45+00:00" />
<meta property="article:modified_time" content="2010-09-29T21:46:45+00:00" />

<meta itemprop="name" content="How do I get bitmap output of glyphs in FontLab 5?">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2010-09-29T21:46:45+00:00" />
<meta itemprop="dateModified" content="2010-09-29T21:46:45+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="How do I get bitmap output of glyphs in FontLab 5?"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">How do I get bitmap output of glyphs in FontLab 5?</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2010-09-29T21:46:45Z">September 29, 2010</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Soroush</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>Hi there</p>
<p>I&rsquo;m writing a script for optimizing my kerning algorithm. so I need to get bitmap outputs of glyphs in FontLab. I tried to render it using PIL but FontLab scripting features didn&rsquo;t tell me position of all nodes -&gt; using postscript curves, there is no data about control points (handles) of nodes in the &lsquo;nodes&rsquo; list of a glyph. So images that the script generates are not precise enough to expand kerning scale.</p>
<p>Is there a way to get such image directly? fore example to get an image of a certain glyph in a given em. I know FontLab uses FreeType to render glyph shapes. I have installed sip library. so could I use some API of FontLab to accomplish?</p>
</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p><!-- raw HTML omitted -->ontLab scripting features didn&rsquo;t tell me position of all nodes -&gt; using postscript curves, there is no data about control points (handles) of nodes in the &lsquo;nodes&rsquo; list of a glyph<!-- raw HTML omitted --></p>
<p>No, you have to iterate through each node’s <!-- raw HTML omitted -->points<!-- raw HTML omitted --> list to get all the point positions.</p>
<p>Check out the FontLab Python documentation if you haven’t already: <a href="http://www.e-font.de/flpydoc/">http://www.e-font.de/flpydoc/</a></p>
<p>There is <!-- raw HTML omitted -->Glyph.Rasterize()<!-- raw HTML omitted -->, but I&rsquo;m not sure you can control the ppm size.</p>
<p>Hope this helps,
Jens</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-30 07:05:49"
			itemprop="datePublished"
		>
			2010-09-30 07:05:49
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Jens Kutilek</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thanks Jens :)</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-30 15:08:50"
			itemprop="datePublished"
		>
			2010-09-30 15:08:50
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Soroush</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Soroush,</p>
<p>you should find this interesting: 
<a href="http://forum.fontlab.com/python-scripting/pilrasterizeglyphstofolderttgpy-t7720.0.html">http://forum.fontlab.com/python-scripting/pilrasterizeglyphstofolderttgpy-t7720.0.html</a></p>
<p>Best,
Adam</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-10-01 18:51:46"
			itemprop="datePublished"
		>
			2010-10-01 18:51:46
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>twardoch</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>twardoch,</p>
<p>Of course it will be easier than generating image from curves, but I can&rsquo;t use <!-- raw HTML omitted -->Rasterize()<!-- raw HTML omitted -->. I just call <!-- raw HTML omitted -->Rasterize()<!-- raw HTML omitted --> for generating bacground image :-/ Trying to write some <!-- raw HTML omitted -->FLtoPIL<!-- raw HTML omitted -->, I used <!-- raw HTML omitted -->Glyph.image<!-- raw HTML omitted --> but it just gives me a binary image that the glyph is tightly bounded into it. So baseline and metrics of a glyph are missed in the final output:</p>
<p>[img:sites/default/files/old-images/W_4049.jpeg],[img:sites/default/files/old-images/e_5008.jpeg]</p>
<p>I need an image with applied metrics of glyph (left,right,ascender,descender). but can&rsquo;t calculate scale of image to generate such an output&hellip;</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-10-01 22:05:35"
			itemprop="datePublished"
		>
			2010-10-01 22:05:35
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Soroush</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>You need to calculate the offsets yourself, based on the original glyph&rsquo;s bounding box. I&rsquo;m not sure how you&rsquo;d expect it to work directly, i.e. how e.g. you&rsquo;d expect the baseline to be &ldquo;stored&rdquo; in the image for a letter such as &ldquo;p&rdquo;?</p>
<p>When you&rsquo;re generating a background image in FontLab Studio, the image is rendered at the ppem size determined by FL.Options().BitmapSize. If you set BitmapSize to 1000 then one pixel in your image will correspond to one font unit in a 1000 UPM font (Font().upm). If you set BitmapSize to 200, then one pixel will correspond to 5 font units in such a font. So there you have the scaling factor you need.</p>
<p>By calling Glyph().GetBoundingRect(), you&rsquo;ll get the actual position of the glyph drawing within the design space (in font units). By querying for Glyph().width, you get the advance width. From the difference of GetBoundingRect().ll.x and .ur.x, and Glyph().width, you&rsquo;ll easily get the sidebearings, and from .ll.y, you&rsquo;ll get the position relative to the baseline. All in font units, but you can then convert them to pixel dimensions by comparing Font().upm and Options().BitmapSize.</p>
<p>As for the maximal y dimension to which you should crop your images, there are various scenarios possible. You could crop to the height of the font&rsquo;s bounding box &ndash; which you&rsquo;d need to calculate yourself by iterating for Glyph().GetBoundingRect() for all glyphs and choosing the maximal value &ndash; or you could crop e.g. to one of the vertical dimensions (such as OS/2.WinAscent and OS/2.WinDescent, but then you&rsquo;re risking that some of your glyphs may be cropped too much.</p>
<p>It all depends on what you really need this information for.</p>
<p>Best,
Adam</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-10-03 20:12:36"
			itemprop="datePublished"
		>
			2010-10-03 20:12:36
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>twardoch</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Finished up with: 1-setting BitmapSize=1000 2-shifting result of Rasterize().
That was exactly what I needed.
Thanks :)</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-10-04 17:24:43"
			itemprop="datePublished"
		>
			2010-10-04 17:24:43
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Soroush</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Good :)</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-10-05 14:47:17"
			itemprop="datePublished"
		>
			2010-10-05 14:47:17
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>twardoch</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
