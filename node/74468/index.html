<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Cap ligature problem | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Cap ligature problem" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/74468/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2010-09-21T22:26:59+00:00" />
<meta property="article:modified_time" content="2010-09-21T22:26:59+00:00" />

<meta itemprop="name" content="Cap ligature problem">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2010-09-21T22:26:59+00:00" />
<meta itemprop="dateModified" content="2010-09-21T22:26:59+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cap ligature problem"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Cap ligature problem</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2010-09-21T22:26:59Z">September 21, 2010</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Stephen Rapp</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>I&rsquo;m working on feature code in FontLab for a fully connecting script. Since it has pretty wide letterspacing I created versions of both letters and ligatures that would not normally have a starting stroke. So, for example, a lowercase o or an o_l ligature would have one version each that has a lead in stroke and one each with no lead in stroke. To make things even more complicated there are versions of ligatures that have ending that are supposed to come at the end of a word even if followed by punctuation such as a comma or quote. I used a series of classes and the feature clig with lookups to make this work.</p>
<p>So far everything worked smoothly until I discovered that for some reason ligatures that start with a cap work just the opposite as they should. So if I type in the OT preview: cool followed by a space; I get c followed by the o_o_l.end ligature which has a left side connector on the o and an ending version of l. Same for o_n followed by ool space. But if I type in Atool space (A_t being a ligature) I get the wrong version. Logically this would mean that A_t must be in the wrong OT classes. I checked this over again and again, but they all seem to be placed correctly. As an interesting experiment I type the A_t ligature manually in the text window of the OT preview and it worked exactly as it should have. So its only going wrong when the preview window does the substitution for me. I can&rsquo;t see why a ligature starting with a cap would not work like any other ligature or glyph combination.</p>
<p>Any ideas? Also…  pardon the scrolling image. I wanted to get all the samples showing this behavior.[img:sites/default/files/old-images/OT_Preview_4945.gif]</p>
</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">There are no special limitations on which glyphs should work, so there must be a bug in the code somewhere.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-22 14:11:19"
			itemprop="datePublished"
		>
			2010-09-22 14:11:19
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>twardoch</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I would recommend dispensing with ligatures and using alternate versions of characters within the contextual alternates feature.
You want the proper cursive joins as default behaviour, don&rsquo;t you?</p>
<p>So each character would have a maximum of nine alternates, based on combinations of:</p>
<ul>
<li>no lead-in stroke, no exit stroke</li>
<li>no lead-in stroke, high exit stroke</li>
<li>no lead-in stroke, low exit stroke</li>
<li>low lead-in stroke, no exit stroke</li>
<li>low lead-in stroke, high exit stroke</li>
<li>low lead-in stroke, low exit stroke (the default)</li>
<li>high lead-in stroke, no exit stroke</li>
<li>high lead-in stroke, high exit stroke</li>
<li>high lead-in stroke, low exit stroke</li>
</ul>
<p>This to be used in combination with the &ldquo;ignore&rdquo; command for beginnings and endings.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-22 17:41:32"
			itemprop="datePublished"
		>
			2010-09-22 17:41:32
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Nick Shinn</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>@Adam 
You might be right about a bug in the code, but it sure is hard ti find if that&rsquo;s the case. I&rsquo;ve checked my OT classes and my feature code and it seems to be set up the same for ligatures with the same ending strokes. What makes me wonder more is that when I just type in the OT feature preview &ldquo;At&rdquo; followed by &ldquo;ool&rdquo; it doesn&rsquo;t work right. But if I type in /A_t for the &ldquo;At&rdquo; then it shows up correctly. If the code or classes were wrong wouldn&rsquo;t it behave the same in both instances? If you look closely at the first instance of &ldquo;Atool&rdquo; in the sample you will see that the o_o_l has no connecting stroke so the &ldquo;At&rdquo; does not quite connect. In the second where I typed in /A_t it has that connector stroke.</p>
<p>@Nick
Granted that would be a solution, but would work best on fonts that have a more rigid structure. If you look at the top sample where no ligatures are used it does connect cleanly. But you don&rsquo;t get that same fluidity of strokes that having some ligatures allows. Since the connections are particularly long in this style fluid connections are much harder to attain without ligatures.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-22 18:33:56"
			itemprop="datePublished"
		>
			2010-09-22 18:33:56
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Stephen Rapp</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">What do the relevant <code>sub</code> lines in your OpenType scripting look like?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-22 19:53:04"
			itemprop="datePublished"
		>
			2010-09-22 19:53:04
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>eliason</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Here is what I&rsquo;m currently using for ligature sets like o_o_l. There are 4 versions of this ligature. A standard connecting version in the liga feature, then ones with no left lead-in stroke; lead-in stroke and ending without connection; and finally, no lead-in with unconnected ending. Using this setup I get it to work both at the beginning of a lines as well as inside all various text positions.</p>
<p>@Letter1 = glyphs with connecting strokes on right side.
@Letter2 = All glyphs except space and ending punctuation.
@All = All glphs including space.
@Uncon = All Letters with no right side connection including space.
@End = space and ending punctuation.</p>
<p>feature clig {</p>
<p>lookup clig_ool.endalt {
sub @Uncon o' o' l' @End by o_o_l.start2;
sub @Uncon o' o' l' @Letter2 by o_o_l.start;
ignore sub @All o' o' l';
sub o' o' l' @Letter2 by o_o_l.start;
sub o' o' l' @End by o_o_l.start2;
} clig_ool.endalt;
sub @Letter1 o' o' l' @End by o_o_l.end;</p>
<p>} clig;</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-22 20:44:19"
			itemprop="datePublished"
		>
			2010-09-22 20:44:19
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Stephen Rapp</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I don&rsquo;t think your use of &ldquo;ignore&rdquo; for the start and end of words is correct.</p>
<p>See Karsten&rsquo;s explanation in this thread:
<a href="http://typophile.com/node/19625">http://typophile.com/node/19625</a></p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-22 21:14:20"
			itemprop="datePublished"
		>
			2010-09-22 21:14:20
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Nick Shinn</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Nick
I think the way I&rsquo;m using ignore is still correct, but in a very different context from how its being used for random substitution which this is pretty much the opposite of. There is nothing random here that I&rsquo;m attempting. I&rsquo;m calling up very specific substitutions that just happen to work for a lot of ligatures. The ignore here is used only once and its purpose is to cause the o_o_l.start and the o_o_l.start2 ligatures to come in at the beginning of a line of text. Having the subs for the same ligatures in a contextual sequence (after @Uncon) above the ignore rule allows these same beginning versions to come in after either a space or an non-connecting letter as well.</p>
<p>In the OT feature preview window its working fine. I still need to generate this and test in applications, but I think it will work.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-22 21:49:25"
			itemprop="datePublished"
		>
			2010-09-22 21:49:25
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Stephen Rapp</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">What changes the A t to A_t and where is it in relation to the code you posted above?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-22 22:04:57"
			itemprop="datePublished"
		>
			2010-09-22 22:04:57
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>eliason</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>A_t is in the liga feature. The features list has clig before liga. 
The A_t is in the following OT classes:
@All @Letter1 and @Letter2. 
Other ligatures in the same classes work fine in the OT feature preview, but the 4 standard ligatures starting with an A don&rsquo;t. So if I were to type in Af to get the A_f ligature which, unlike the A_t,  has no right side connection then the connected version of o_o_l comes in… just the opposite of what it should. If I type it in as /A_f  which bypasses the OT feature preview sub rules for that glyph, then the correct o_o_l version comes in.</p>
<p>It just seems like there is some sort of glitch with cap ligatures in the OT feature preview. I will try to test it in Illustrator tonight to see if it works in real life.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-22 22:47:59"
			itemprop="datePublished"
		>
			2010-09-22 22:47:59
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Stephen Rapp</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">OK. I did a quick test in Illustrator and am getting the same results as in the OT feature preview. So somewhere along the way its not working for the A_t  A_t_t  A_f and  A_f_t ligatures. I might need to write code specific to those ligatures if all else fails. Everything else seems to be coming in as it should though, so I just need to figure out that piece of the puzzle.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-22 23:43:48"
			itemprop="datePublished"
		>
			2010-09-22 23:43:48
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Stephen Rapp</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Stephen, scroll down to Karsten&rsquo;s post of 15th May, 2008, 4:35 a.m.
<a href="http://typophile.com/node/19625">http://typophile.com/node/19625</a>
It&rsquo;s not about randomness, but explains &ldquo;ignore&rdquo; for intial and final forms.</p>
<p>One problem with substitutions is that they don&rsquo;t work very well at the beginning or end of a line of text in a layout application, as apps use a non-character space there. So to get the substitutions to always work, it may be necessary for the end user to type an actual space at either end of a text string on a single line.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-22 23:47:36"
			itemprop="datePublished"
		>
			2010-09-22 23:47:36
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Nick Shinn</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I&rsquo;ve always been able to get beginning of line characters to come in, but can never get an end of line character to come in. That I understand as there is no way to get a layout app to recognize a character as being end of line.</p>
<p>In Karsten&rsquo;s post he states 
&ldquo;the sole purpose of this subtable is to &ldquo;catch&rdquo; all contexts listed in the ignore statement.</p>
<p>Layout engines follow the rule that if a glyph or glyph sequence has been consumed by a subtable, then all following subtables will be skipped for this glyph or glyph sequence.&rdquo;</p>
<p>My ignore statement:
ignore sub @All o' o' l';
This essentially says ignore this substitution if there is any glyph of any kind before the sequence. Since at the beginning of a line you have no glyph, then the subtable does not &ldquo;catch&rdquo; this sequence as listed in the ignore statement.</p>
<p>I do agree about the end of line context. An ignore statement will not work on an end of line. I&rsquo;ve never been able to get that to work. I can get an end of word sub if there is a space or punctuation following it. So for end of line subs the user will have to add this by selection in their layout app.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-23 00:46:38"
			itemprop="datePublished"
		>
			2010-09-23 00:46:38
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Stephen Rapp</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Here is the o_o_l ligatures in Illustrator. 
Top to bottom: Beginning of line connecting on right; connecting on left with ending on right; non-connecting left with connecting on right; and non-connecting on left with end form on right.</p>
<p>[img:sites/default/files/old-images/subs_5913.gif]</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-23 01:08:17"
			itemprop="datePublished"
		>
			2010-09-23 01:08:17
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Stephen Rapp</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I&rsquo;m having some trouble following the logic of your code, but it might help to put the stuff that deals with beginnings in a separate lookup from the stuff that deals with endings. At least that&rsquo;s what I do, and it works.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-23 04:34:26"
			itemprop="datePublished"
		>
			2010-09-23 04:34:26
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Mark Simonson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">It is a little odd I suppose. It does work. I just got the cap ligature problem fixed as well, but I&rsquo;m not clear about why it didn&rsquo;t work right off. I put A_t and other A_ligatures at the top of the list in the clig feature before all the lookups. That seemed to do the trick. But why they need to come before these lookups and the other ligatures and glyphs didn&rsquo;t still seems a mystery.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-23 05:10:22"
			itemprop="datePublished"
		>
			2010-09-23 05:10:22
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Stephen Rapp</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Cool font Professor Stephen. :)</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-26 21:08:48"
			itemprop="datePublished"
		>
			2010-09-26 21:08:48
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Charles_borges_de_oliveira</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Your name extends into the text that is contained in the message box, Charles. Probably because of the underscores.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-09-27 08:01:21"
			itemprop="datePublished"
		>
			2010-09-27 08:01:21
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Arno Enslin</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
