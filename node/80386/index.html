<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Python script to harmonise stems? | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="Python script to harmonise stems?" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/80386/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2011-03-23T03:12:16+00:00" />
<meta property="article:modified_time" content="2011-03-23T03:12:16+00:00" />

<meta itemprop="name" content="Python script to harmonise stems?">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2011-03-23T03:12:16+00:00" />
<meta itemprop="dateModified" content="2011-03-23T03:12:16+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Python script to harmonise stems?"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Python script to harmonise stems?</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2011-03-23T03:12:16Z">March 23, 2011</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>It seems to me that this is something that is likely to already to exist, so before I ask someone to write it for me, I thought I would enquire if anyone already has it&hellip;</p>
<p>I&rsquo;m working on a font that contains a large number of glyphs with very slightly different stem weights, e.g. straight vertical stems whose widths vary from 259 to 264 units. I want to harmonise these stems so that they are all the same width, so what I&rsquo;m looking for is a script that will take an input stem width and convert it to an output stem width. Obviously, the script should distinguish vertical and horizontal stems. This is similar to some of the functionality of KLTF Glyph Tweaker, except I&rsquo;m looking for something that will find the glyphs which need to be adjusted as well as performing the adjustment.</p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Looking for a perfect auto hinter with a built in auto instructor that responds intelligently to control value table cut in values and outputs a scaled outline? No problem.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-23 11:51:46"
			itemprop="datePublished"
		>
			2011-03-23 11:51:46
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:dberlow">
            dberlow
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Is there a budget associated with this job?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-23 13:46:32"
			itemprop="datePublished"
		>
			2011-03-23 13:46:32
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Chris&#43;Dean">
            Chris Dean
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I have a colleague in the lab who may be able to solve this problem.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-23 14:52:27"
			itemprop="datePublished"
		>
			2011-03-23 14:52:27
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Chris&#43;Dean">
            Chris Dean
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Acutally, no, I wasn&rsquo;t looking for a perfect autohinter etc., David, although I can see how what I&rsquo;m looking for would form part of such a thing. I just want to be able to regularise some variant stem widths that are a unit or two off being standard without having to go look for them and do it manually.</p>
<hr>
<p>Thanks, Chris. I want to check first to see if anyone has already made such a thing. If not, I&rsquo;ll likely hire Karsten to produce one: he does most of my Python scripting, and I reckon he has already solved most of the problem in his Glyph Tweaker tool.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-23 16:35:08"
			itemprop="datePublished"
		>
			2011-03-23 16:35:08
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>JH&gt; I just want to&hellip;</p>
<p>I know. You just want mista computo to know where all the glyphs are, then where all the stems are in those glyphs, calculate the differences, decide on the norm, and then know which way to move what points to make them all the norm, for any font in the known universe, without you ever lifting a witto finga.:)</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-23 18:45:37"
			itemprop="datePublished"
		>
			2011-03-23 18:45:37
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:dberlow">
            dberlow
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Adobe&rsquo;s PS autohinter already does a decent job of identifying stems and recording their width, quite good enough for this purpose. So let&rsquo;s say that the PS autohinter has been run, and the hints are present in the FL glyphs. All I want to be able to do is say take any stem that is e.g. 262 units wide and make it 261 units wide by shifting some points. Okay, so a decision needs to be made about whether to shift them up or down, left or right. I reckon the safest bet will be to shift them from the centre of the glyph outwards, i.e. increasing the size of counters while preserving sidebearings and vertical alignnment zones.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-23 18:55:10"
			itemprop="datePublished"
		>
			2011-03-23 18:55:10
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Are there serifs? Are the stems perfectly straight segments, or is here any curvy stuff involved?</p>
<p>I have use for such a tool myself, so I might write it.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-24 20:19:14"
			itemprop="datePublished"
		>
			2011-03-24 20:19:14
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:twardoch">
            twardoch
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>For my immediate needs &ndash; now met, I think &ndash;, the stems at issue are mostly straight and mostly vertical (primary stems in some North Indian scripts). No serifs.</p>
<p>I can imagine how much more complicated it would get if one needed to deal with serifs or other terminal appendages, and things like S curvatures.</p>
<hr>
<p>Which led me today to another thought&hellip;</p>
<p>On the Web and some other publishing platforms, we now have a fairly cleanly defined distinction between content and display, between tagged text and information about how to display that text. [Yes, a lot of people still muddy the distinction in practice, but the point is that it is possible to do it cleanly if one is willing to think systematically and take advantage of the distinction.]</p>
<p>So today I started thinking about a parametric approach to making glyphs &ndash; and could be extended to hinting glyphs, come to think of it &ndash; that would mirror the XML/CSS approach to text creation. The &lsquo;content&rsquo; of such a system would be sub-glyph elements &ndash; stems, bowls, serifs, counters, etc. &ndash; which could be tagged according to type and function, e.g. &lsquo;main-vertical&rsquo;, &lsquo;diagonal-hairline&rsquo; etc.; like XML tagging of text, it would be extensible, so the exact set of tags needed would correspond to the nature of the design intent, i.e. what the designer would express in terms of the content tags would be the meaningful distinctions to be differentially handled in the display. The &lsquo;display&rsquo; is the parametric rules applied to the content, e.g. the stuff that says how thick and how long a &lsquo;main-vertical&rsquo; stem should be, where it starts and terminates, how it interacts with adjoining bowls and their own display parameters, etc. Then the actual glyph creation would be performed by the equivalent of a CSS parser, a program that knows how to interpret and apply the display parameters to the tagged content. If all parts of the system are open source, then the parser can be updated to understand new parametric rules.</p>
<p>Does this all make sense?</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-25 05:22:44"
			itemprop="datePublished"
		>
			2011-03-25 05:22:44
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">It does. This seems where more recent developments in CJK formats/tools are heading. They go a step farther, leaving the conception of outline plus hinting behind (it is really time to forget about soft fabric plus shoulder pads underneath) and turn to a conception of shape-defining framework plus muscles (think of a more recent Illustrator <a href="http://vimeo.com/16856820" target="_blank">drawing tool</a>). Not even such new conception, btw. In the latter case, both framework and muscles could be classified/named for the sake of changing of parameters globally. And indeed it were nice if this were not just a production but an end format so that no conversion is necessary. The sfnt structure of OpenType makes it easy to plug whatever alternative table(s) for outline description into a font.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-25 06:40:31"
			itemprop="datePublished"
		>
			2011-03-25 06:40:31
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:k.l.">
            k.l.
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><blockquote>
<p>And indeed it were nice if this were not just a production but an end format so that no conversion is necessary.</p>
</blockquote>
<p>Yes indeed!   With the skeleton, muscles, compass and brains of TT, and a label, which is already done, no need to convert anything or make your own interpreter, besides freetype. The biggest barrier to all this working simply, efficiently and losslessly is that the geniuses at FL will not make the 1/2 hour change to the tool so TT outlines  can be edited on an equal basis with T1. Unfathomable ba-lindness to the future and going on  5 years old ;)</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-25 12:02:51"
			itemprop="datePublished"
		>
			2011-03-25 12:02:51
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:dberlow">
            dberlow
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Sure. For you and me, here and now, better TT-outline editing too. In FLS 5.0.5 please. :)</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-25 12:41:59"
			itemprop="datePublished"
		>
			2011-03-25 12:41:59
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:k.l.">
            k.l.
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><blockquote>Adobe's PS autohinter already does a decent job of identifying stems and recording their width, quite good enough for this purpose... All I want to be able to do is say take any stem that is e.g. 262 units wide and make it 261 units wide by shifting some points.</blockquote>
<p>I&rsquo;ve always presumed that&rsquo;s what ticking &ldquo;Allow changes to glyph outline&rdquo; in the Adobe autohinter settings would do (though I&rsquo;ve never been brave enough to tick it). What <em>does</em> it do?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-25 13:37:41"
			itemprop="datePublished"
		>
			2011-03-25 13:37:41
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:eliason">
            eliason
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">IIRC allowing the autohinter to change the outlines allows it to make little changes along horizontal curves for the sake of flex hinting. In my experience all it ever did was turn curve points into matching non-curve points.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-25 14:25:02"
			itemprop="datePublished"
		>
			2011-03-25 14:25:02
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:blank">
            blank
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>&ldquo;Allow changes to glyph outline&rdquo; changes the text in dialogs to derogatory comments.</p>
<p>Auto-hint: &ldquo;Here&rsquo;s a hint. Don&rsquo;t give up your daytime job.&rdquo;
Simplify: &ldquo;What do you expect me to do, make it a single point?&rdquo;
Zoom: &ldquo;Can&rsquo;t you just sit closer to your screen?&rdquo;
Skew: &ldquo;Yet another nitwit perpetuating the myth &lsquo;slant&rsquo; is the same as hand drawing an italicized font.&rdquo;
Save: &ldquo;Too lazy to re-do your work next time &lsquo;round, eh?&rdquo;
Print: &ldquo;Go ahead, destroy the environment and kill another tree.&rdquo;
Quit: &ldquo;Good riddance.&rdquo;</p>
<p>Option inserted at the request of David Berlow :-)</p>
<p>[Edit] Oh I was only joking!</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-25 14:32:22"
			itemprop="datePublished"
		>
			2011-03-25 14:32:22
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Theunis&#43;de&#43;Jong">
            Theunis de Jong
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Load: &ldquo;Do you want fries with that?&rdquo; (That&rsquo;s the 200 message on my private web server, btw.)</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-25 15:25:24"
			itemprop="datePublished"
		>
			2011-03-25 15:25:24
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:T%C3%A9&#43;Rowan">
            Té Rowan
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Or use an intern.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-25 16:24:57"
			itemprop="datePublished"
		>
			2011-03-25 16:24:57
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Santiago&#43;Orozco">
            Santiago Orozco
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I’m not sure there are many type design interns on John’s island.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-25 17:13:59"
			itemprop="datePublished"
		>
			2011-03-25 17:13:59
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:blank">
            blank
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">And I have no desire to be anyone&rsquo;s boss.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-03-27 05:19:59"
			itemprop="datePublished"
		>
			2011-03-27 05:19:59
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
