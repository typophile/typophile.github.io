<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>App on iOS renders  complex script marks with wrong vertical positioning | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="App on iOS renders  complex script marks with wrong vertical positioning" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/125518/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2017-02-17T00:11:13+00:00" />
<meta property="article:modified_time" content="2017-02-17T00:11:13+00:00" />

<meta itemprop="name" content="App on iOS renders  complex script marks with wrong vertical positioning">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2017-02-17T00:11:13+00:00" />
<meta itemprop="dateModified" content="2017-02-17T00:11:13+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="App on iOS renders  complex script marks with wrong vertical positioning"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">App on iOS renders  complex script marks with wrong vertical positioning</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2017-02-17T00:11:13Z">February 17, 2017</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Vladimir&#43;Tamari">
            Vladimir Tamari
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">I am posting this under General Discussions because it concerns a very technical issue that transcends Arabic. 
My favorite iOS apps (ArtStudio, Pages for iPhone and iPad) render Arabic mark positioning correctly, except for an otherwise excellent  app called InkPad. InkPad for the iPad is a superb vector drawing app and renders Arabic fonts correctly except that mark positioning goes haywire for all Arabic fonts. The attached image shows how the pink marks on my AlQuds SemiBold  font are displaced in Inkpad from their intended position shown in black. The adjustments differ for each letter but the app applies them in the opposite direction up or down!
I wrote to the developer a few years ago but the issue is too technical for them. Can Typophile experts help pinpoint the trouble?  Thanks.</div>

  
  <img src="/images/forum-files/Inkpad%20harakat%20test.jpg" class="img-fluid">
  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Very interesting bug. It&rsquo;s strange that sometimes the error is up and sometimes down. Can you derive a pattern relative to the actual GPOS anchor data, or to the default heights of the marks and how these are adjusted in the GPOS? I&rsquo;m guessing, just by looking at your example, that the GPOS values might be being applied in reverse, i.e. that when you lower a mark from its default height, InkPad is raising it, and vice versa. But I&rsquo;d need to see how your mark glyphs sit relative to the 0,0 position in order to determine what&rsquo;s going on.</p>
<p>In order to determine what&rsquo;s at fault, you need to find out what layout engine InkPad is using for OpenType Layout.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2017-02-17 18:46:15"
			itemprop="datePublished"
		>
			2017-02-17 18:46:15
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Hi John Indeed it is a simple flip of the positioning instruction reversing the direction. If you draw a line through the locus of midpoints between the pink and black marks in the diagram, you will get the original level of all the top marks at around the 620 mark . For what its worth I attach the Marks positioning data.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2017-02-18 00:24:15"
			itemprop="datePublished"
		>
			2017-02-18 00:24:15
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Vladimir&#43;Tamari">
            Vladimir Tamari
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I can&rsquo;t offer any more advice without knowing how InkPad is doing OpenType Layout shaping. Is it using Apple&rsquo;s CoreText engine in the OS, or something else? [Note that I&rsquo;ve heard reports of CoreText GPOS bugs in Sierra and the latest iOS, but nothing like you show here.]</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2017-02-18 03:22:17"
			itemprop="datePublished"
		>
			2017-02-18 03:22:17
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thanks I have written to the developers of the app, StoneStudio, and asked them to look into the discussions here and respond. The app is open source and the code is at <a href="https://github.com/sprang/Inkpad">https://github.com/sprang/Inkpad</a></div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2017-02-18 03:47:00"
			itemprop="datePublished"
		>
			2017-02-18 03:47:00
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Vladimir&#43;Tamari">
            Vladimir Tamari
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">The InkPad app developer wrote me the following, which confirms John Hudson&rsquo;s suggestion that CoreText may be responsible.
&quot; have checked this program&rsquo;s source code and found that using the iOS system CoreText in this program. So, maybe this problem can&rsquo;t be fixed so far. But I will do my best to see if this bug could be fixed in the future.
Thanks again for you using my app and reporting this bug.&quot;</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2017-03-09 09:23:21"
			itemprop="datePublished"
		>
			2017-03-09 09:23:21
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Vladimir&#43;Tamari">
            Vladimir Tamari
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Are you able to test some other Arabic fonts in InkPad to see whether this is a common problem or something that is only affecting your font?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2017-03-14 18:18:58"
			itemprop="datePublished"
		>
			2017-03-14 18:18:58
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I did test that - it changes the mark adjustment values in the fonts that have them which I tested. Al Nile however is unchanged, probably because the marks have no positioning changes.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2017-03-16 09:57:23"
			itemprop="datePublished"
		>
			2017-03-16 09:57:23
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Vladimir&#43;Tamari">
            Vladimir Tamari
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
