<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Enclosing combining marks | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="Enclosing combining marks" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/52199/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2008-11-30T14:58:07+00:00" />
<meta property="article:modified_time" content="2008-11-30T14:58:07+00:00" />

<meta itemprop="name" content="Enclosing combining marks">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2008-11-30T14:58:07+00:00" />
<meta itemprop="dateModified" content="2008-11-30T14:58:07+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Enclosing combining marks"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Enclosing combining marks</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2008-11-30T14:58:07Z">November 30, 2008</time>
      
        
          â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:anagnost">
            anagnost
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>In the recently released released version of my [[http://www.thessalonica.org.ru/en/fonts.html|Old Standard]] font family I attempted to implement some support for enclosing combining marks, in particular U+20DD. I needed this for Old Cyrillic, where such marks are used to denote large numbers. The implementation looks basically us follows:</p>
<ul>
<li>An anchor point is used to attach the mark to the base character. Currently I don't handle those situations there the base character is too large to fit properly into the enclosing mark.</li>
<li>A contextual positioning lookup is applied to increase the base glyph's offset and advance width, so that the mark doesn't overlap the surrounding characters.</li>
</ul>
<p>Unfortunately I see that with most rendering engines my font doesn&rsquo;t work as expected:</p>
<ul>
<li>Uniscribe just ignores enclosing combining marks and doesn't apply any lookups to them;</li>
<li>Most other engines (InDesign, ICU) seem to share the same common problem: when the base glyph is shifted to right, its anchor points are moved not by the XPlacement value specified for the base glyph (as I would expect), but rather by XAdvance. Thus the mark is shifted much further to right than it should be;</li>
<li>In InDesign things get even more complicated if there are additional combining marks attached to other anchor points of the same base glyph.</li>
</ul>
<p>Pango seems to be the only rendering engine which processes my font exactly as expected.</p>
<p>Now the questions:</p>
<ul>
<li>To which feature should I attach my contextual GPOS lookups? Currently I mark them as required, but required GPOS lookups seem to be completely ignored by some engines (ICU, Mellel). Another option is to attach them to the 'kern' feature (as the specification seems to allow contextual kerning), but GPOS kerning is currently ignored by Uniscribe.</li>
<li>Is the behavior I have described caused by some bugs in rendering engines, or I am doing something wrong?</li>
<li>Should I post my questions also to the OpenType mailing list?</li>
</ul>
</div>

  
  
</article>

    </main>
    
  </body>
</html>
