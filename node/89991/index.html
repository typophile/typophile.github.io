<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Fraction OT Code | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Fraction OT Code" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/89991/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2012-02-13T06:05:08+00:00" />
<meta property="article:modified_time" content="2012-02-13T06:05:08+00:00" />

<meta itemprop="name" content="Fraction OT Code">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2012-02-13T06:05:08+00:00" />
<meta itemprop="dateModified" content="2012-02-13T06:05:08+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Fraction OT Code"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Fraction OT Code</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2012-02-13T06:05:08Z">February 13, 2012</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Ken Krugh</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">Hi Guys,

I've looked over the great posts that are here for this and I think I've settled on the code below, which I grabbed from the Adobe Caslon Pro font. It's nice and compact and should suit out needs just right.

It all seems to be working fine but I'm not completely clear as to how the single quote works and I don't want to end up in a "A little knowedge is a dangerous thing" situation. An Adobe page states that the single quote "Marks a glyph or glyph class for contextual substitution or positioning" but I'm still lost.

Thanks for any help you can offer my feeble mind.

All Best,
Ken


<code>@frac1regfigs=zero one two three four five six seven eight nine
@frac2numr=zero.numr one.numr two.numr three.numr four.numr five.numr six.numr seven.numr eight.numr nine.numr
@frac3dnom=zero.dnom one.dnom two.dnom three.dnom four.dnom five.dnom six.dnom seven.dnom eight.dnom nine.dnom
@frac4fracsdnom=perthousand slash percent onehalf onethird onequarter twothirds threequarters threeeighths seveneighths one.dnom two.dnom three.dnom four.dnom five.dnom six.dnom seven.dnom eight.dnom nine.dnom</code>

<code>feature frac {
lookup frac01 {
#all to numerators
sub @frac1regfigs by @frac2numr;
} frac01;
lookup frac02 {
	#change numerators to denominators contextually
	sub zero.numr' @SLASH' zero.numr' zero.numr' by perthousand;
	sub zero.numr' @SLASH' zero.numr' by percent;
	sub one.numr' slash' two.numr' by onehalf;
	sub one.numr' slash' three.numr' by onethird;
	sub one.numr' slash' four.numr' by onequarter;
	sub two.numr' slash' three.numr' by twothirds;
	sub three.numr' slash' four.numr' by threequarters;
	sub three.numr' slash' eight.numr' by threeeighths;
	sub seven.numr' slash' eight.numr' by seveneighths;
	sub @frac4fracsdnom @frac2numr' by @frac3dnom;
} frac02;
lookup frac03 {
	#change the slash
	sub slash by fraction;
} frac03;
} frac;</code></div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">…</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-02-13 06:40:34"
			itemprop="datePublished"
		>
			2012-02-13 06:40:34
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Frode Bo Helland</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I don't think you should put single quote at all. Single quote identifies the glyph in the contextual chain, that needs to be substituted in that context. The other glyphs without single quote in that context remain intact. If you don't put anything, the substitution will apply to all glyphs in the context.
In this case, since all two or three or four or whatever number of glyphs in the contextual chain will be removed and replaced by a single glyph, you don't need to use the single quote. I'm actually surprised that it did work for you. But it should be more work for CPU I guess.
I'm interested to know more from experts on this too.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-02-13 10:05:11"
			itemprop="datePublished"
		>
			2012-02-13 10:05:11
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>behnam</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Well, he definitely needs the single quote in the line

<code> sub @frac4fracsdnom @frac2numr' by @frac3dnom;</code>

If he removes the other single quotes the code will likely not compile since then you will have a single lookup containing two different types of rules. He would need to split <code> frac02 </code> into two separate lookups.

André</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-02-13 11:00:50"
			itemprop="datePublished"
		>
			2012-02-13 11:00:50
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>agisaak</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Ah-ha! I thought that was how it worked. The glyphs (or classes) that have the single quote will be substituted. Right?

And yes, Adnre is right, that line needs to leave the @frac4fracsdnom  alone. The other lines all have it to remain within the same lookup. I assumed for efficency?

Any other info will be more than welcomed.

Thanks a bunch guys!

Ken</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-02-13 15:46:03"
			itemprop="datePublished"
		>
			2012-02-13 15:46:03
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Ken Krugh</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Yes, when you have something <code> sub @A @B' @C by @D </code>, the apostrophe is needed to distinguish the substitution target from the substitution context.

In the example you give, I can see no reason why it would have to be a single lookup. You could break it up into

<code>lookup frac1A { </code>
<code>  sub zero.numr slash zero.numr zero.numr by perthousand; </code>
<code>  sub zero.numr slash zero.numr by percent; </code>
<code>  sub one.numr slash two.numr by onehalf; </code>
<code>  # etc. </code>
<code>} frac1A; </code>

<code>lookup frac1B { </code>
<code>  sub @frac4fracsdnom @frac2numr' by @frac3dnom; </code>
<code>} frac1B; </code>

In this case, the apostrophes can be omitted in the first lookup. They are only needed when the final line is included since you can't include both ligature and contextual substitutions in the same lookup. The apostrphes force the ligature rules to be interpreted as contextual substitutions which happen to have the same effect as ligature substitutions.

André</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-02-13 15:58:38"
			itemprop="datePublished"
		>
			2012-02-13 15:58:38
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>agisaak</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">André, while I have your "ear."

Regarding the line sub @frac4fracsdnom @frac2numr' by @frac3dnom;: The first line of the feature changes everything to numerators, it then does the fractions that are built as glyphs. However, there is nothing in the line I mentioned above to indicate which side of the slash the numerators (class @frac2numr) are being "searched." I was assuming that because there is a dnom feature (as describded here: http://www.microsoft.com/typography/otspec/features_fj.htm) the frac feature is matching the glyphs in the @frac3dnom to the denom feature and knows to substitute only to the right of the slash. Am I correct?

Font work like this isn't my main function here, so commenting this code with what is happening will be immensly helpful when I come back into it later. Not sure where I'd be without this forum!

Thanks very much again for your time,
Ken</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-02-13 18:02:13"
			itemprop="datePublished"
		>
			2012-02-13 18:02:13
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Ken Krugh</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I’ve been using this technique for several years (although without quite so many lookups):

http://talleming.com/2008/04/16/fraction-fever/</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-02-13 19:01:50"
			itemprop="datePublished"
		>
			2012-02-13 19:01:50
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Nick Shinn</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">why not this one? http://talleming.com/2009/10/01/fraction-fever-2/</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-02-13 19:44:51"
			itemprop="datePublished"
		>
			2012-02-13 19:44:51
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>JanekZ</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Sorry, I posted the first one I Googled, without looking at it.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-02-13 20:33:29"
			itemprop="datePublished"
		>
			2012-02-13 20:33:29
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Nick Shinn</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Ken,

The line <code> sub @frac4fracsdnom @frac2numr' by @frac3dnom; </code> specifies that your fraction numerators will be replaced by denominators *only* when they follow elements in the class @frac4fracsdnom. Since this class includes the slash along with 'slash-containing' glyphs, that's what determines that numerators will only be changed to a denominator following the slash. The dnom feature, whether implemented or not, doesn't play a role in this.

André</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2012-02-14 00:01:53"
			itemprop="datePublished"
		>
			2012-02-14 00:01:53
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>agisaak</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
