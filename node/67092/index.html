<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>double-encoding for unicase? | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="double-encoding for unicase?" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/67092/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2010-02-06T18:58:51+00:00" />
<meta property="article:modified_time" content="2010-02-06T18:58:51+00:00" />

<meta itemprop="name" content="double-encoding for unicase?">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2010-02-06T18:58:51+00:00" />
<meta itemprop="dateModified" content="2010-02-06T18:58:51+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="double-encoding for unicase?"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">double-encoding for unicase?</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2010-02-06T18:58:51Z">February 6, 2010</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:eliason">
            eliason
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>I have a unicase font that has a bunch of OpenType scripting (swsh, dlig, etc.).</p>
<p>I have designed the letters in the A-Z slots, and had presumed that I would just put one-component copies of them into the a-z slots.</p>
<p>Would it be a mistake to simply double-encode, say, the /A/ glyph with the Unicodes for /A/ and /a/ instead of making lowercase copies? That way I wouldn&rsquo;t have to work all the lowercase permutations into all the scripting, kerning classes, etc.</p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">It&rsquo;s generally not recommended (in the FontForge manual at least)  to double-encode glyphs, but it certainly can be done and may indeed be the practical solution for a unicase or caps-only display font.</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-06 19:37:40"
			itemprop="datePublished"
		>
			2010-02-06 19:37:40
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:cuttlefish">
            cuttlefish
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Has anyone tried this before? What are the consequences?</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-08 03:00:21"
			itemprop="datePublished"
		>
			2010-02-08 03:00:21
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Ray&#43;Larabie">
            Ray Larabie
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I was told this would be a bad thing, but I can&rsquo;t quite remember why. Something to do with glyph names remaining relevant when the font is used in some applications.</p>
<p>I can imagine a scenario wherein you select some text, apply your double-encoded font, and suddenly &ldquo;a&rdquo; is now &ldquo;A&rdquo; and you&rsquo;ve lost case information in that text that doesn&rsquo;t come back if you then decide to change it to another font. But this is pure supposition.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-08 10:57:18"
			itemprop="datePublished"
		>
			2010-02-08 10:57:18
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:cerulean">
            cerulean
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Great idea Craig.
I&rsquo;d be interested to know if it&rsquo;s practical.</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-08 17:01:10"
			itemprop="datePublished"
		>
			2010-02-08 17:01:10
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Nick&#43;Shinn">
            Nick Shinn
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>On more or less the same subject, is there an advantage to handling unicase kerning one or the other of these two ways?</p>
<ol>
<li>
<p>Simply expand uppercase classes to include lowercase instances; e.g., A' Aacute Acircumflex Adieresis Agrave Aring Atilde Abreve Aogonek (plus) a aacute acircumflex adieresis agrave aring atilde abreve aogonek.</p>
</li>
<li>
<p>In the past, I have&hellip;
(a) exported uppercase only kerning, opened the .afm file and cut and pasted the kerning data into a simple text file;
(b) opened the text file in Excel, specifying &ldquo;delimited&rdquo; with &ldquo;space&rdquo; as the delimiter;
(c) made two copies of the kerning info;
(d) run a macro to change the second column of uppercase letters into lowercase letters in the first copy, then done the same for both columns in the second copy;
(e) pasted the altered info beneath the original, then saved the results as a .prn file;
(f) pasted the .prn info into the original .afm file; then, finally
(g) imported the metrics back into FontLab.</p>
</li>
</ol>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-08 19:47:52"
			itemprop="datePublished"
		>
			2010-02-08 19:47:52
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:oldnick">
            oldnick
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p><em>I was told this would be a bad thing, but I can&rsquo;t quite remember why. Something to do with glyph names remaining relevant when the font is used in some applications.</em></p>
<p>The rationale against double-encoding seems to involve embedded fonts potentially losing their Unicode information, in which case the glyph names could be used for proper glyph-to-character translation &hellip; there&rsquo;s a more extended discussion in the FontLab manual under &ldquo;Advanced Naming and Encoding&rdquo; (p145).</p>
<p>Working with the copied glyphs isn&rsquo;t as big of an inconvenience if you&rsquo;re using classes for scripting as well as kerning (pretty much like Nick&rsquo;s suggestion #1 above), and using components for the copies. Rather than double-encoding the &ldquo;A&rdquo;, make a named &ldquo;a&rdquo; glyph that&rsquo;s a component of &ldquo;A&rdquo; and create appropriate classes for every pair or series of similar glyphs. Then in your code, just refer to the classes.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-08 22:55:32"
			itemprop="datePublished"
		>
			2010-02-08 22:55:32
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:gargoyle">
            gargoyle
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thanks to all. It&rsquo;s working in experiments on my computer, but after reading that manual section (thanks for pointing it to me), I&rsquo;m leaning towards not being the guinea pig on this one.</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-09 02:05:22"
			itemprop="datePublished"
		>
			2010-02-09 02:05:22
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:eliason">
            eliason
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>There is nothing wrong with assigning multiple Unicode codepoints to single glyphs. There are lots of situations in which this is sensible and efficient. The TT/OT Unicode cmap subtables are designed to be able to handle this sort of thing.</p>
<p>The only caveats to be observed are:</p>
<ol>
<li>
<p>If a PDF is distilled from a print stream, it will not be possible for Acrobat to reconstruct the character string (for searching, copying/pasting text) unless there is a one-to-one relationship between correctly named glyphs and individual Unicode characters.</p>
</li>
<li>
<p>It is not generally adviseable to encode the same glyph as characters from different writing systems, e.g. unifying the encoding of Latin a and Cyrillic а, but only because it is easier to manage things like kerning and OpenType Layout if glyph sets for different scripts are kept separate.</p>
</li>
</ol>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-09 02:50:48"
			itemprop="datePublished"
		>
			2010-02-09 02:50:48
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>@John Hudson,</p>
<p>With regards to your first caveat, this brings up a related issue which I find myself going back and forth on:</p>
<p>The fact that the unicode stream might be lost in PDFs seems to be the major argument against having OT features map from one character onto another (rather than onto a glyph variant). If one adheres rigorously to this, it can often result in a large amount of glyph duplication (e.g. many fonts will include separate sets of small caps for the &lsquo;smcp&rsquo; and &lsquo;c2sc&rsquo; features so that case is preserved in PDFs). While such duplication might not drastically increase the size of the font file, it can lead to an extremely cluttered font, and ins some cases greatly increases the complexity of coding (and thus the possibility of uncaught bugs) - for example, in cases where there are several, cumulative variants of the small capitals which must all be duplicated.</p>
<p>Are there other reasons besides PDF-related issues which argue against having two different characters map to the same glyph (e.g. mapping both A and a to a single a.smcp glyph)? If not, how high is the percentage of PDFs created which fail to preserve the original character stream?</p>
<p>How rigorous are people out there when it comes to assuring that no two characters map onto a single glyph? For those who are not, how often do you run into problems as a result of this?</p>
<p>While I use small capitals as my example above, I&rsquo;m more interested in cases where more than case-sensitivity would be sacrificed. For example, mapping zero to U2070 (superscript zero) or s to U017F (long s) rather than creating a separate s.hist glyph.</p>
<p>Apart from the potential for bugs, lots of glyph duplication also results in an overly long glyph-palette which can frustrate the user looking for a particular glyph.</p>
<p>André</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-11 12:05:26"
			itemprop="datePublished"
		>
			2010-02-11 12:05:26
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:agisaak">
            agisaak
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>My practice depends on what my clients want. I always explain the PDF issue to them, and then they decide whether this is important to them.</p>
<p><em>If not, how high is the percentage of PDFs created which fail to preserve the original character stream?</em></p>
<p>As I understand it, it&rsquo;s any situation in which Acrobat is used to distil from a print stream, as opposed to an application using some kind of write-to-PDF function that makes use of PDF character string storage. ‘Printing to PDF’ sends only the glyph IDs for the embedded font(s) which then need to be mapped to glyph names in the font(s) in order for Acrobat to try to parse these and reconstruct the original text.</p>
</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-11 17:50:08"
			itemprop="datePublished"
		>
			2010-02-11 17:50:08
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:John&#43;Hudson">
            John Hudson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I can report that the double-encoded version of the font, when installed with Font Explorer X on my Mac, produced all sorts of problems (other apps hanging, lots of beach ball cursors, screwy renderings of system fonts (like Dock contextual menus), etc.). Guess I&rsquo;ll start building those classes.</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-12 15:53:00"
			itemprop="datePublished"
		>
			2010-02-12 15:53:00
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:eliason">
            eliason
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Just for the record, the errors I was finding I think were due to caching problems. In the end I did use this double-encoding solution for my Ambicase fonts and it seems to have worked well.</div>
		
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2011-09-22 17:24:28"
			itemprop="datePublished"
		>
			2011-09-22 17:24:28
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:eliason">
            eliason
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
