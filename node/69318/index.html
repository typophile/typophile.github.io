<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>composite character shift | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="composite character shift" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/69318/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2010-04-11T14:29:13+00:00" />
<meta property="article:modified_time" content="2010-04-11T14:29:13+00:00" />

<meta itemprop="name" content="composite character shift">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2010-04-11T14:29:13+00:00" />
<meta itemprop="dateModified" content="2010-04-11T14:29:13+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="composite character shift"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">composite character shift</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2010-04-11T14:29:13Z">April 11, 2010</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Stephen Rapp</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">I'm working on a custom script font in FL Studio and noticed that some of my lowercase composite characters had shifted in position slightly. Aren't these supposed to change their metrics whenever the parent character changes? I'm wondering if there is something I've accidentally done that caused this shift. Any ideas?</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I just did an experiment in the metrics window. I had an Rè and Re in the window. I took the regular e and moved the left sidebearing further away from the e in metrics mode. The sidebearings of è did not move, but when I did command z (mac) the sidebearing of è snapped in the same distance that my command z had undone. That's just weird! </div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-11 14:39:17"
			itemprop="datePublished"
		>
			2010-04-11 14:39:17
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Stephen Rapp</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I know. FL sometimes shows unexpected behavior when it comes to composites. [[http://forum.fontlab.com/fontlab-studio/shifting-composites-without-messing-up-the-components’-relative-position-t7121.0.html|Maybe this helps.]]</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-11 16:17:53"
			itemprop="datePublished"
		>
			2010-04-11 16:17:53
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>mekka</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I have a habit of checking the sidebearings of composite glyphs before finishing a font. Sometimes metrics changes to the parent glyph affect the composites and sometimes not. There's probably a pattern to it, but I haven't figured it out.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-11 16:56:02"
			itemprop="datePublished"
		>
			2010-04-11 16:56:02
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Mark Simonson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thanks Mark and Eric. I've got them reset now. It was a pretty odd way of behaving. </div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-11 17:49:24"
			itemprop="datePublished"
		>
			2010-04-11 17:49:24
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Stephen Rapp</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Something else worth noting is that the pulldown in the metrics window that lets you view composites built with a character will often not show all of the composites!</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-11 18:25:40"
			itemprop="datePublished"
		>
			2010-04-11 18:25:40
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>blank</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><em>There's probably a pattern to it, but I haven't figured it out.</em>

Nor have I, which is why I build my composites only after I have completed kerning of the font...</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-11 18:37:10"
			itemprop="datePublished"
		>
			2010-04-11 18:37:10
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>oldnick</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Just been trying some things out with it to try to see what works and what doesn't. 

- You need to be very careful about undoing after changing the left side metrics of a glyph that is used elsewhere as a composite. This is true in both the Metrics window and the Glyph window. If, say, you have "O" and "Oacute" and you change the "O" and then undo, the "O" part of the "Oacute" shifts, but the "acute" part doesn't. Consequently, if you go and fix the sidebearings of the "Oacute" the coordinates of the "acute" will be wrong.

- If you do need to change the left sidebearings of a glyph used in composites, it's better to move the glyph in the Glyph window. That will move all the composites by the same amount.

- A possible workaround: Write a Python script to reset the x coordinate of all child composites of a specified glyph to zero. Assuming this is possible, it should fix any composite shift errors caused by this undo bug. It seems like the "Copy to composites" pop-up below the glyph in the Metrics window is meant to do this (in part), but as James notes it seems to have its own problems. And, in fact, using that command has the same effect I described in the first note above, i.e., it shifts all composites, including ones that were okay where they were, such as accents.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-11 19:01:45"
			itemprop="datePublished"
		>
			2010-04-11 19:01:45
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Mark Simonson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Exactly what I saw in the metrics window, Mark. 

When I shifted the left sidebearing of the original nothing happened to the composite, but when I did an undo, the composite's left sidebearing shifted the same amount to the right even though it had not shifted the first time.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-11 22:24:12"
			itemprop="datePublished"
		>
			2010-04-11 22:24:12
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Stephen Rapp</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Definitely a bug. It can't be meant to work that way on purpose.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-11 23:04:39"
			itemprop="datePublished"
		>
			2010-04-11 23:04:39
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Mark Simonson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I never expect composite glyphs to do anything when I change the parent glyph. I use this FL feature to correct composites when I change a parent glyph.

[img:sites/default/files/old-images/compo_6558.jpg]</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-11 23:41:38"
			itemprop="datePublished"
		>
			2010-04-11 23:41:38
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>.00</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><em>Something else worth noting is that the pulldown in the metrics window that lets you view composites built with a character will often not show all of the composites!</em>

it should if the first component of the composite character is the same as the base glyph. however if you have a diacritic as the first component, it wont show up in the 'Copy to composites' feature shown by James M. above.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-12 00:30:01"
			itemprop="datePublished"
		>
			2010-04-12 00:30:01
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>paul d hunt</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><cite>however if you have a diacritic as the first component, it wont show up in the 'Copy to composites' feature shown by James M. above.</cite>

What determines which is the first component when Fontlab builds the composites? Aliases.dat formatting? Because it does not consistently set the letter as the first component in my fonts.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-12 00:37:29"
			itemprop="datePublished"
		>
			2010-04-12 00:37:29
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>blank</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">what function are you using to build composites? if you're using the 'create glyphs if empty' feature or double-clicking on cells to get this function then yes, the aliases.dat file formatting is what controls the order of components of composite glyphs. however, if you're using a different method to derive composites, i cannot tell you what determines the component order.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-12 04:26:41"
			itemprop="datePublished"
		>
			2010-04-12 04:26:41
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>paul d hunt</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Perhaps this can help with part of the problem:
Some time ago I wrote a little script for check the order of components,
the script only mark the composites that have incorrect order (don't fix the problem).
You can edit this scrip as you want, for instance, you can use your own accents list.

--------------------------------------------
<code># FLM: EMT_Mark_order_components

# Mark glyph if accent is the first component

from robofab.world import CurrentFont
from FL import *

f = CurrentFont()

# Accents list
acentos = ["grave", "acute", "dieresis", "circumflex", "tilde", "macron", "breve", "dotaccent", "ring", "cedilla", "hungarumlaut", "ogonek", "caron" ]
color = 215 

for glyph in f:
> if glyph.components:
>>base = glyph.components[0].baseGlyph	
>>if acentos.count(base) == 1:	
>>>glyph.mark = color
>>>glyph.update()
>>>print base	</code>
--------------------------------------------
(replace > by spaces)

Or download from here:
http://www.emtype.net/tools/EMT_Order_components.py</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-12 11:27:02"
			itemprop="datePublished"
		>
			2010-04-12 11:27:02
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>emtype</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">James, thanks. I didn't realize you could do that in the metrics window.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-12 16:14:46"
			itemprop="datePublished"
		>
			2010-04-12 16:14:46
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Stephen Rapp</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I use create “create glyphs if empty”. I’ve had to add a lot of stuff to aliases.dat to handle large character sets with uppercase and lowercase diacritical marks, so I probably need to recheck my work. Thanks for the tip.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-12 16:41:04"
			itemprop="datePublished"
		>
			2010-04-12 16:41:04
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>blank</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Copy to composites isn't reliable enough to be useful. Before kerning I generate rough composites. Then I delete all composites and generate them again just to make sure nothing went wrong.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-14 07:11:13"
			itemprop="datePublished"
		>
			2010-04-14 07:11:13
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Ray Larabie</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">p.s. generating composites using the alias.dat file together with positioning anchors is fairly effective, especially if your character set is relatively small. Just make sure all the 'recipes' for composites are in the alias.dat file, set your anchors, and then use the 'create glyphs if empty' feature to generate composites. if your sidebearings become corrupted, it's not too hard to just trash your composite characters and regenerate them. unless you've moved on to kerning, you probably don't want to use this method to fix composite characters if you've already kerned them. in that case, use the 'copy [metrics] to composites' feature. that or use some fancy python scripting to refresh your glyphs.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-14 19:38:07"
			itemprop="datePublished"
		>
			2010-04-14 19:38:07
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>paul d hunt</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Just noticed: Among the scripts that are added to FontLab when you install AFDKO is one called "Report or Fix  Base Glyph for Composite Accent". Basically, this fixes any composited accented glyphs in which the base character is not the first component.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-17 01:08:35"
			itemprop="datePublished"
		>
			2010-04-17 01:08:35
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Mark Simonson</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">>>Copy to composites isn't reliable enough to be useful. Before kerning I generate rough composite<<

I'm surprised you find it unreliable. It always behaves as expected when I use it.

James M</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-04-17 15:00:17"
			itemprop="datePublished"
		>
			2010-04-17 15:00:17
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>.00</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
