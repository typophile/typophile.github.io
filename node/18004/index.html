<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Open type fraction feature with glyph positioning | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Open type fraction feature with glyph positioning" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/18004/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2006-02-18T21:41:16+00:00" />
<meta property="article:modified_time" content="2006-02-18T21:41:16+00:00" />

<meta itemprop="name" content="Open type fraction feature with glyph positioning">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2006-02-18T21:41:16+00:00" />
<meta itemprop="dateModified" content="2006-02-18T21:41:16+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Open type fraction feature with glyph positioning"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Open type fraction feature with glyph positioning</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2006-02-18T21:41:16Z">February 18, 2006</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Paul Dieterman</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">Always careful not to scream "Bug!", but what I'm seeing on my screen is at least odd. I've made an Open Type font that can produce nut fractions, fractions with a horizontal bar between numerator and denominator. Strictly speaking these kind of fractions belong in the "afrc" feature, but I put them in the frac feature because that's the one Adobe apps support (with InDesign as main target). The feature consists of a mixture of subtitution and positioning lookups. For instance, if you type "1/23", the 1 will be replaced by a numerator, the slash by a horizontal bar twice the width of single digit and the 2 and 3 will be replaced by denominators. The 1 will be shifted to the right, to center it above the bar, the bar is positioned underneath the 1, and the 2 and 3 are positioned underneath the bar. Works fine in Fontlab, works fine in InDesign (CS and CS2). So far so good. When I checked the font in Illustrator (CS and CS2) the fraction feature only triggered the substitution lookups, not the positioning. Same result in Photoshop. Is this an example of differences in type rendering engines between Adobe apps (in this case Indesign vs AI/PS) shining through? Am I missing something in the Open Type specs? Anyone any thoughts on this?

Kind regards

Paul Dieterman</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">It's almost certainly not you, but Illustrator. The rendering engine and underlying font engine is shared across all the major Adobe apps, but the text engine is not (though Illustrator and Photoshop do share their text engine), and there's where the problem lies.

We don't have anything like this in-house to test with. If you'd be willing to share the font along with a description of the problem, I can pass it on to the relevant engineers. With any luck we could get this fixed for a future version of the Creative Suite.

Regards,

T</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-18 21:55:52"
			itemprop="datePublished"
		>
			2006-02-18 21:55:52
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Thomas Phinney</span
			></span
		>
	</div>
	 <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thanks Thomas for your swift response. It's very easy to reproduce this kind of behaviour without sending you my bunch of code (which I'm willing to send of course). Just put any kind of positioning lookup in the frac feature and it will be ignored by Illustrator.

thanks again
Paul</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-18 22:16:00"
			itemprop="datePublished"
		>
			2006-02-18 22:16:00
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Paul Dieterman</span
			></span
		>
	</div>
	
</div>
 
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Are you building this with FontLab, or with VOLT?

T</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-18 23:44:26"
			itemprop="datePublished"
		>
			2006-02-18 23:44:26
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Thomas Phinney</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I build all my fonts with Fontlab. By the way, is it fair to say that the type rendering engine of InDesign is more sophisticated/up-to-date than Illustrator's or is that an oversimplification?

Paul</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-18 23:54:55"
			itemprop="datePublished"
		>
			2006-02-18 23:54:55
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Paul Dieterman</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><strong>Paul Dieterman</strong>

Please, show the source code of it your feature.

Thanks</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-19 08:23:57"
			itemprop="datePublished"
		>
			2006-02-19 08:23:57
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>menket</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I've done the same thing.
I optimized for InDesign.

The problem I have with Illustrator is that in order to position the superior figure, bar(s), and inferior figure on the same vertical axis, I've given my horizontal bar(s) negative sidebearings, and while InDesign recognizes them on both sides, Illustrator appears not to recognize the right-side negative sidebearing -- so I'm contemplating closing up the space between figure and bar by kerning instead.
But perhaps I will not bother, as I don't believe that Illustrator users have any need of fractions.

Quark 7 offers "fraction" in its OpenType menu, but it is not the correct "Fraction" feature: rather, it is a "hack" using the numerator, fraction slash (virgule) and denominator features.
[img:sites/default/files/old-images/frax.png]

I think it may be possible to achieve consistency across the applications by replacing the angled virgule with a horizontal bar, making superiors and numerators identical, and inferiors and denominators identical, and positioning the fraction elements by kerning -- although the kerning support of OpenType fonts in the beta of Quark 7 is incomplete.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-19 19:54:19"
			itemprop="datePublished"
		>
			2006-02-19 19:54:19
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Nick Shinn</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Nick, would you be willing to throw a misbehaving font my way? I'd love to see this fixed in some future version of Illustrator....

T</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-19 20:35:45"
			itemprop="datePublished"
		>
			2006-02-19 20:35:45
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Thomas Phinney</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I don't use any sidebearings within the horizontal bars, I just apply some very hefty kerning to the glyphs, with the following result in InDesign:
[img:sites/default/files/old-images/InDesignFrac.png]
In Illustrator (or Photoshop) the result is as follows:
[img:sites/default/files/old-images/IllyFrac.png]
Nick, do you kern the bar under the numerator <em><strong>and</strong></em> use negative sidebearings?

Paul</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-19 21:03:01"
			itemprop="datePublished"
		>
			2006-02-19 21:03:01
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Paul Dieterman</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Wow, looks nice.

What the XPress 7 frac feature does is exactly what the specs say. So literally, this is not "hack" but "the right thing". But nicely indicates that specs are a bit behind real-world development.

<cite>... although the kerning support of OpenType fonts in the beta of Quark 7 is incomplete.</cite>

There are always applications which don't support things correctly. Making OpenType fonts either means: including the nice things which specs promised, or: making fonts that work in a majority of applications. If anyone knows how to do both, please let me know. :)
 
More and more I am convinced that trying to get fonts right is one thing. Another one would be to tell application developers explicitly what they shall do with all the information they can find in OpenType fonts! Like, we find the entire history of digital type represented in a collection of font name entries, or three sets of vertical metrics values, or a strange numeric weight value which is even used by apps which otherwise read legacy family/style name (with the nice effect that weight value must be set "wrongly" [specs p.o.v.] so that they work "right" [applications' p.o.v.], or style linking doesn't work) &c ... And there isn't a chance to get rid of some of these information if fonts shall be backward compatible. Which also means that most likely -- because information are there -- even future apps may make use of them.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-19 21:08:24"
			itemprop="datePublished"
		>
			2006-02-19 21:08:24
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>k.l.</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">There's a growing sentiment in much of the OpenType community that all layout features should be free to use all lookup types, as needed.

A lot of this other stuff is indeed arcane and horrible, from a font developer's POV.

T</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-19 21:29:12"
			itemprop="datePublished"
		>
			2006-02-19 21:29:12
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Thomas Phinney</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Contextual kerning would have made my font a <strong>lot</strong> easier to make... 
It's a pity indeed we have to develop fonts with the limitations of the target applications in our minds while the specs promise so much more.

Paul</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-19 21:38:31"
			itemprop="datePublished"
		>
			2006-02-19 21:38:31
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Paul Dieterman</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Thomas, I will send you the font.
Paul, I haven't used kerning within the fraction (i.e. on either side of the horizontal bar).
But I have added a little positive kerning between the full size figures and the superior figures, otherwise the fractions are too close to preceding full-size figures.
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-02-19 23:16:30"
			itemprop="datePublished"
		>
			2006-02-19 23:16:30
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Nick Shinn</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">When I noticed that Nick Shinn said, "I don’t believe that Illustrator users have any need of fractions.", I wanted to respond with a plea that some of us need all the power for setting mathematical expressions you can give us in both Illustrator and Indesign! Please consider that any mathematical expression an author/scientist might want to write in a figure for a journal article or book needs to be doable in Illustrator so that it looks good when put in InDesign.

As another example, in Indesign I figured out how to insert multiple non-breaking white spaces each with negative kerning to write a Greek word with both a superscript and a subscript that start at the same position. (The text contains 139,000 Greek words, each with a id superscript and a separate id subscript). 

From comments I have seen others also are struggling with math expressions in text (InDesign) and figures (Illustrator) even when we buy math plugins.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2006-03-01 23:07:06"
			itemprop="datePublished"
		>
			2006-03-01 23:07:06
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>MLindeman</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><cite>What the XPress 7 frac feature does is exactly what the specs say.</cite>

I think QuarkXPress violates the specification, because it ignores the following rule:

<code>When the full sequence is found in the frac coverage table, the application passes the sequence to the frac table and gets a new GID in return.</code>

Instead of that it directly assumes case two:

<code>When the frac table does not contain an exact match, the application performs two steps. First, it uses the numr feature (see below) to replace figures (as used in the numr coverage table) preceding the slash with numerators, and to replace the typographic slash character (U+002F) with the fraction slash character (U+2044). Second, it uses the dnom feature (see below) to replace all remaining figures (as listed in the dnom coverage table) with denominators.</code>

Maybe the problem can be solved by a hack. (At least the slash can be substituted in the numerator feature. And then it will not be automatically replaced by QuarkXPress.)

At first QuarkXPress seems to check, if a string "figure slash figure" is present in the text for which the fraction feature shall be applied. And then it goes to the numerator feature. If the slash is not substituted there, Quark replaces the slash automatically, before the substitutions embedded in the frac feature can be applied. So "sub slash by fraction.alt" is ignored in the frac feature, because the slash already was replaced by the fraction.

I did make a quick test only. I may be wrong. And in cases, where you have a string of a prebuilt fraction followed by a number, Quark is not replacing anything, because the slash is missing in the string. This problem could maybe solved by integrating a multiple substitution like "sub onequarter by one.numerator slash four.denominator" in the numerator feature. But I did not check that.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-21 19:40:53"
			itemprop="datePublished"
		>
			2010-02-21 19:40:53
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Arno Enslin</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2010-02-21 20:00:19"
			itemprop="datePublished"
		>
			2010-02-21 20:00:19
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>dezcom</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
