<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Class based kerning | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Class based kerning" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/119572/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2014-09-15T23:40:54+00:00" />
<meta property="article:modified_time" content="2014-09-15T23:40:54+00:00" />

<meta itemprop="name" content="Class based kerning">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2014-09-15T23:40:54+00:00" />
<meta itemprop="dateModified" content="2014-09-15T23:40:54+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Class based kerning"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Class based kerning</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2014-09-15T23:40:54Z">September 15, 2014</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Ken Krugh</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">We have a font we've been using for at least 3 years, developed in FontLab, generated as OTF, primarily for use in InDesign, gets updated from time to time.

Somewhere along the line the class based kerning stopped working in InDesign. I know it WAS working because when we first completed the font (compiled form the client's multiple fonts) we needed to use  Karsten Luecke's fabulous "KLTF-MakeKernFeature" Python script to compile the kern feature.

Unfortunately, thus far, I've been unable to determine when the problem began occurring. I only have old FontLab files as back up and NOT the old OTF files, will possibly try generating those to see what comes of it.

So, while I investigate this further, entering panic mode, I thought I'd post asking what would cause this? That is, the class based kerning to not work in InDesign CS6.

Thank you,
Ken</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Have you tried opening a support ticket on this at FontLab's site? It seems likely to me that they could give you a good answer.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2014-09-16 17:30:43"
			itemprop="datePublished"
		>
			2014-09-16 17:30:43
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>George Thomas</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">It is not a FontLab Studio issue nor an issue with my script.

We solved it off the list, but since the issue (in a nutshell: features stopped working in a more recent version of InDesign) has come up a few times recently, it seems worth to remind of adding proper languagesystem statements when defining OTL features:

Defining OTL features is only part one of the job, the other part consists in associating these features with scripts and languages – applications apply only those features that are associated with script and language that match those of a given text.
In AFDKO's OpenType feature file syntax, there are two ways to associate features with scripts and languages.
1) Stating <em>script [script name];</em>, stating <em>language [language name];</em>, followed by the substitution or positioning statements, right in the feature definition.
2) Enumerating all possible script/language combinations in languagesystem statements that precede the feature definitions. (In FLS, their proper place is in the OpenType Panel's bottom right field.) These statements look like this:
<em>languagesystem DFLT dflt;
languagesystem latn dflt;
languagesystem grek dflt;
languagesystem cyrl dflt;</em>
Now, features whose definitions do not mention any script and language will be associated with script/language combinations as mentioned in these languagesystem statements.

If languagesystem statements are missing, AFDKO will silently add one <em>but not all that may be required</em>. As an effect, you may end up generating mal-functioning fonts without even noticing. This is what happened here.

For details, please see the <a href="http://www.adobe.com/devnet/opentype/afdko/topic_feature_file_syntax.html#4.b" target="_blank">AFDKO's OpenType Feature File Specification</a>. Do not miss the <a href="http://www.adobe.com/devnet/opentype/afdko/topic_feature_file_syntax.html#4.h" target="_blank">examples</a>.
A more readable version is in Tal Leming's <a href="http://opentypecookbook.com/rules.html" target="_blank">OpenType Cookbook</a> (search for the "Language Systems" section).

Some more background can be found in the <a href="http://www.microsoft.com/typography/otspec/chapter2.htm" target="_blank">OpenType specification</a> (search for the "Table Organization" section).</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2014-09-16 19:33:55"
			itemprop="datePublished"
		>
			2014-09-16 19:33:55
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>k.l.</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Jeepers Karsten! Not only are you bailing me out via email but also filling in by posts before I even have a chance to go back and do so!! :o)

As Karsten explains, we went from InD CS3 to CS6. CS3 didn't care about the language, CS6 does.

Thank you again, Karsten.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2014-09-17 03:11:22"
			itemprop="datePublished"
		>
			2014-09-17 03:11:22
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Ken Krugh</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">{.}</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2014-09-17 08:49:19"
			itemprop="datePublished"
		>
			2014-09-17 08:49:19
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>J Weltin</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">So, now I'm wondering about InDesign's "[No language]" setting.
I've now defined the following for the languages:
<code>languagesystem DFLT dflt;
languagesystem latn dflt;
languagesystem grek dflt;
languagesystem copt dflt;
languagesystem cyrl dflt;
languagesystem hebr dflt;
languagesystem math dflt;
languagesystem runr dflt;</code>

I would have thought that <code>languagesystem DFLT dflt;</code> would have taken care of this, but apparently not.

It would be accidental if we had "[No language]" applied in InDesign and it seems crazy that InD will, potentially, ignore all features if "[No language]" is applied.

Does anyone know if there is anything I can do in the font to avoid having InD ignore the features when "[No language]" is applied?

Many thanks,
Ken

EDIT: ACaslonPro goes not have the problem, going to investigate that.
Also, when I compile the font I'm getting the following warning from FontLab:
<code>[WARNING] <DOML-Regular> Use of DFLT tag has been deprecated. It will work, but please use 'dflt' instead. [C:/Users/kenkrugh.TEKNTYPE/Documents/FontLab/Studio5/fontlab.fea 90]</code>.
Maybe the line <code>languagesystem DFLT dflt;</code> is not getting implemented even though the warning says it will work?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2014-09-17 14:41:07"
			itemprop="datePublished"
		>
			2014-09-17 14:41:07
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Ken Krugh</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><blockquote>Maybe the line languagesystem DFLT dflt; is not getting implemented even though the warning says it will work?</blockquote>

That's it.
FLS 5.1.x and later versions know about script DFLT. Old FLS 5.0.4 does not.
To address FLS 5.0.4's trouble with script DFLT, Adam Twardoch has made a <a href="http://typophile.com/node/29469#comment-168692" target="_blank">nice script</a>. You would add the line <em>languagesystem DFLT dflt;</em>, you'd generate a buggy TTF or OTF from FLS 5.0.4, and finally you would run the font through the script to fix the TTF or OTF. Unfortunately, the download link which Adam provided back then does not seem to work any more.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2014-09-17 18:31:15"
			itemprop="datePublished"
		>
			2014-09-17 18:31:15
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>k.l.</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">See also: https://groups.google.com/forum/#!topic/uafdkoml/xqJPfEcSrqk</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2014-09-17 20:40:45"
			itemprop="datePublished"
		>
			2014-09-17 20:40:45
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>JanekZ</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Downloaded Studio version 5.2.1, it fixed the problem of using "[No Language]" in InDesign.

However, its now displaying a message that it can't sign the font with our certificate because the password doesn't match, but it does. Any insight into THAT one would be much appreciated.

Karsten, I've not yet tried the script as we discussed via email. Will zip you an email when I do.

Thanks again for all the help,
Ken</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2014-09-18 04:55:02"
			itemprop="datePublished"
		>
			2014-09-18 04:55:02
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>Ken Krugh</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
