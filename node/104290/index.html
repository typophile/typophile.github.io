<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Cannot force substitution feature to work | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="/style.css" rel="stylesheet">

    <meta property="og:title" content="Cannot force substitution feature to work" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/104290/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2013-07-02T04:40:18+00:00" />
<meta property="article:modified_time" content="2013-07-02T04:40:18+00:00" />

<meta itemprop="name" content="Cannot force substitution feature to work">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2013-07-02T04:40:18+00:00" />
<meta itemprop="dateModified" content="2013-07-02T04:40:18+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cannot force substitution feature to work"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Cannot force substitution feature to work</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2013-07-02T04:40:18Z">July 2, 2013</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">
            <a href="/?q=author:PhysicallyReal">
            PhysicallyReal
	    </a>
        </span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody"><p>The problem:
I want sequence of U+0435 (CYRILLIC SMALL LETTER IE, name &ldquo;uni0435&rdquo;) and U+00A8 (name &ldquo;dieresis&rdquo;) chars to be substituted by U+0451 (CYRILLIC SMALL LETTER IO, name &ldquo;uni0451&rdquo;) char.
I want sequence of U+F0987 (Supplementary Private Use Area, name &ldquo;uF0987&rdquo;) and U+100987 (Supplementary Private Use Area, name &ldquo;u100987&rdquo;) chars to be substituted by &ldquo;myglyph1&rdquo; glyph (&ldquo;myglyph1&rdquo; has no Unicode position).
I want sequence of U+F0986 (Supplementary Private Use Area, name &ldquo;uF0986&rdquo;) and U+100986 (Supplementary Private Use Area, name &ldquo;u100986&rdquo;) chars to be substituted by &ldquo;myglyph2&rdquo; glyph (&ldquo;myglyph2&rdquo; has no Unicode position).
I want sequence of &ldquo;uni0451&rdquo;, &ldquo;myglyph1&rdquo; and &ldquo;myglyph2&rdquo; glyphs to be substituted by &ldquo;myglyph3&rdquo; glyph (&ldquo;myglyph3&rdquo; has no Unicode position).</p>
<p>So that if I have uni0435 + uni00A8 + uniF0987 + uni100987 + uniF0986 + uni100986 sequence, I want it all to be substituted by &ldquo;myglyph3&rdquo; glyph.</p>
<p>I thought about this kind of opentype code:</p>
<code>
languagesystem DFLT dflt;
languagesystem cyrl dflt;
languagesystem latn dflt;
feature ccmp { # Glyph Composition / Decomposition
 # DEFAULT
lookup ccmp0 {
    sub uni0435 dieresis by uni0451;
    sub uF0987 u100987 by myglyph1;
    sub uF0986 u100986 by myglyph2;
    sub uni0451 myglyph1 myglyph2 by myglyph3;
} ccmp0;
 script cyrl; # Cyrillic
lookup ccmp0;
 script latn; # Latin
lookup ccmp0;
} ccmp;
</code>
(or feature "dlig")
<p>and MS VOLT lookup source:</p>
<code>
DEF_LOOKUP "l002" PROCESS_BASE PROCESS_MARKS ALL DIRECTION LTR
IN_CONTEXT
END_CONTEXT
AS_SUBSTITUTION
SUB GLYPH "uni0435" GLYPH "dieresis"
WITH GLYPH "uni0451"
END_SUB
SUB GLYPH "uF0987" GLYPH "u100987"
WITH GLYPH "myglyph1"
END_SUB
SUB GLYPH "uF0986" GLYPH "u100986"
WITH GLYPH "myglyph2"
END_SUB
SUB GLYPH "uni0451" GLYPH "myglyph1" GLYPH "myglyph2"
WITH GLYPH "myglyph3"
END_SUB
END_SUBSTITUTION
END
</code>
<p>and I tried to ship font using MS VOLT, but this compiled feature becomes unavailable in Chrome browser (Firefox is OK, I didn&rsquo;t test IE10). How can I solve the problem with Microsoft VOLT or FontLab?</p>
</div>

  
   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Actually, I don&rsquo;t even know what software should I use to add substitution feature to the font. 
For example, I just want to substitute uni0435+dieresis by uni0451, that&rsquo;s all.<br>
If I want to use MS Volt or Fontforge, then what exactly should I do so my browser could access this feature (using CSS &ldquo;font-feature-settings&rdquo;)?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-07-05 05:41:17"
			itemprop="datePublished"
		>
			2013-07-05 05:41:17
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:PhysicallyReal">
            PhysicallyReal
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I don&rsquo;t see any reason that your code and approach shouldn&rsquo;t work. If it works without applying any explicit features in Firefox, but not in Chrome, then it sure sounds like Firefox is behaving correctly, and Chrome has a significant bug in not applying required features.</p>
<p>(On the side, &ldquo;substitute uni0435+dieresis by uni0451&rdquo; doesn&rsquo;t sound quite right. The dieresis encoded at U+00A8 is not the combining dieresis, that would be U+0308.)</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-07-17 20:52:44"
			itemprop="datePublished"
		>
			2013-07-17 20:52:44
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Thomas&#43;Phinney">
            Thomas Phinney
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>I believe the dieresis at U+00A8 is what most of us think of as a &ldquo;legacy&rdquo; dieresis. It originated back when only the first 127 characters of ASCII were fixed. In many 8-bit ASCII encodings, there was a dieresis at A8.</p>
<p>It should live on only for the proper reading of older texts, before Unicode. (Unless there is any need for a spacing modifier dieresis, as I don&rsquo;t believe Unicode has one.) Any new use as a  combining diacritical should be U+0308.</p>
<p>Having said that, most font designer&rsquo;s don&rsquo;t bother with including <strong>any</strong> of the combining diacritics, which makes their fonts not proper Unicode.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-07-17 22:07:51"
			itemprop="datePublished"
		>
			2013-07-17 22:07:51
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:charles&#43;ellertson">
            charles ellertson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><blockquote>
<p>which makes their fonts not proper Unicode</p>
</blockquote>
<p>I was in 100% agreement with you until that phrase. I might say instead &ldquo;which means they have a pretty stupid character set.&rdquo;</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-07-30 02:07:13"
			itemprop="datePublished"
		>
			2013-07-30 02:07:13
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Thomas&#43;Phinney">
            Thomas Phinney
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><blockquote>If it works without applying any explicit features in Firefox, but not in Chrome, then it sure sounds like Firefox is behaving correctly, and Chrome has a significant bug in not applying required features. [Thomas Phinney]
</blockquote>
Thomas, concerning the characters in the extended private user area, at the end of the unicode consortium file http://www.unicode.org/Public/UNIDATA/NamesList.txt it is explicitly written
<blockquote>
@+		These codes are intended for process-internal uses, but are not permitted for interchange.
</blockquote> 
If those codes are provided as input to Chrome and the consortium says they are not permitted for interchange, why would Chrome not be allowed to consider them as garbage?</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-07-30 12:14:56"
			itemprop="datePublished"
		>
			2013-07-30 12:14:56
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Michel&#43;Boyer">
            Michel Boyer
	    </a>
			</span></span>
	</div>
	 <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Michel: Look at the codepoints that comment is applied to more carefully. That comment is applied to explicitly unassigned blocks which are never supposed to be used. It is NOT applied to the three Private Use Area code blocks. At least, that&rsquo;s how I read it. As the characters under discussion are in PUA, and not in any of these reserved non-character blocks, I don&rsquo;t see how this is relevant.</p>
<p>Examples of reserved non-characters: FDDO, 2FF80-2FFFF, EFF80-EFFFF&hellip;.</p>
<p>The three PUA blocks:</p>
<p>U+E000..U+F8FF (though some of these have been used for Variation Selectors and other oddities)
U+F0000..U+FFFFD (Supplemental Private Use Area A)
U+100000..U+10FFFD (Supplemental Private Use Area B)</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-08-02 17:52:04"
			itemprop="datePublished"
		>
			2013-08-02 17:52:04
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Thomas&#43;Phinney">
            Thomas Phinney
	    </a>
			</span></span>
	</div>
	
</div>
 
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Concerning the original question, I suggest having a look at <a href="https://www.typotheque.com/articles/opentype_features_in_web_browsers">Opentype features in web browsers</a> by Gustavo Ferreira on typotheque. There is a <a href="https://www.typotheque.com/articles/opentype_features_in_web_browsers_-_tests">series of tests</a>, and in particular for <a href="https://www.typotheque.com/articles/opentype_features_in_web_browsers_-_tests#liga">liga</a>, standard ligatures. Unfortunately, the syntax varies from browser to browser. I managed to get the ligatures working with Chrome on Mac OS X 10.8 (with a webkit font) with the following settings (a list copied from the site so as to cover most browsers and situations)</p>
<PRE>
font-feature-settings: "liga" on;   
/* vendor-prefixes */
-moz-font-feature-settings: 'liga=1';
-ms-font-feature-settings: "liga" on;
-webkit-font-feature-settings: "liga" on;
-o-font-feature-settings: "liga" on;
</PRE>
<p>and Chrome even accepted those weird ligatures I imagined as some kind of test after reading the initial post:</p>
<PRE>
lookup ligaStandardLigaturesinLatinloo {
  lookupflag 0;
    sub \A \B  by \C;
    sub \uF0987 \u100987  by \Z;
} ligaStandardLigaturesinLatinloo;

feature liga {
  script DFLT;
     language dflt ;
      lookup ligaStandardLigaturesinLatinloo;
  script latn;
     language dflt ;
      lookup ligaStandardLigaturesinLatinloo;
} liga;
</PRE>
<p>The font was made with FontForge (with the graphic interface) and the above feature file is the output from FontForge (and such a feature file can also be used in FontForge with Merge feature file; I prefer using feature files for contextual ligatures and alternates but for liga, the graphic interface works comfortably). As a conclusion, ligatures are not automatic, and also Chrome does not reject disallowed input (I am not sure I like that).</p>
<p>All that being said, I must confess I am also puzzled by the original post. Concerning the letter uni0451, it is normally obtained using a keyboard by first typing a key corresponding to dieresis, and then the key corresponding to uni0435; the final effect is that a single character is entered into the text, and it is uni0451. There is no need of a feature file for that, the keyboard layout sends the right character, uni0451, to the text editor. Everything works fine as long as those three characters are in the font (and you have the appropriate keyboard).</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-07-30 20:30:53"
			itemprop="datePublished"
		>
			2013-07-30 20:30:53
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Michel&#43;Boyer">
            Michel Boyer
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>@Thomas,</p>
<p>I agree it&rsquo;s &ldquo;stupid&rdquo; (&ldquo;not the sharpest knife in the drawer&rdquo; is gentler, maybe?), but I&rsquo;ll stick with it not being proper Unicode, for the following reason. Remember, the consortium put their foot down on assigning any more codepoints to accented characters. IIRC, at that time, they allowed they&rsquo;d never intended to give so many accented characters codepoints anyway, such characters were <strong>suppose</strong> to be constructed using base characters and combining diacritics.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-07-31 04:14:18"
			itemprop="datePublished"
		>
			2013-07-31 04:14:18
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:charles&#43;ellertson">
            charles ellertson
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>The characters used were indeed not touched by the &ldquo;ban&rdquo; which concerned only a limited portion of the areas namely (from the last lines of <a href="http://www.unicode.org/Public/UNIDATA/NamesList.txt">NamesList.txt</a>)</p>
<PRE>
@@	FFF80	Supplementary Private Use Area-A	FFFFF
@@	10FF80	Supplementary Private Use Area-B	10FFFF
</PRE>
<p>I am afraid I was also misled by the meaning I was giving to the word &ldquo;private&rdquo; (that has a completely different meaning in cryptography).</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-08-02 19:41:25"
			itemprop="datePublished"
		>
			2013-08-02 19:41:25
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Michel&#43;Boyer">
            Michel Boyer
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody"><p>Ah! I see.</p>
<p>Yes, in Unicode the &ldquo;Private Use Areas&rdquo; are special zones for people to use the character codes for basically whatever they want. Apps are generally expected to be able to handle and process PUA characters. They are not unusual in the field—particularly the first Private Use Area in the Basic Multilingual Plane has been used pretty extensively&hellip;.</p>
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-08-03 22:50:45"
			itemprop="datePublished"
		>
			2013-08-03 22:50:45
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Thomas&#43;Phinney">
            Thomas Phinney
	    </a>
			</span></span>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">I would rather call those areas &ldquo;Public playground&rdquo; than &ldquo;Private user area&rdquo;.  I wonder where those that chose the terminology are from.</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-08-03 23:10:29"
			itemprop="datePublished"
		>
			2013-08-03 23:10:29
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">

			<span class="p-author h-card" itemprop="name">
            <a href="/?q=author:Michel&#43;Boyer">
            Michel Boyer
	    </a>
			</span></span>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
