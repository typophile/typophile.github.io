<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Uncrashing Win7 rasterizer | Typophile Archive</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.91.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <meta property="og:title" content="Uncrashing Win7 rasterizer" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://typophile.github.io/node/102059/" /><meta property="article:section" content="node" />
<meta property="article:published_time" content="2013-04-06T02:42:44+00:00" />
<meta property="article:modified_time" content="2013-04-06T02:42:44+00:00" />

<meta itemprop="name" content="Uncrashing Win7 rasterizer">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2013-04-06T02:42:44+00:00" />
<meta itemprop="dateModified" content="2013-04-06T02:42:44+00:00" />
<meta itemprop="wordCount" content="0">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Uncrashing Win7 rasterizer"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

      <header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">Typophile Archive</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
</header>
 
    <main class="pb7" role="main">
      
<article class="container">
  <header class="post-header py-3">
    <h1 class="post-title p-name" itemprop="name headline">Uncrashing Win7 rasterizer</h1>
    <p class="text-muted">
              
      <time class="f6 mv4 dib tracked" datetime="2013-04-06T02:42:44Z">April 6, 2013</time>
      
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">ilyaz</span></span>
      

    </p>
  </header>
  <div class="post-content e-content" itemprop="articleBody">I suspect I crashed Windows 7 rasterizer.  I was investigating how my (silly) font was looking at 8pt/em (in Notepad); now Notepad fonts' selection is quirky when I try to choose this font (it won't show — autogenerated — Italic/Bold on the first time I select the font, only on the second time), and, while the dialogue allows me to choose font size, the Notepad continues to use the same 8pt size.
<!--break-->
The other fonts are unaffected (even in the same Notepad session).

Is there any way to clear the rasterizer cache and ask it to start from the scratch?  (Short of rebooting…)</div>

   <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Afraid you have to reboot. The fontcache is held in memory.
First, DELETE the fontcache - c:\windows\SYSTEM32\fntcache.dat
then reboot. With luck, the problem will go away. If it doesn't there's something else wrong!
 - Herb
</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-04-06 07:00:10"
			itemprop="datePublished"
		>
			2013-04-06 07:00:10
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>HVB</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Another ramification (with a different family — from the same super-family of fonts)…  Now, as far I can see, GDI shows the font fine, but DirectWrite treats every character as whitespace :-( ;-).  The font is monospaced, so there is little chance to distinguish one character from another if there is no glyph shown ;-).

(At least what I can see is that Notepad and Chrome show glyphs, but Firefox and IE do not.)  Does it mean that only DirectWrite's rasterizer crashed, or what?  Deleting/reinstalling a font without a reboot does not help…

Yet another tidbit: I did not check before whether the font would show in DirectWrite applications; so I do not know whether what I indicate above is time-dependent.  But I <em>did</em> check that the font worked in Windows' console fine (looking at a document which included all the characters in the font).  — Initially.  — Now it does not (without any change to the setup) — it won’t even show in the menu of available console fonts.  Is it an indication of (another) crash?

If so, crash in which subsystem?  BTW, is console using GDI or DirectWrite?  If latter, there might be a correlation between these two anomalies…</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-04-15 08:46:44"
			itemprop="datePublished"
		>
			2013-04-15 08:46:44
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>ilyaz</span
			></span
		>
	</div>
	
</div>
  <div class="comment card m-3">
	<div class="card-body">
		<div class="commentbody">Finally, I rebooted, and the condition was cleared (one of two fonts would show again).

Surprisingly, both fonts were <strong>deleted</strong> before the reboot.  Still, one of them “resurrected”, and would show fine (at sizes above the “design” size of 16px); it was picked by FireFox automatically.  (I suspect that the reason for the crash of rasterizer [and corruption of some internal structures] was using sizes closer to 8px.)  I did not try to experiment with the other one of two fonts…

Is there any way to detect a particular glyph which caused the crash?  (Bisecting a font with 55000 glyphs, with reboots in between, may take some guts. ;-)  (Not mentioning that the full build process takes 6hours!  But I would not need it for just deleting the glyphs — fontforge would take about 20min to Generate() the TTF.)</div>
	</div>
	<div class="card-footer text-muted post-meta text-end">
		<time
			class="dt-published"
			datetime="2013-05-22 00:54:25"
			itemprop="datePublished"
		>
			2013-05-22 00:54:25
		</time>
		•
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<span class="p-author h-card" itemprop="name"
				>ilyaz</span
			></span
		>
	</div>
	
</div>
 
</article>

    </main>
    
  </body>
</html>
